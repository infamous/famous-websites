/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2015
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2015
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mike@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2015
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: felix@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2015
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2015
 */

!function(){var requirejs,require,define;!function(t){function e(t,e){return g.call(t,e)}function i(t,e){var i,o,s,n,r,a,h,u,c,p,l,f=e&&e.split("/"),d=m.map,y=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),r=t.length-1,m.nodeIdCompat&&_.test(t[r])&&(t[r]=t[r].replace(_,"")),t=f.concat(t),c=0;c<t.length;c+=1)if(l=t[c],"."===l)t.splice(c,1),c-=1;else if(".."===l){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||y)&&d){for(i=t.split("/"),c=i.length;c>0;c-=1){if(o=i.slice(0,c).join("/"),f)for(p=f.length;p>0;p-=1)if(s=d[f.slice(0,p).join("/")],s&&(s=s[o])){n=s,a=c;break}if(n)break;!h&&y&&y[o]&&(h=y[o],u=c)}!n&&h&&(n=h,a=u),n&&(i.splice(0,a,n),t=i.join("/"))}return t}function o(e,i){return function(){return c.apply(t,v.call(arguments,0).concat([e,i]))}}function s(t){return function(e){return i(e,t)}}function n(t){return function(e){f[t]=e}}function r(i){if(e(d,i)){var o=d[i];delete d[i],y[i]=!0,u.apply(t,o)}if(!e(f,i)&&!e(y,i))throw new Error("No "+i);return f[i]}function a(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function h(t){return function(){return m&&m.config&&m.config[t]||{}}}var u,c,p,l,f={},d={},m={},y={},g=Object.prototype.hasOwnProperty,v=[].slice,_=/\.js$/;p=function(t,e){var o,n=a(t),h=n[0];return t=n[1],h&&(h=i(h,e),o=r(h)),h?t=o&&o.normalize?o.normalize(t,s(e)):i(t,e):(t=i(t,e),n=a(t),h=n[0],t=n[1],h&&(o=r(h))),{f:h?h+"!"+t:t,n:t,pr:h,p:o}},l={require:function(t){return o(t)},exports:function(t){var e=f[t];return"undefined"!=typeof e?e:f[t]={}},module:function(t){return{id:t,uri:"",exports:f[t],config:h(t)}}},u=function(i,s,a,h){var u,c,m,g,v,_,w=[],S=typeof a;if(h=h||i,"undefined"===S||"function"===S){for(s=!s.length&&a.length?["require","exports","module"]:s,v=0;v<s.length;v+=1)if(g=p(s[v],h),c=g.f,"require"===c)w[v]=l.require(i);else if("exports"===c)w[v]=l.exports(i),_=!0;else if("module"===c)u=w[v]=l.module(i);else if(e(f,c)||e(d,c)||e(y,c))w[v]=r(c);else{if(!g.p)throw new Error(i+" missing "+c);g.p.load(g.n,o(h,!0),n(c),{}),w[v]=f[c]}m=a?a.apply(f[i],w):void 0,i&&(u&&u.exports!==t&&u.exports!==f[i]?f[i]=u.exports:m===t&&_||(f[i]=m))}else i&&(f[i]=a)},requirejs=require=c=function(e,i,o,s,n){if("string"==typeof e)return l[e]?l[e](i):r(p(e,i).f);if(!e.splice){if(m=e,m.deps&&c(m.deps,m.callback),!i)return;i.splice?(e=i,i=o,o=null):e=t}return i=i||function(){},"function"==typeof o&&(o=s,s=n),s?u(t,e,i,o):setTimeout(function(){u(t,e,i,o)},4),c},c.config=function(t){return c(t)},requirejs._defined=f,define=function(t,i,o){i.splice||(o=i,i=[]),e(f,t)||e(d,t)||(d[t]=[t,i,o])},define.amd={jQuery:!0}}(),define("almond",function(){}),define("famous/core/Entity",["require","exports","module"],function(t,e,i){function o(t){return a[t]}function s(t,e){a[t]=e}function n(t){var e=a.length;return s(e,t),e}function r(t){s(t,null)}var a=[];i.exports={register:n,unregister:r,get:o,set:s}}),define("famous/core/Transform",["require","exports","module"],function(t,e,i){function o(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(o(t))}function n(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},r.multiply=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},r.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},r.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],o=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],s=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return r.thenMove(e,[i,o,s])},r.translate=function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},r.thenScale=function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},r.scale=function(t,e,i){return void 0===i&&(i=1),void 0===e&&(e=t),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},r.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},r.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},r.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,e,i){var o=Math.cos(t),s=Math.sin(t),n=Math.cos(e),r=Math.sin(e),a=Math.cos(i),h=Math.sin(i),u=[n*a,o*h+s*r*a,s*h-o*r*a,0,-n*h,o*a-s*r*h,s*a+o*r*h,0,r,-s*n,o*n,0,0,0,0,1];return u},r.rotateAxis=function(t,e){var i=Math.sin(e),o=Math.cos(e),s=1-o,n=t[0]*t[0]*s,r=t[0]*t[1]*s,a=t[0]*t[2]*s,h=t[1]*t[1]*s,u=t[1]*t[2]*s,c=t[2]*t[2]*s,p=t[0]*i,l=t[1]*i,f=t[2]*i,d=[n+o,r+f,a-l,0,r-f,h+o,u+p,0,a+l,u-p,c+o,0,0,0,0,1];return d},r.aboutOrigin=function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),o=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),s=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return r.thenMove(e,[i,o,s])},r.skew=function(t,e,i){return[1,Math.tan(e),0,0,Math.tan(i),1,0,0,0,Math.tan(t),1,0,0,0,0,1]},r.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},r.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],i=t[4]*t[10]-t[6]*t[8],o=t[4]*t[9]-t[5]*t[8],s=t[1]*t[10]-t[2]*t[9],n=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],h=t[0]*t[6]-t[2]*t[4],u=t[0]*t[5]-t[1]*t[4],c=t[0]*e-t[1]*i+t[2]*o,p=1/c,l=[p*e,-p*s,p*a,0,-p*i,p*n,-p*h,0,p*o,-p*r,p*u,0,0,0,0,1];return l[12]=-t[12]*l[0]-t[13]*l[4]-t[14]*l[8],l[13]=-t[12]*l[1]-t[13]*l[5]-t[14]*l[9],l[14]=-t[12]*l[2]-t[13]*l[6]-t[14]*l[10],l},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var e=[t[0],t[1],t[2]],i=n(e[0]),a=s(e),h=[e[0]+i*a,e[1],e[2]],u=2/o(h);if(u>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];c[0]=1-u*h[0]*h[0],c[5]=1-u*h[1]*h[1],c[10]=1-u*h[2]*h[2],c[1]=-u*h[0]*h[1],c[2]=-u*h[0]*h[2],c[6]=-u*h[1]*h[2],c[4]=c[1],c[8]=c[2],c[9]=c[6];var p=r.multiply(c,t),l=[p[5],p[6]],f=n(l[0]),d=s(l),m=[l[0]+f*d,l[1]],y=2/o(m),g=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];g[5]=1-y*m[0]*m[0],g[10]=1-y*m[1]*m[1],g[6]=-y*m[0]*m[1],g[9]=g[6];var v=r.multiply(g,c),_=r.multiply(v,t),w=r.scale(_[0]<0?-1:1,_[5]<0?-1:1,_[10]<0?-1:1);_=r.multiply(_,w),v=r.multiply(w,v);var S={};return S.translate=r.getTranslate(t),S.rotate=[Math.atan2(-v[6],v[10]),Math.asin(v[2]),Math.atan2(-v[1],v[0])],S.rotate[0]||(S.rotate[0]=0,S.rotate[2]=Math.atan2(v[4],v[5])),S.scale=[_[0],_[5],_[10]],S.skew=[Math.atan2(_[9],S.scale[2]),Math.atan2(_[8],S.scale[2]),Math.atan2(_[4],S.scale[0])],Math.abs(S.rotate[0])+Math.abs(S.rotate[2])>1.5*Math.PI&&(S.rotate[1]=Math.PI-S.rotate[1],S.rotate[1]>Math.PI&&(S.rotate[1]-=2*Math.PI),S.rotate[1]<-Math.PI&&(S.rotate[1]+=2*Math.PI),S.rotate[0]<0?S.rotate[0]+=Math.PI:S.rotate[0]-=Math.PI,S.rotate[2]<0?S.rotate[2]+=Math.PI:S.rotate[2]-=Math.PI),S},r.average=function(t,e,i){i=void 0===i?.5:i;for(var o=r.interpret(t),s=r.interpret(e),n={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)n.translate[a]=(1-i)*o.translate[a]+i*s.translate[a],n.rotate[a]=(1-i)*o.rotate[a]+i*s.rotate[a],n.scale[a]=(1-i)*o.scale[a]+i*s.scale[a],n.skew[a]=(1-i)*o.skew[a]+i*s.skew[a];return r.build(n)},r.build=function(t){var e=r.scale(t.scale[0],t.scale[1],t.scale[2]),i=r.skew(t.skew[0],t.skew[1],t.skew[2]),o=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.multiply(r.multiply(o,i),e),t.translate)},r.equals=function(t,e){return!r.notEquals(t,e)},r.notEquals=function(t,e){return t===e?!1:!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]},r.normalizeRotation=function(t){var e=t.slice(0);for((e[0]===.5*Math.PI||e[0]===.5*-Math.PI)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>.5*Math.PI&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<.5*-Math.PI&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],i.exports=r}),define("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,e,i){function o(){this.result={}}function s(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var n=t("./Transform");o._instance=new o,o.parse=function(t,e){return o._instance.parse(t,e)},o.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,n.identity),this.result},o.prototype.reset=function(){this.result={}};var r=[0,0];o.prototype._parseSpec=function(t,e,i){var o,a,h,u,c,p,l;if("number"==typeof t){if(o=t,h=e.transform,p=e.align||r,e.size&&p&&(p[0]||p[1])){var f=[p[0]*e.size[0],p[1]*e.size[1],0];h=n.thenMove(h,s(f,i))}this.result[o]={transform:h,opacity:e.opacity,origin:e.origin||r,align:e.align||r,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],e,i);else{a=t.target,h=e.transform,u=e.opacity,c=e.origin,p=e.align,l=e.size;var m=i;if(void 0!==t.opacity&&(u=e.opacity*t.opacity),t.transform&&(h=n.multiply(e.transform,t.transform)),t.origin&&(c=t.origin,m=e.transform),t.align&&(p=t.align),t.size||t.proportions){var y=l;l=[l[0],l[1]],t.size&&(void 0!==t.size[0]&&(l[0]=t.size[0]),void 0!==t.size[1]&&(l[1]=t.size[1])),t.proportions&&(void 0!==t.proportions[0]&&(l[0]=l[0]*t.proportions[0]),void 0!==t.proportions[1]&&(l[1]=l[1]*t.proportions[1])),y&&(p&&(p[0]||p[1])&&(h=n.thenMove(h,s([p[0]*y[0],p[1]*y[1],0],i))),c&&(c[0]||c[1])&&(h=n.moveThen([-c[0]*l[0],-c[1]*l[1],0],h))),m=e.transform,c=null,p=null}this._parseSpec(a,{transform:h,opacity:u,origin:c,align:p,size:l},m)}}},i.exports=o}),define("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,e,i){function o(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function s(t,e,i){for(var o=r.parse(t,e),a=Object.keys(o),h=0;h<a.length;h++){var u=a[h],c=n.get(u),p=o[u];p.allocator=e.allocator;var l=c.commit(p);l?s(l,e,i):i[u]=p}}var n=t("./Entity"),r=t("./SpecParser");o.prototype.add=function(t){var e=t instanceof o?t:new o(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},o.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},o.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof o?t:this},o.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},o.prototype.commit=function(t){for(var e=Object.keys(this._prevResults),i=0;i<e.length;i++){var o=e[i];if(void 0===this._resultCache[o]){var r=n.get(o);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},s(this.render(),t,this._resultCache)},o.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},i.exports=o}),define("famous/core/EventEmitter",["require","exports","module"],function(t,e,i){function o(){this.listeners={},this._owner=this}o.prototype.emit=function(t,e){var i=this.listeners[t];if(i)for(var o=0;o<i.length;o++)i[o].call(this._owner,e);return this},o.prototype.on=function(t,e){t in this.listeners||(this.listeners[t]=[]);var i=this.listeners[t].indexOf(e);return 0>i&&this.listeners[t].push(e),this},o.prototype.addListener=o.prototype.on,o.prototype.removeListener=function(t,e){var i=this.listeners[t];if(void 0!==i){var o=i.indexOf(e);o>=0&&i.splice(o,1)}return this},o.prototype.bindThis=function(t){this._owner=t},i.exports=o}),define("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,e,i){function o(){s.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var s=t("./EventEmitter");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},o.setOutputHandler=function(t,e){e instanceof o&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=t.on,t.removeListener=e.removeListener.bind(e)},o.prototype.emit=function(t,e){s.prototype.emit.apply(this,arguments);var i=0;for(i=0;i<this.downstream.length;i++)this.downstream[i].trigger&&this.downstream[i].trigger(t,e);for(i=0;i<this.downstreamFn.length;i++)this.downstreamFn[i](t,e);return this},o.prototype.trigger=o.prototype.emit,o.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return 0>i&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},o.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return i>=0?(e.splice(i,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},o.prototype.on=function(t){if(s.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var e=this.trigger.bind(this,t);this.upstreamListeners[t]=e;for(var i=0;i<this.upstream.length;i++)this.upstream[i].on(t,e)}return this},o.prototype.addListener=o.prototype.on,o.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var i in this.upstreamListeners)t.on(i,this.upstreamListeners[i])}return this},o.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.removeListener(i,this.upstreamListeners[i])}return this},i.exports=o}),define("famous/core/ElementAllocator",["require","exports","module"],function(t,e,i){function o(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}o.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.removeChild(e.firstChild));this.container=t}},o.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return i.length>0?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},o.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),i=this.detachedNodes[e];i.push(t),this.nodeCount--},o.prototype.getNodeCount=function(){return this.nodeCount},i.exports=o}),define("famous/utilities/Utility",["require","exports","module"],function(t,e,i){var o={};o.Direction={X:0,Y:1,Z:2},o.after=function(t,e){var i=t;return function(){i--,0===i&&e.apply(this,arguments)}},o.loadURL=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},o.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},o.clone=function(t){var e;if("object"==typeof t){e=t instanceof Array?[]:{};for(var i in t)if("object"==typeof t[i]&&null!==t[i])if(t[i]instanceof Array){e[i]=new Array(t[i].length);for(var s=0;s<t[i].length;s++)e[i][s]=o.clone(t[i][s])}else e[i]=o.clone(t[i]);else e[i]=t[i]}else e=t;return e},i.exports=o}),define("famous/transitions/MultipleTransition",["require","exports","module","../utilities/Utility"],function(t,e,i){function o(t){this.method=t,this._instances=[],this.state=[]}var s=t("../utilities/Utility");o.SUPPORTS_MULTIPLE=!0,o.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},o.prototype.set=function(t,e,i){for(var o=s.after(t.length,i),n=0;n<t.length;n++)this._instances[n]||(this._instances[n]=new this.method),this._instances[n].set(t[n],e,o)},o.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},i.exports=o}),define("famous/transitions/TweenTransition",["require","exports","module"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,e,i){return(1-i)*t+i*e}function n(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,e){var i={curve:e.curve};return e.duration&&(i.duration=e.duration),e.speed&&(i.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(i.duration=t.duration),t.curve&&(i.curve=t.curve),t.speed&&(i.speed=t.speed)),"string"==typeof i.curve&&(i.curve=o.getCurve(i.curve)),i}function a(t,e,i,o,s){var n,r=1e-7,a=(i(s)-i(s-r))/r;if(t instanceof Array){n=[];for(var h=0;h<t.length;h++)n[h]="number"==typeof t[h]?a*(t[h]-e[h])/o:0}else n=a*(t-e)/o;return n}function h(t,e,i){var o;if(t instanceof Array){o=[];for(var n=0;n<t.length;n++)o[n]="number"==typeof t[n]?s(t[n],e[n],i):t[n]}else o=s(t,e,i);return o}o.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},o.SUPPORTS_MULTIPLE=!0,o.DEFAULT_OPTIONS={curve:o.Curves.linear,duration:500,speed:0};var u={};o.registerCurve=function(t,e){return u[t]?!1:(u[t]=e,!0)},o.unregisterCurve=function(t){return u[t]?(delete u[t],!0):!1},o.getCurve=function(t){var e=u[t];if(void 0!==e)return e;throw new Error("curve not registered")},o.getCurves=function(){return u},o.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},o.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=n(this.get()),e=r(e,this.options),e.speed){var o=this._startValue;if(o instanceof Object){var s=0;for(var a in o)s+=(t[a]-o[a])*(t[a]-o[a]);e.duration=Math.sqrt(s)/e.speed}else e.duration=Math.abs(t-o)/e.speed}this._startTime=Date.now(),this._endValue=n(t),this._startVelocity=n(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},o.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=n(t),this.velocity=n(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},o.prototype.getVelocity=function(){return this.velocity},o.prototype.get=function(t){return this.update(t),this.state},o.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=h(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var o=this._callback;this._callback=void 0,o()}},o.prototype.isActive=function(){return this._active},o.prototype.halt=function(){this.reset(this.get())},o.registerCurve("linear",o.Curves.linear),o.registerCurve("easeIn",o.Curves.easeIn),o.registerCurve("easeOut",o.Curves.easeOut),o.registerCurve("easeInOut",o.Curves.easeInOut),o.registerCurve("easeOutBounce",o.Curves.easeOutBounce),o.registerCurve("spring",o.Curves.spring),o.customCurve=function(t,e){return t=t||0,e=e||0,function(i){return t*i+(-2*t-e+3)*i*i+(t+e-2)*i*i*i}},i.exports=o}),define("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,e,i){function o(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function s(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,i=this.currentAction[0],o=this.currentAction[1];o instanceof Object&&o.method?(e=o.method,"string"==typeof e&&(e=a[e])):e=r,this._currentMethod!==e&&(this._engineInstance=!(i instanceof Object)||e.SUPPORTS_MULTIPLE===!0||i.length<=e.SUPPORTS_MULTIPLE?new e:new n(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(o.velocity=this.velocity),this._engineInstance.set(i,o,s.bind(this))}var n=t("./MultipleTransition"),r=t("./TweenTransition"),a={};o.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},o.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},o.prototype.set=function(t,e,i){if(!e)return this.reset(t),i&&i(),this;var o=[t,e];return this.actionQueue.push(o),this.callbackQueue.push(i),this.currentAction||s.call(this),this},o.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},o.prototype.delay=function(t,e){this.set(this.get(),{duration:t,curve:function(){return 0}},e)},o.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},o.prototype.isActive=function(){return!!this.currentAction},o.prototype.halt=function(){return this.set(this.get())},i.exports=o}),define("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","../transitions/Transitionable"],function(t,e,i){function o(t){return[t.clientWidth,t.clientHeight]}function s(t){this.container=t,this._allocator=new a(t),this._node=new n,this._eventOutput=new r,this._size=o(this.container),this._perspectiveState=new u(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:h.identity,opacity:1,origin:c,align:c,size:this._size},this._eventOutput.on("resize",function(){this.setSize(o(this.container))}.bind(this))}var n=t("./RenderNode"),r=t("./EventHandler"),a=t("./ElementAllocator"),h=t("./Transform"),u=t("../transitions/Transitionable"),c=[0,0],p=!("perspective"in document.documentElement.style),l=p?function(t,e){t.style.webkitPerspective=e?e.toFixed()+"px":""}:function(t,e){t.style.perspective=e?e.toFixed()+"px":""};s.prototype.getAllocator=function(){return this._allocator},s.prototype.add=function(t){return this._node.add(t)},s.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},s.prototype.getSize=function(){return this._size},s.prototype.setSize=function(t){t||(t=o(this.container)),this._size[0]=t[0],this._size[1]=t[1]},s.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(l(this.container,e),this._perspective=e),this._node.commit(this._nodeContext)},s.prototype.getPerspective=function(){return this._perspectiveState.get()},s.prototype.setPerspective=function(t,e,i){return this._perspectiveState.set(t,e,i)},s.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},s.prototype.on=function(t,e){return this._eventOutput.on(t,e)},s.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},s.prototype.pipe=function(t){return this._eventOutput.pipe(t)},s.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},i.exports=s}),define("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,e,i){function o(t){this._value=t,this.eventOutput=null}function s(){this.eventOutput=new n,this.eventOutput.bindThis(this),n.setOutputHandler(this,this.eventOutput)}var n=t("./EventHandler");o.patch=function(t){for(var e=new o(t),i=1;i<arguments.length;i++)e.patch(arguments[i]);return t},o.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var i=arguments[e];for(var o in i)o in t&&i[o]&&i[o].constructor===Object&&t[o]&&t[o].constructor===Object?(t.hasOwnProperty(o)||(t[o]=Object.create(t[o])),this.key(o).patch(i[o]),this.eventOutput&&this.eventOutput.emit("change",{id:o,value:this.key(o).value()})):this.set(o,i[o])}return this},o.prototype.setOptions=o.prototype.patch,o.prototype.key=function(t){var e=new o(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},o.prototype.get=function(t){return t?this._value[t]:this._value},o.prototype.getOptions=o.prototype.get,o.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},o.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},o.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},o.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},o.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=o}),define("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,e,i){function o(){_.runLoop?(p.step(),window.requestAnimationFrame(o)):y=!1}function s(){for(var t=0;t<l.length;t++)l[t].emit("resize");v.emit("resize")}function n(){window.addEventListener("touchmove",function(t){t.preventDefault()},!0),document.body.classList.add("famous-root"),document.documentElement.classList.add("famous-root")}var r,a,h=t("./Context"),u=t("./EventHandler"),c=t("./OptionsManager"),p={},l=[],f=[],d=[],m=Date.now(),y=!0,g={},v=new u,_={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},w=new c(_),S=10;p.step=function(){var t=Date.now();if(!(a&&a>t-m)){var e=0;for(r=t-m,m=t,v.emit("prerender"),e=0;e<f.length;e++)f[e].call(this);for(f.splice(0);d.length&&Date.now()-t<S;)d.shift().call(this);for(e=0;e<l.length;e++)l[e].update();v.emit("postrender")}},window.requestAnimationFrame(o),window.addEventListener("resize",s,!1),s();var O=!1;p.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(p):v.pipe(t)},p.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(p):v.unpipe(t)},p.on=function(t,e){return t in g||(g[t]=v.emit.bind(v,t),document.body?document.body.addEventListener(t,g[t]):p.nextTick(function(t,e){document.body.addEventListener(t,e)}.bind(this,t,g[t]))),v.on(t,e)},p.emit=function(t,e){return v.emit(t,e)},p.removeListener=function(t,e){return v.removeListener(t,e)},p.getFPS=function(){return 1e3/r},p.setFPSCap=function(t){a=Math.floor(1e3/t)},p.getOptions=function(t){return w.getOptions(t)},p.setOptions=function(){return w.setOptions.apply(w,arguments)},p.createContext=function(t){!O&&_.appMode&&p.nextTick(n);var e=!1;t||(t=document.createElement(_.containerType),t.classList.add(_.containerClass),e=!0);var i=new h(t);return p.registerContext(i),e&&p.nextTick(function(t,e){document.body.appendChild(e),t.emit("resize")}.bind(this,i,t)),i},p.registerContext=function(t){return l.push(t),t},p.getContexts=function(){return l},p.deregisterContext=function(t){var e=l.indexOf(t);e>=0&&l.splice(e,1)},p.nextTick=function(t){f.push(t)},p.defer=function(t){d.push(t)},w.on("change",function(t){"fpsCap"===t.id?p.setFPSCap(t.value):"runLoop"===t.id&&!y&&t.value&&(y=!0,window.requestAnimationFrame(o))}),i.exports=p}),define("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode","../utilities/Utility"],function(t,e,i){function o(t){this._node=new r,this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.options=a.clone(this.constructor.DEFAULT_OPTIONS||o.DEFAULT_OPTIONS),this._optionsManager=new n(this.options),t&&this.setOptions(t)}var s=t("./EventHandler"),n=t("./OptionsManager"),r=t("./RenderNode"),a=t("../utilities/Utility");o.DEFAULT_OPTIONS={},o.prototype.getOptions=function(t){return this._optionsManager.getOptions(t)},o.prototype.setOptions=function(t){this._optionsManager.patch(t)},o.prototype.add=function(){return this._node.add.apply(this._node,arguments)},o.prototype._add=o.prototype.add,o.prototype.render=function(){return this._node.render()},o.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},i.exports=o}),define("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","../core/Transform","../utilities/Utility"],function(t,e,i){function o(t){this._final=a.identity.slice(),this._finalTranslate=[0,0,0],this._finalRotate=[0,0,0],this._finalSkew=[0,0,0],this._finalScale=[1,1,1],this.translate=new r(this._finalTranslate),this.rotate=new r(this._finalRotate),this.skew=new r(this._finalSkew),this.scale=new r(this._finalScale),t&&this.set(t)}function s(){return a.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}function n(){return a.build({translate:this._finalTranslate,rotate:this._finalRotate,skew:this._finalSkew,scale:this._finalScale})}var r=t("./Transitionable"),a=t("../core/Transform"),h=t("../utilities/Utility");
o.prototype.setTranslate=function(t,e,i){return this._finalTranslate=t,this._final=n.call(this),this.translate.set(t,e,i),this},o.prototype.setScale=function(t,e,i){return this._finalScale=t,this._final=n.call(this),this.scale.set(t,e,i),this},o.prototype.setRotate=function(t,e,i){return this._finalRotate=t,this._final=n.call(this),this.rotate.set(t,e,i),this},o.prototype.setSkew=function(t,e,i){return this._finalSkew=t,this._final=n.call(this),this.skew.set(t,e,i),this},o.prototype.set=function(t,e,i){var o=a.interpret(t);this._finalTranslate=o.translate,this._finalRotate=o.rotate,this._finalSkew=o.skew,this._finalScale=o.scale,this._final=t;var s=i?h.after(4,i):null;return this.translate.set(o.translate,e,s),this.rotate.set(o.rotate,e,s),this.skew.set(o.skew,e,s),this.scale.set(o.scale,e,s),this},o.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},o.prototype.get=function(){return this.isActive()?s.call(this):this._final},o.prototype.getFinal=function(){return this._final},o.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},o.prototype.halt=function(){this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt(),this._final=this.get(),this._finalTranslate=this.translate.get(),this._finalRotate=this.rotate.get(),this._finalSkew=this.skew.get(),this._finalScale=this.scale.get()},i.exports=o}),define("famous/core/Modifier",["require","exports","module","./Transform","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,e,i){function o(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null,this._legacyStates={},this._output={transform:n.identity,opacity:1,origin:null,align:null,size:null,proportions:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size),t.proportions&&this.proportionsFrom(t.proportions))}function s(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter()),this._proportionGetter&&(this._output.proportions=this._proportionGetter())}var n=t("./Transform"),r=t("../transitions/Transitionable"),a=t("../transitions/TransitionableTransform");o.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},o.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},o.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},o.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},o.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},o.prototype.proportionsFrom=function(t){return t instanceof Function?this._proportionGetter=t:t instanceof Object&&t.get?this._proportionGetter=t.get.bind(t):(this._proportionGetter=null,this._output.proportions=t),this},o.prototype.setTransform=function(t,e,i){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,i),this):this.transformFrom(t)},o.prototype.setOpacity=function(t,e,i){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new r(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,i)):this.opacityFrom(t)},o.prototype.setOrigin=function(t,e,i){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new r(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,i),this):this.originFrom(t)},o.prototype.setAlign=function(t,e,i){return e||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new r(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,e,i),this):this.alignFrom(t)},o.prototype.setSize=function(t,e,i){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new r(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,i),this):this.sizeFrom(t)},o.prototype.setProportions=function(t,e,i){return t&&(e||this._legacyStates.proportions)?(this._legacyStates.proportions||(this._legacyStates.proportions=new r(this._output.proportions||[0,0])),this._proportionGetter||this.proportionsFrom(this._legacyStates.proportions),this._legacyStates.proportions.set(t,e,i),this):this.proportionsFrom(t)},o.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._legacyStates.proportions&&this._legacyStates.proportions.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null},o.prototype.getTransform=function(){return this._transformGetter()},o.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},o.prototype.getOpacity=function(){return this._opacityGetter()},o.prototype.getOrigin=function(){return this._originGetter()},o.prototype.getAlign=function(){return this._alignGetter()},o.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},o.prototype.getProportions=function(){return this._proportionGetter?this._proportionGetter():this._output.proportions},o.prototype.modify=function(t){return s.call(this),this._output.target=t,this._output},i.exports=o}),define("famous/views/FlexibleLayout",["require","exports","module","../core/Entity","../core/Transform","../core/OptionsManager","../core/EventHandler","../transitions/Transitionable"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this.optionsManager=new h(this.options),t&&this.setOptions(t),this.id=r.register(this),this._ratios=new c(this.options.ratios),this._nodes=[],this._size=[0,0],this._cachedDirection=null,this._cachedLengths=[],this._cachedTransforms=null,this._ratiosDirty=!1,this._eventOutput=new u,u.setOutputHandler(this,this._eventOutput)}function s(t,e,i){var s,n,r,h,u=0,c=e,p=0;for(this._cachedLengths=[],this._cachedTransforms=[],h=0;h<t.length;h++)n=t[h],r=this._nodes[h],"number"!=typeof n?c-=r.getSize()[i]||0:p+=n;for(h=0;h<t.length;h++)r=this._nodes[h],n=t[h],e="number"==typeof n?c*n/p:r.getSize()[i],s=i===o.DIRECTION_X?a.translate(u,0,0):a.translate(0,u,0),this._cachedTransforms.push(s),this._cachedLengths.push(e),u+=e}function n(t,e){for(var i=0;i<t.length;i++)if("number"!=typeof t[i]&&this._nodes[i].getSize()[e]!==this._cachedLengths[i])return!0;return!1}var r=t("../core/Entity"),a=t("../core/Transform"),h=t("../core/OptionsManager"),u=t("../core/EventHandler"),c=t("../transitions/Transitionable");o.DIRECTION_X=0,o.DIRECTION_Y=1,o.DEFAULT_OPTIONS={direction:o.DIRECTION_X,transition:!1,ratios:[]},o.prototype.render=function(){return this.id},o.prototype.setOptions=function(t){this.optionsManager.setOptions(t)},o.prototype.sequenceFrom=function(t){if(this._nodes=t,0===this._ratios.get().length){for(var e=[],i=0;i<this._nodes.length;i++)e.push(1);this.setRatios(e)}},o.prototype.setRatios=function(t,e,i){void 0===e&&(e=this.options.transition);var o=this._ratios;0===o.get().length&&(e=void 0),o.isActive()&&o.halt(),o.set(t,e,i),this._ratiosDirty=!0},o.prototype.getSize=function(){return this._size},o.prototype.commit=function(t){var e,i=t.size,o=t.transform,r=t.origin,h=t.opacity,u=this._ratios.get(),c=this.options.direction,p=i[c];(p!==this._size[c]||this._ratiosDirty||this._ratios.isActive()||c!==this._cachedDirection||n.call(this,u,c))&&(s.call(this,u,p,c),p!==this._size[c]&&(this._size[0]=i[0],this._size[1]=i[1]),c!==this._cachedDirection&&(this._cachedDirection=c),this._ratiosDirty&&(this._ratiosDirty=!1));for(var l=[],f=0;f<u.length;f++)e=[void 0,void 0],p=this._cachedLengths[f],e[c]=p,l.push({transform:this._cachedTransforms[f],size:e,target:this._nodes[f].render()});return i&&0!==r[0]&&0!==r[1]&&(o=a.moveThen([-i[0]*r[0],-i[1]*r[1],0],o)),{transform:o,size:i,opacity:h,target:l}},i.exports=o}),define("utils/Router",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function o(t){this.routePrefix=t.routePrefix,this._eventOutput=new n,n.setOutputHandler(this,this._eventOutput),this.bindStateChange()}function s(t,e,i){return"/"+t+"#/"+e+"/"+i}var n=t("famous/core/EventHandler");o.prototype.bindStateChange=function(){History.Adapter.bind(window,"statechange",function(){this.parseUrl()}.bind(this))},o.prototype.parseUrl=function(){var t,e,i;if(window.sessionModel){var o=window.sessionModel.getLessonInfo();document.title="Famo.us University | "+o.lessonTitle}if(t=window.location.hash?window.location.hash.split("#/")[1]:window.location.pathname.split(this.routePrefix)[1],t=t.replace("#/","#").split("/"),""===t[t.length-1]&&t.pop(),e=t.slice(0,2).join("/"),t.length>2&&t[2])i=parseInt(t.pop());else{if(!(t.length<2))return i=1,void this.pushState(e,i);location.href="//famo.us/university"}var n=s(this.routePrefix,e,i);ga("send","pageview",n),mixpanel.track("pageChange",{page:n,version:"1.1"}),e!==this._lessonPath?this._eventOutput.emit("changeLesson",{lessonPath:e,stepNumber:i}):i!==this._stepNumber&&this._eventOutput.emit("changeStep",i),this._lessonPath=e,this._stepNumber=i},o.prototype.loadInitialLesson=function(t){this._eventOutput.emit("changeLesson",{lessonPath:t.lessonPath,stepNumber:t.step||1}),this.pushState(t.lessonPath,t.step||1)},o.prototype.pushState=function(t,e){location.href=s(this.routePrefix,t,e)},o.prototype.next=function(t,e){this.pushState(t,e+1)},o.prototype.prev=function(t,e){this.pushState(t,e-1)},i.exports=o}),define("utils/mvc/Model",["require","exports","module","famous/core/OptionsManager","famous/core/EventHandler"],function(t,e,i){function o(t){s.call(this,Object.create(this.constructor.DEFAULT_OPTIONS)||{}),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.patch(t),this.eventOutput=new n,n.setOutputHandler(this,this.eventOutput),this.on("change",this._handleChange),this.id=o.ID++}var s=t("famous/core/OptionsManager"),n=t("famous/core/EventHandler");o.ID=0,o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype._handleChange=function(t){var e="change:"+t.id;this.eventOutput.emit(e,t.value)},o.prototype.toJSON=function(){return this.value()},o.prototype.toString=function(){return JSON.stringify(this.value())},o.DEFAULT_OPTIONS={},i.exports=o}),define("models/LayoutModel",["require","exports","module","utils/mvc/Model"],function(t,e,i){function o(){s.apply(this,arguments)}var s=t("utils/mvc/Model");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={defaultLayout:"threePanel"},o.prototype.setLayout=function(t){t=t||this.options.defaultLayout;var e,i={onePanel:[0,0,1],threePanel:[1,1,1],twoPanel:{state:[0,1,1],ratios:[0,1,1]},textCode:{state:[1,1,0],ratios:[1,1,0]},textPreview:{state:[1,1,0],ratios:[1,1,0]},textApp:{state:[1,1,0],ratios:[1,1,0]}},o={textCode:["instruction","editors",null],textApp:["instruction","iframe",null],textPreview:["instruction","preview",null]};e=i[t]||i[this.options.defaultLayout],o[t]?(e.modules=o[t],this.set("showLayoutButtons",!1)):this.set("showLayoutButtons",!0),this.set("layout",t),this.set("state",e)},o.prototype.updateNav=function(){this.eventOutput.emit("change:navStates",this.get("navStates"))},i.exports=o}),define("models/StepModel",["require","exports","module","utils/mvc/Model"],function(t,e,i){function o(){s.apply(this,arguments);var t=this.get("code");for(var e in t)this.set(e,t[e])}var s=t("utils/mvc/Model");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={javascript:"// Your javascript code here",html:"<!DOCTYPE HTML>",css:"/* css */",json:"",instruction:"#Instructions here",previewUrl:"preview-adapters/preview-adapter-famous-deprecated/index.html",layout:"threePanel",editorModules:["javascript"],previewAdapter:"famous"},o.prototype.setCode=function(t){this.set("javascript",t.javascript),this.set("html",t.html),this.set("css",t.css),this.set("json",t.json)},o.prototype.getCode=function(){return{javascript:this.get("javascript"),html:this.get("html"),css:this.get("css"),json:this.get("json")}},o.prototype.getStepData=function(){return{code:this.getCode(),instruction:this.get("instruction"),previewUrl:this.get("previewUrl"),layout:this.get("layout"),editorModules:this.getEditorModules()}},o.prototype.setEditorModules=function(t){this.editorModules=t},o.prototype.getEditorModules=function(){return this.editorModules||this.get("editorModules")},i.exports=o}),define("models/LessonModel",["require","exports","module","utils/mvc/Model","models/StepModel"],function(t,e,i){function o(){s.apply(this,arguments)}var s=t("utils/mvc/Model"),n=t("models/StepModel");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={lessonInfo:{author:"Famo.us Industries",image:"content/fuicons/hello-famous.svg",lessonTitle:"New Lesson",lessonDescription:"Famo.us University Lesson"},steps:[]},o.prototype.setSteps=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new n(t[i]));this.set("steps",e)},o.prototype.addStep=function(t){this.get("steps").splice(t,0,new n)},o.prototype.deleteStep=function(t){this.get("steps").splice(t,1)},o.prototype.getAllStepData=function(){for(var t=this.get("steps"),e={lessonInfo:this.get("lessonInfo"),steps:[]},i=0;i<t.length;i++)e.steps.push(t[i].getStepData());return e},i.exports=o}),define("models/SessionModel",["require","exports","module","famous/utilities/Utility","utils/mvc/Model","models/LayoutModel","models/LessonModel"],function(t,e,i){function o(t){n.apply(this,arguments),this.dataPrefix=t.dataPrefix,this.layoutModel=new r,this.lessonModel=new a,this.layoutModel.on("change:layout",function(t){window.step=this.getCurrentStep(),this.getCurrentStep().set("layout",t)}.bind(this))}var s=t("famous/utilities/Utility"),n=t("utils/mvc/Model"),r=t("models/LayoutModel"),a=t("models/LessonModel");o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},o.prototype.changeLesson=function(t){this.fetchLessonData(t.lessonPath,function(){this.setCurrentStep(t.stepNumber)}.bind(this))},o.prototype.fetchLessonData=function(t,e){this.lessonPath=t;var i=this.dataPrefix+t+".json";s.loadURL(i,function(t){if(/403 Forbidden/.test(t))location.href="//famo.us/university";else{if(t=JSON.parse(t),!t)return;this.lessonModel.set("lessonInfo",t.lessonInfo),this.lessonModel.setSteps(t.steps),e&&e()}}.bind(this))},o.prototype.setCurrentStep=function(t){this.set("stepNumber",t);var e=this.lessonModel.get("steps"),i=e[t-1];this.layoutModel.setLayout(i.get("layout"));var o=t>1?!0:!1,s=t<e.length?!0:!1;this.layoutModel.set("navStates",{prev:o,next:s})},o.prototype.getCurrentStep=function(){var t=this.get("stepNumber")-1;return this.lessonModel.get("steps")[t]},o.prototype.getLessonInfo=function(){return this.lessonModel.get("lessonInfo")},i.exports=o}),define("famous/core/ElementOutput",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,e,i){function o(t){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new c,this._eventOutput.bindThis(this),this.eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this),this.id=u.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,t&&this.attach(t)}function s(t){for(var e in this._eventOutput.listeners)t.addEventListener(e,this.eventForwarder)}function n(t){for(var e in this._eventOutput.listeners)t.removeEventListener(e,this.eventForwarder)}function r(t){t[12]=Math.round(t[12]*f)/f,t[13]=Math.round(t[13]*f)/f;for(var e="matrix3d(",i=0;15>i;i++)e+=t[i]<1e-6&&t[i]>-1e-6?"0,":t[i]+",";return e+=t[15]+")"}function a(t){return 100*t[0]+"% "+100*t[1]+"%"}function h(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var u=t("./Entity"),c=t("./EventHandler"),p=t("./Transform"),l=!("transform"in document.documentElement.style),f=window.devicePixelRatio||1;o.prototype.on=function(t,e){this._element&&this._element.addEventListener(t,this.eventForwarder),this._eventOutput.on(t,e)},o.prototype.removeListener=function(t,e){this._eventOutput.removeListener(t,e)},o.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this._eventOutput.emit(t,e);return i&&e&&e.stopPropagation&&e.stopPropagation(),i},o.prototype.pipe=function(t){return this._eventOutput.pipe(t)},o.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},o.prototype.render=function(){return this.id};var d;d=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,e){t.style.zIndex=1e6*e[14]|0,t.style.transform=r(e)}:l?function(t,e){t.style.webkitTransform=r(e)}:function(t,e){t.style.transform=r(e)};var m=l?function(t,e){t.style.webkitTransformOrigin=a(e)}:function(t,e){t.style.transformOrigin=a(e)},y=l?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0};o.prototype.commit=function(t){var e=this._element;if(e){{var i=t.transform,o=t.opacity,s=t.origin;t.size}if(!i&&this._matrix)return this._matrix=null,this._opacity=0,void y(e);if(h(this._origin,s)&&(this._originDirty=!0),p.notEquals(this._matrix,i)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==o&&(this._opacity=o,e.style.opacity=o>=1?"0.999999":o),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._sizeDirty=!1),this._originDirty&&(s?(this._origin||(this._origin=[0,0]),this._origin[0]=s[0],this._origin[1]=s[1]):this._origin=null,m(e,this._origin),this._originDirty=!1),i||(i=p.identity),this._matrix=i;var n=this._size?p.thenMove(i,[-this._size[0]*s[0],-this._size[1]*s[1],0]):i;d(e,n),this._transformDirty=!1}}},o.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},o.prototype.attach=function(t){this._element=t,s.call(this,t)},o.prototype.detach=function(){var t=this._element;return t&&(n.call(this,t),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,t},i.exports=o}),define("famous/core/Surface",["require","exports","module","./ElementOutput"],function(t,e,i){function o(t){c.call(this),this.options={},this.properties={},this.attributes={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._trueSizeCheck=!0,this._dirtyClasses=[],t&&this.setOptions(t),this._currentTarget=null}function s(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function n(t){for(var e in this.properties)t.style[e]=this.properties[e]}function r(t){for(var e in this.properties)t.style[e]=""}function a(t){for(var e in this.attributes)t.setAttribute(e,this.attributes[e])}function h(t){for(var e in this.attributes)t.removeAttribute(e)}function u(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var c=t("./ElementOutput");o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.prototype.elementType="div",o.prototype.elementClass="famous-surface",o.prototype.setAttributes=function(t){for(var e in t){if("style"===e)throw new Error('Cannot set styles via "setAttributes" as it will break Famo.us.  Use "setProperties" instead.');this.attributes[e]=t[e]}this._attributesDirty=!0},o.prototype.getAttributes=function(){return this.attributes},o.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];return this._stylesDirty=!0,this},o.prototype.getProperties=function(){return this.properties},o.prototype.addClass=function(t){return this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0),this},o.prototype.removeClass=function(t){var e=this.classList.indexOf(t);return e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0),this},o.prototype.toggleClass=function(t){var e=this.classList.indexOf(t);return e>=0?this.removeClass(t):this.addClass(t),this},o.prototype.setClasses=function(t){var e=0,i=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(e=0;e<i.length;e++)this.removeClass(i[e]);for(e=0;e<t.length;e++)this.addClass(t[e]);return this},o.prototype.getClassList=function(){return this.classList},o.prototype.setContent=function(t){return this.content!==t&&(this.content=t,this._contentDirty=!0),this},o.prototype.getContent=function(){return this.content},o.prototype.setOptions=function(t){return t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.attributes&&this.setAttributes(t.attributes),t.content&&this.setContent(t.content),this},o.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);e.style.display="",this.attach(e),this._opacity=null,this._currentTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._originDirty=!0,this._transformDirty=!0},o.prototype.commit=function(t){this._currentTarget||this.setup(t.allocator);var e=this._currentTarget,i=t.size;if(this._classesDirty){s.call(this,e);for(var o=this.getClassList(),r=0;r<o.length;r++)e.classList.add(o[r]);this._classesDirty=!1,this._trueSizeCheck=!0}if(this._stylesDirty&&(n.call(this,e),this._stylesDirty=!1,this._trueSizeCheck=!0),this._attributesDirty&&(a.call(this,e),this._attributesDirty=!1,this._trueSizeCheck=!0),this.size){var h=t.size;if(i=[this.size[0],this.size[1]],void 0===i[0]&&(i[0]=h[0]),void 0===i[1]&&(i[1]=h[1]),i[0]===!0||i[1]===!0){if(i[0]!==!0||!this._trueSizeCheck&&0!==this._size[0])this._size&&(i[0]=this._size[0]);else{var p=e.clientWidth;this._size&&this._size[0]!==p&&(this._size[0]=p,this._sizeDirty=!0),i[0]=p}if(i[1]!==!0||!this._trueSizeCheck&&0!==this._size[1])this._size&&(i[1]=this._size[1]);else{var l=e.clientHeight;this._size&&this._size[1]!==l&&(this._size[1]=l,this._sizeDirty=!0),i[1]=l}this._trueSizeCheck=!1}}u(this._size,i)&&(this._size||(this._size=[0,0]),this._size[0]=i[0],this._size[1]=i[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(e.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",e.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._eventOutput.emit("resize")),this._contentDirty&&(this.deploy(e),this._eventOutput.emit("deploy"),this._contentDirty=!1,this._trueSizeCheck=!0),c.prototype.commit.call(this,t)},o.prototype.cleanup=function(t){var e=0,i=this._currentTarget;this._eventOutput.emit("recall"),this.recall(i),i.style.display="none",i.style.opacity="",i.style.width="",i.style.height="",r.call(this,i),h.call(this,i);var o=this.getClassList();for(s.call(this,i),e=0;e<o.length;e++)i.classList.remove(o[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)i.classList.remove(this.elementClass[e]);else i.classList.remove(this.elementClass);this.detach(i),this._currentTarget=null,t.deallocate(i)},o.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},o.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},o.prototype.getSize=function(){return this._size?this._size:this.size},o.prototype.setSize=function(t){return this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0,this},i.exports=o}),define("views/NavigationView",["require","exports","module","famous/core/View","famous/core/Surface"],function(t,e,i){function o(){n.apply(this,arguments),s.call(this)}function s(){var t=new r({content:'<div id="nav-bar"><a href="/" class="nav-bar-item"><img src="content/images/famous_logo_white.svg" width="54" height="54"></a><a href="/university" class="nav-bar-item">Famo.us University</a><a href="/angular" class="nav-bar-item">Famo.us/Angular</a><a href="/docs/" class="nav-bar-item">Docs</a><a href="/help" class="nav-bar-item">Help</a><a href="/blog" class="nav-bar-item">Blog</a><a href="http://code.famo.us/famous-starter-kit/famous-starter-kit.zip?source=top" class="nav-bar-item download">Download</a></div>',properties:{backgroundColor:"#313131",boxShadow:"0 0 5px black"}});this.add(t)}var n=t("famous/core/View"),r=t("famous/core/Surface");o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},i.exports=o}),define("famous/utilities/Timer",["require","exports","module","../core/Engine"],function(t,e,i){function o(t){return c.on(p,t),t}function s(t,e){var i=l(),s=function(){var o=l();o-i>=e&&(t.apply(this,arguments),c.removeListener(p,s))};return o(s)}function n(t,e){var i=l(),s=function(){var o=l();o-i>=e&&(t.apply(this,arguments),i=l())};return o(s)}function r(t,e){if(void 0===e)return void 0;var i=function(){e--,0>=e&&(t.apply(this,arguments),h(i))};return o(i)}function a(t,e){e=e||1;var i=e,s=function(){e--,0>=e&&(t.apply(this,arguments),e=i)};return o(s)}function h(t){c.removeListener(p,t)}function u(t,e){var i,o,n,r,a;return function(){o=this,a=arguments,n=l();var u=function(){var h=l-n;e>h?i=s(u,e-h):(i=null,r=t.apply(o,a))};return h(i),i=s(u,e),r}}var c=t("../core/Engine"),p="prerender",l=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};i.exports={setTimeout:s,setInterval:n,debounce:u,after:r,every:a,clear:h}}),define("famous/views/HeaderFooterLayout",["require","exports","module","../core/Entity","../core/RenderNode","../core/Transform","../core/OptionsManager"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this.setOptions(t),this._entityId=a.register(this),this.header=new h,this.footer=new h,this.content=new h}function s(t,e){var i=t.getSize();return i?i[this.options.direction]:e}function n(t){return this.options.direction===o.DIRECTION_X?u.translate(t,0,0):u.translate(0,t,0)}function r(t,e){return this.options.direction===o.DIRECTION_X?[t,e[1]]:[e[0],t]}var a=t("../core/Entity"),h=t("../core/RenderNode"),u=t("../core/Transform"),c=t("../core/OptionsManager");o.DIRECTION_X=0,o.DIRECTION_Y=1,o.DEFAULT_OPTIONS={direction:o.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},o.prototype.render=function(){return this._entityId},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},o.prototype.commit=function(t){var e=t.transform,i=t.origin,o=t.size,a=t.opacity,h=void 0!==this.options.headerSize?this.options.headerSize:s.call(this,this.header,this.options.defaultHeaderSize),c=void 0!==this.options.footerSize?this.options.footerSize:s.call(this,this.footer,this.options.defaultFooterSize),p=o[this.options.direction]-h-c;o&&(e=u.moveThen([-o[0]*i[0],-o[1]*i[1],0],e));var l=[{size:r.call(this,h,o),target:this.header.render()},{transform:n.call(this,h),size:r.call(this,p,o),target:this.content.render()},{transform:n.call(this,h+p),size:r.call(this,c,o),target:this.footer.render()}];return{transform:e,opacity:a,size:o,target:l}},i.exports=o}),define("views/PanelToggleButtons",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/core/Transform"],function(t,e,i){function o(){r.apply(this,arguments),this.size=0,this.state=this.options.initialState,s.call(this),n.call(this),this._eventInput.on("toggle",function(t){for(var e=0,i=0;i<this.state.length;i++)e+=this.state[i];1===e&&this.state[t]||(this.state[t]=this.state[t]?0:1,this._eventOutput.emit("setState",this.state))}.bind(this))}function s(){var t=new a({properties:this.options.header.style}),e=new h({transform:u.translate(0,0,-.1)});this.add(e).add(t)}function n(){for(var t=this.options.direction?[1,0]:[0,1],e=this.options.buttons,i=0;i<this.state.length;i++){var o=(e.spacing+e.size[this.options.direction])*i+e.spacing;this.options.direction||(o*=-1),this.size+=o;var s=new a({content:e.text?e.text[i]:null,size:e.size,classes:["button"],properties:{textAlign:"center",lineHeight:e.size[1]+"px",backgroundColor:"blue",cursor:"pointer"}});s.setProperties(e.style),s.index=i;var n=new h({size:e.size,opacity:function(t){return this.state[t]?1:this.options.offOpacity}.bind(this,i),align:t,origin:t,transform:this.options.direction?u.translate(0,o):u.translate(-o,-10)});s.on("click",function(){this.emit("toggle",this.index)}.bind(s)),this.add(n).add(s),this.subscribe(s)}this.size-=10,console.log()}var r=t("famous/core/View"),a=t("famous/core/Surface"),h=t("famous/core/Modifier"),u=t("famous/core/Transform");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={initialState:[1,1,1],direction:1,offOpacity:.3,buttons:void 0,header:void 0},o.prototype.getSize=function(){return this.size},i.exports=o}),define("views/TogglePaneLayout",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/views/HeaderFooterLayout","famous/views/FlexibleLayout","views/PanelToggleButtons"],function(t,e,i){function o(){r.apply(this,arguments),s.call(this),this.options.header.controls&&n.call(this),this._eventInput.on("setState",this.setState.bind(this))}function s(){var t=this.options.header.controls?this.options.header.size:0;this.headerFooter=new h({headerSize:t,direction:this.options.direction}),this.add(this.headerFooter);var e=this.calcRatios(this.options.initialState);this.layout=new u({direction:this.options.direction,ratios:e}),this.layout.setRatios(e,this.options.transition),this.headerFooter.content.add(this.layout)}function n(){this.controls=new c({direction:this.options.direction?0:1,initialState:this.options.initialState,header:this.options.header,buttons:this.options.buttons});var t=this.options.buttons,e=t.text.length*(t.size[0]+t.spacing)+t.spacing,i=new a({size:[e,t.size[1]],align:[1,1],origin:[1,1]});this.add(i).add(this.controls),this.subscribe(this.controls)}var r=t("famous/core/View"),a=(t("famous/core/Surface"),t("famous/core/Modifier")),h=t("famous/views/HeaderFooterLayout"),u=t("famous/views/FlexibleLayout"),c=t("views/PanelToggleButtons");
o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={header:{controls:!0,size:50,style:{},shadow:null},direction:1,initialState:[1,1,1],ratios:[1,1,1],transition:{duration:500,curve:"easeOut"},buttons:{size:[30,30],spacing:10,text:null,style:{}}},o.prototype.calcRatios=function(t){var e=[],i=t.ratios||this.options.ratios;t=t.state||t;for(var o=0;o<t.length;o++)e[o]=i[o]*t[o];return e},o.prototype.sequenceFrom=function(t){this.layout.sequenceFrom(t)},o.prototype.setState=function(t){var e=this.calcRatios(t);this.layout.setRatios(e,this.options.transition,function(){this._eventOutput.emit("resize")}.bind(this)),this.controls&&(this.controls.state=t),this._eventOutput.emit("updateState",t)},i.exports=o}),define("famous/surfaces/TextAreaSurface",["require","exports","module","../core/Surface"],function(t,e,i){function o(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._name=t.name||"",this._wrap=t.wrap||"",this._cols=t.cols||"",this._rows=t.rows||"",s.apply(this,arguments),this.on("click",this.focus.bind(this))}var s=t("../core/Surface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="textarea",o.prototype.elementClass="famous-surface",o.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},o.prototype.focus=function(){return this._currentTarget&&this._currentTarget.focus(),this},o.prototype.blur=function(){return this._currentTarget&&this._currentTarget.blur(),this},o.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},o.prototype.getValue=function(){return this._currentTarget?this._currentTarget.value:this._value},o.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},o.prototype.getName=function(){return this._name},o.prototype.setWrap=function(t){return this._wrap=t,this._contentDirty=!0,this},o.prototype.setColumns=function(t){return this._cols=t,this._contentDirty=!0,this},o.prototype.setRows=function(t){return this._rows=t,this._contentDirty=!0,this},o.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),""!==this._value&&(t.value=this._value),""!==this._name&&(t.name=this._name),""!==this._wrap&&(t.wrap=this._wrap),""!==this._cols&&(t.cols=this._cols),""!==this._rows&&(t.rows=this._rows)},i.exports=o}),define("famous/views/Lightbox",["require","exports","module","../core/Transform","../core/Modifier","../core/RenderNode","../utilities/Utility","../core/OptionsManager","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[],this.states=[]}var s=t("../core/Transform"),n=t("../core/Modifier"),r=t("../core/RenderNode"),a=t("../utilities/Utility"),h=t("../core/OptionsManager"),u=t("../transitions/Transitionable"),c=t("../transitions/TransitionableTransform");o.DEFAULT_OPTIONS={inTransform:s.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:s.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],showTransform:s.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},o.prototype.show=function(t,e,i){if(!t)return this.hide(i);if(e instanceof Function&&(i=e,e=void 0),this._showing){if(!this.options.overlap)return this.hide(this.show.bind(this,t,e,i));this.hide()}this._showing=!0;var o={transform:new c(this.options.inTransform),origin:new u(this.options.inOrigin),opacity:new u(this.options.inOpacity)},s=new n({transform:o.transform,opacity:o.opacity,origin:o.origin}),h=new r;h.add(s).add(t),this.nodes.push(h),this.states.push(o),this.transforms.push(s);var p=i?a.after(3,i):void 0;e||(e=this.options.inTransition),o.transform.set(this.options.showTransform,e,p),o.opacity.set(this.options.showOpacity,e,p),o.origin.set(this.options.showOrigin,e,p)},o.prototype.hide=function(t,e){if(this._showing){this._showing=!1,t instanceof Function&&(e=t,t=void 0);var i=this.nodes[this.nodes.length-1],o=this.transforms[this.transforms.length-1],s=this.states[this.states.length-1],n=a.after(3,function(){this.nodes.splice(this.nodes.indexOf(i),1),this.states.splice(this.states.indexOf(s),1),this.transforms.splice(this.transforms.indexOf(o),1),e&&e.call(this)}.bind(this));t||(t=this.options.outTransition),s.transform.set(this.options.outTransform,t,n),s.opacity.set(this.options.outOpacity,t,n),s.origin.set(this.options.outOrigin,t,n)}},o.prototype.render=function(){for(var t=[],e=0;e<this.nodes.length;e++)t.push(this.nodes[e].render());return t},i.exports=o}),define("famous/transitions/Easing",["require","exports","module"],function(t,e,i){var o={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,i=0,o=1;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/o),-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)))},outElastic:function(t){var e=1.70158,i=0,o=1;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/o),o*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/i)+1)},inOutElastic:function(t){var e=1.70158,i=0,o=1;return 0===t?0:2===(t/=.5)?1:(i||(i=.3*1.5),e=i/(2*Math.PI)*Math.asin(1/o),1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)},inBack:function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},outBack:function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0===e&&(e=1.70158),(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},inBounce:function(t){return 1-o.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*o.inBounce(2*t):.5*o.outBounce(2*t-1)+.5}};i.exports=o}),define("views/InstructionView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/surfaces/TextAreaSurface","famous/views/Lightbox","famous/transitions/Easing"],function(t,e,i){function o(){a.apply(this,arguments),this.showEdit=!1,s.call(this),n.call(this),r.call(this),this._eventInput.on("toggle",this.toggle.bind(this)),this.edit.on("keyup",function(){var t=this.edit.getValue();this._eventOutput.emit("update",t)}.bind(this))}function s(){this.lightbox=new l({inTransform:c.identity,outTransform:c.identity,inTransition:{duration:400,curve:"easeIn"},outTransition:{duration:400,curve:"easeOut"}});var t=new u({transform:c.translate(0,0,-.2),align:[.5,.5],origin:[0,0]});this.add(t).add(this.lightbox)}function n(){this.content=document.createElement("div"),this.content.style.maxWidth="700px",this.content.style.textAlign="left",this.content.style.margin="0 20px 20px",this.rendered=new h({content:this.content,properties:{overflow:"auto",backgroundColor:"#F0EEE9"}}),this.lightbox.show(this.rendered)}function r(){window.editor=this.edit=new p({properties:{padding:"20px",fontFamily:"Monaco",fontSize:"14px"}})}var a=t("famous/core/View"),h=t("famous/core/Surface"),u=t("famous/core/Modifier"),c=t("famous/core/Transform"),p=t("famous/surfaces/TextAreaSurface"),l=t("famous/views/Lightbox"),f=(t("famous/transitions/Easing"),new Showdown.converter);o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},o.prototype.setContent=function(t){this.edit.setValue(t),t=f.makeHtml(t),this.content.innerHTML=t},o.prototype.toggle=function(){this.showEdit?(this.setContent(this.edit.getValue()),this.lightbox.show(this.rendered)):this.lightbox.show(this.edit),this.showEdit=!this.showEdit},i.exports=o}),define("utils/AceSurface",["require","exports","module","famous/core/Surface","famous/core/OptionsManager","famous/utilities/Timer"],function(t,e,i){function o(t){if(n.apply(this,arguments),this.silent=!1,this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t)for(var e in t)this.options[e]=t[e];this.setContent('<div id="'+this.options.aceId+'"></div>'),this.on("deploy",s.bind(this))}function s(){this._editor=ace.edit(this.options.aceId),this._editor.setTheme(this.options.theme);var t=this.getSession();t.setTabSize(this.options.tabSize),t.setMode("ace/mode/"+this.options.mode),this.bindChangeEvent()}var n=t("famous/core/Surface"),r=(t("famous/core/OptionsManager"),t("famous/utilities/Timer"));o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={aceId:void 0,mode:void 0,tabSize:2,theme:"ace/theme/famous"},o.prototype.getValue=function(){return this._editor.getValue()},o.prototype.getSession=function(){return this._editor.getSession()},o.prototype.getEditor=function(){return this._editor},o.prototype.setAceContent=function(t){this._editor.setValue(t,-1)},o.prototype.bindChangeEvent=function(){var t=this.getValue();this.getSession().on("change",function(){r.setTimeout(function(){var e=this.getValue();t!==e&&(t=e,this.emit("update",{mode:this.options.mode,value:t}))}.bind(this),100)}.bind(this))},o.prototype.unbindChangeEvent=function(){this.getSession().off("change",this.emitChangeEvent)},i.exports=o}),define("views/EditorView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/core/Transform","utils/AceSurface"],function(t,e,i){function o(){r.apply(this,arguments),s.call(this),n.call(this),this.setCodeFlag=!1,this.ace.on("update",function(t){this.setCodeFlag||this._eventOutput.emit("update",t),this.setCodeFlag=!1}.bind(this))}function s(){var t=this.options.properties;this.options.showBorder&&(t.borderTop=this.options.borderTop),this.ace=new u({properties:t,aceId:"editor-"+this.options.mode,mode:this.options.mode}),this.add(this.ace)}function n(){var t=this.options.mode;"javascript"===t&&(t="js");var e=new a({size:[!0,!0],content:t,properties:{fontSize:"16px",paddingRight:"20px",textAlign:"right",color:"white",pointerEvents:"none"}}),i=new h({align:[1,0],origin:[1,0],opacity:.5});this.add(i).add(e)}var r=t("famous/core/View"),a=t("famous/core/Surface"),h=t("famous/core/Modifier"),u=(t("famous/core/Transform"),t("utils/AceSurface"));o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={mode:"javascript",properties:{backgroundColor:"#404040",padding:"20px 0 30px"},showShadow:!1,borderTop:"2px solid rgba(0, 0, 0, 0.1)"},o.prototype.setCode=function(t){this.ace.setAceContent(t),this.setCodeFlag=!0},o.prototype.resize=function(){this.ace.getEditor()&&this.ace.getEditor().resize()},i.exports=o}),define("views/EditorsView",["require","exports","module","famous/core/View","famous/core/Engine","famous/utilities/Timer","views/TogglePaneLayout","views/EditorView"],function(t,e,i){function o(){r.apply(this,arguments),this.editors=[],this.code={},s.call(this),n.call(this),this.layout.on("resize",this.resize.bind(this)),a.on("resize",h.debounce(this.resize.bind(this),300)),this.layout.on("updateState",function(t){for(var e=[],i=0;i<t.length;i++)t[i]&&e.push(this.options.modules[i]);this._eventOutput.emit("updateModules",e)}.bind(this)),this._eventInput.on("update",function(t){this.code[t.mode]=t.value,this._eventOutput.emit("update",this.code)}.bind(this))}function s(){this.layout=new u({direction:1,header:{controls:!0,size:0,style:{backgroundColor:"#404040"}},initialState:[1,0,0],ratios:[1,1,1],buttons:{size:[50,30],text:["js","html","css"],style:{color:"white",backgroundColor:"#616161"}}}),this.add(this.layout)}function n(){for(var t=0;t<this.options.modules.length;t++){var e=new c({mode:this.options.modules[t],showBorder:!!t});this.editors.push(e),this.subscribe(e)}this.layout.sequenceFrom(this.editors)}var r=t("famous/core/View"),a=t("famous/core/Engine"),h=t("famous/utilities/Timer"),u=t("views/TogglePaneLayout"),c=t("views/EditorView");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={modules:["javascript","html","css"]},o.prototype.setModules=function(t){for(var e=[],i=0;i<this.options.modules.length;i++){for(var o=0,s=0;s<t.length;s++)this.options.modules[i]===t[s]&&(o=1);e.push(o)}this.layout.setState(e)},o.prototype.getCode=function(){for(var t=0;t<this.editors.length;t++){var e=this.editors[t].getCode();results[e.mode]=e.code}return results},o.prototype.setCode=function(t){for(var e=0;e<this.editors.length;e++)this.editors[e].setCode(t[this.options.modules[e]]);for(var i in t)this.code[i]=t[i]},o.prototype.resize=function(){for(var t=0;t<this.editors.length;t++)this.editors[t].resize()},i.exports=o}),define("famous/events/EventArbiter",["require","exports","module","../core/EventHandler"],function(t,e,i){function o(t){this.dispatchers={},this.currMode=void 0,this.setMode(t)}var s=t("../core/EventHandler");o.prototype.setMode=function(t){if(t!==this.currMode){var e=this.currMode;this.dispatchers[this.currMode]&&this.dispatchers[this.currMode].trigger("unpipe"),this.currMode=t,this.dispatchers[t]&&this.dispatchers[t].emit("pipe"),this.emit("change",{from:e,to:t})}},o.prototype.forMode=function(t){return this.dispatchers[t]||(this.dispatchers[t]=new s),this.dispatchers[t]},o.prototype.emit=function(t,e){if(void 0===this.currMode)return!1;e||(e={});var i=this.dispatchers[this.currMode];return i?i.trigger(t,e):void 0},i.exports=o}),define("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,e,i){function o(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new s(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var s=t("./Context"),n=t("./Transform"),r=t("./Surface");o.SIZE_ZERO=[0,0],o.prototype=Object.create(r.prototype),o.prototype.elementType="div",o.prototype.elementClass="famous-group",o.prototype.add=function(){return this.context.add.apply(this.context,arguments)},o.prototype.render=function(){return r.prototype.render.call(this)},o.prototype.deploy=function(t){this.context.migrate(t)},o.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},o.prototype.commit=function(t){var e=t.transform,i=t.origin,s=t.opacity,a=t.size,h=r.prototype.commit.call(this,{allocator:t.allocator,transform:n.thenMove(e,[-i[0]*a[0],-i[1]*a[1],0]),opacity:s,origin:i,size:o.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:n.translate(-i[0]*a[0],-i[1]*a[1],0),origin:i,size:a}),h},i.exports=o}),define("famous/core/Scene",["require","exports","module","./Transform","./Modifier","./RenderNode"],function(t,e,i){function o(t){this.id=null,this._objects=null,this.node=new c,this._definition=null,t&&this.load(t)}function s(t){for(var e in p)if(e in t){var i=t[e];return i instanceof Array||(i=[i]),p[e].apply(this,i)}}function n(t){var e=t.transform,i=t.opacity,o=t.origin,n=t.align,r=t.size,a=h.identity;if(e instanceof Array)if(16===e.length&&"number"==typeof e[0])a=e;else for(var c=0;c<e.length;c++)a=h.multiply(a,s(e[c]));else e instanceof Function?a=e:e instanceof Object&&(a=s(e));var p=new u({transform:a,opacity:i,origin:o,align:n,size:r});return p}function r(t){for(var e=new c,i=0;i<t.length;i++){var o=a.call(this,t[i]);o&&e.add(o)}return e}function a(t){var e,i;if(t instanceof Array)e=r.call(this,t);else if(i=this._objects.length,t.render&&t.render instanceof Function)e=t;else if(t.target){var o=a.call(this,t.target),s=n.call(this,t);e=new c(s),e.add(o),t.id&&(this.id[t.id]=s)}else t.id&&(e=new c,this.id[t.id]=e);return this._objects[i]=e,e}var h=t("./Transform"),u=t("./Modifier"),c=t("./RenderNode"),p={translate:h.translate,rotate:h.rotate,rotateX:h.rotateX,rotateY:h.rotateY,rotateZ:h.rotateZ,rotateAxis:h.rotateAxis,scale:h.scale,skew:h.skew,matrix3d:function(){return arguments}};o.prototype.create=function(){return new o(this._definition)},o.prototype.load=function(t){this._definition=t,this.id={},this._objects=[],this.node.set(a.call(this,t))},o.prototype.add=function(){return this.node.add.apply(this.node,arguments)},o.prototype.render=function(){return this.node.render.apply(this.node,arguments)},i.exports=o}),define("famous/core/ViewSequence",["require","exports","module"],function(t,e,i){function o(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),void 0!==t.trackSize&&(this._.trackSize=t.trackSize),this._previousNode=null,this._nextNode=null}o.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null,this.cumulativeSizes=[[0,0]],this.sizeDirty=!0,this.trackSize=!1},o.Backing.prototype.getValue=function(t){var e=t-this.firstIndex;return 0>e||e>=this.array.length?null:this.array[e]},o.Backing.prototype.setValue=function(t,e){this.array[t-this.firstIndex]=e},o.Backing.prototype.getSize=function(t){return this.cumulativeSizes[t]},o.Backing.prototype.calculateSize=function(t){t=t||this.array.length;for(var e=[0,0],i=0;t>i;i++){var o=this.array[i].getSize();if(!o)return void 0;void 0!==e[0]&&(void 0===o[0]?e[0]=void 0:e[0]+=o[0]),void 0!==e[1]&&(void 0===o[1]?e[1]=void 0:e[1]+=o[1]),this.cumulativeSizes[i+1]=e.slice()}return this.sizeDirty=!1,e},o.Backing.prototype.reindex=function(t,e,i){if(this.array[0]){for(var o=0,s=this.firstIndex,n=i-e,r=this.firstNode;t-1>s;)r=r.getNext(),s++;var a=r;for(o=0;e>o;o++)r=r.getNext(),r&&(r._previousNode=a);var h=r?r.getNext():null;for(a._nextNode=null,r=a,o=0;i>o;o++)r=r.getNext();if(s+=i,r!==h&&(r._nextNode=h,h&&(h._previousNode=r)),h)for(r=h,s++;r&&s<this.array.length+this.firstIndex;)r._nextNode?r.index+=n:r.index=s,r=r.getNext(),s++;this._.trackSize&&(this._.sizeDirty=!0)}},o.prototype.getPrevious=function(){return this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+this._.array.length-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this),this._previousNode},o.prototype.getNext=function(){return this.index===this._.firstIndex+this._.array.length-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this),this._nextNode},o.prototype.getIndex=function(){return this.index},o.prototype.toString=function(){return""+this.index},o.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length,this._.trackSize&&(this._.sizeDirty=!0)},o.prototype.push=function(){this._.array.push.apply(this._.array,arguments),this._.trackSize&&(this._.sizeDirty=!0)},o.prototype.splice=function(t,e){var i=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,e].concat(i)),this._.reindex(t,e,i.length)},o.prototype.swap=function(t){var e=t.get(),i=this.get();this._.setValue(this.index,e),this._.setValue(t.index,i);var o=this._previousNode,s=this._nextNode,n=this.index,r=t._previousNode,a=t._nextNode,h=t.index;this.index=h,this._previousNode=r===this?t:r,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=n,t._previousNode=o===t?this:o,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=s===t?this:s,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t),this._.trackSize&&(this._.sizeDirty=!0)},o.prototype.get=function(){return this._.getValue(this.index)},o.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},o.prototype.render=function(){this._.trackSize&&this._.sizeDirty&&this._.calculateSize();var t=this.get();return t?t.render.apply(t,arguments):null},i.exports=o}),define("famous/math/Vector",["require","exports","module"],function(t,e,i){function o(t,e,i){return 1===arguments.length&&void 0!==t?this.set(t):(this.x=t||0,this.y=e||0,this.z=i||0),this}function s(t,e,i){return this.x=t,this.y=e,this.z=i,this}function n(t){return s.call(this,t[0],t[1],t[2]||0)}function r(t){return s.call(this,t.x,t.y,t.z)}function a(t){return s.call(this,t,0,0)}var h=new o(0,0,0);o.prototype.add=function(t){return s.call(h,this.x+t.x,this.y+t.y,this.z+t.z)},o.prototype.sub=function(t){return s.call(h,this.x-t.x,this.y-t.y,this.z-t.z)},o.prototype.mult=function(t){return s.call(h,t*this.x,t*this.y,t*this.z)},o.prototype.div=function(t){return this.mult(1/t)},o.prototype.cross=function(t){var e=this.x,i=this.y,o=this.z,n=t.x,r=t.y,a=t.z;return s.call(h,o*r-i*a,e*a-o*n,i*n-e*r)},o.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},o.prototype.rotateX=function(t){var e=this.x,i=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return s.call(h,e,i*n-o*r,i*r+o*n)},o.prototype.rotateY=function(t){var e=this.x,i=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return s.call(h,o*r+e*n,i,o*n-e*r)},o.prototype.rotateZ=function(t){var e=this.x,i=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return s.call(h,e*n-i*r,e*r+i*n,o)},o.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},o.prototype.normSquared=function(){return this.dot(this)},o.prototype.norm=function(){return Math.sqrt(this.normSquared())},o.prototype.normalize=function(t){0===arguments.length&&(t=1);var e=this.norm();return e>1e-7?r.call(h,this.mult(t/e)):s.call(h,t,0,0)},o.prototype.clone=function(){return new o(this)},o.prototype.isZero=function(){return!(this.x||this.y||this.z)},o.prototype.set=function(t){return t instanceof Array?n.call(this,t):"number"==typeof t?a.call(this,t):r.call(this,t)},o.prototype.setXYZ=function(){return s.apply(this,arguments)},o.prototype.set1D=function(t){return a.call(this,t)},o.prototype.put=function(t){this===h?r.call(t,h):r.call(t,this)},o.prototype.clear=function(){return s.call(this,0,0,0)},o.prototype.cap=function u(u){if(1/0===u)return r.call(h,this);var t=this.norm();return t>u?r.call(h,this.mult(u/t)):r.call(h,this)},o.prototype.project=function(t){return t.mult(this.dot(t))},o.prototype.reflectAcross=function(t){return t.normalize().put(t),r(h,this.sub(this.project(t).mult(2)))},o.prototype.get=function(){return[this.x,this.y,this.z]},o.prototype.get1D=function(){return this.x},i.exports=o}),define("famous/math/Matrix",["require","exports","module","./Vector"],function(t,e,i){function o(t){return this.values=t||[[1,0,0],[0,1,0],[0,0,1]],this}var s=t("./Vector"),n=new o,r=new s;o.prototype.get=function(){return this.values},o.prototype.set=function(t){this.values=t},o.prototype.vectorMultiply=function(t){var e=this.get(),i=t.x,o=t.y,s=t.z,n=e[0],a=e[1],h=e[2],u=n[0],c=n[1],p=n[2],l=a[0],f=a[1],d=a[2],m=h[0],y=h[1],g=h[2];return r.setXYZ(u*i+c*o+p*s,l*i+f*o+d*s,m*i+y*o+g*s)},o.prototype.multiply=function(t){for(var e=this.get(),i=[[]],o=0;3>o;o++){i[o]=[];for(var s=0;3>s;s++){for(var r=0,a=0;3>a;a++)r+=e[o][a]*t[a][s];i[o][s]=r}}return n.set(i)},o.prototype.transpose=function(){for(var t=[],e=this.get(),i=0;3>i;i++)for(var o=0;3>o;o++)t[i][o]=e[o][i];return n.set(t)},o.prototype.clone=function(){for(var t=this.get(),e=[],i=0;3>i;i++)e[i]=t[i].slice();return new o(e)},i.exports=o}),define("famous/math/Quaternion",["require","exports","module","./Matrix"],function(t,e,i){function o(t,e,i,o){return 1===arguments.length?this.set(t):(this.w=void 0!==t?t:1,this.x=void 0!==e?e:0,this.y=void 0!==i?i:0,this.z=void 0!==o?o:0),this}var s=t("./Matrix"),n=new o(1,0,0,0);o.prototype.add=function(t){return n.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)},o.prototype.sub=function(t){return n.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)},o.prototype.scalarDivide=function(t){return this.scalarMultiply(1/t)},o.prototype.scalarMultiply=function(t){return n.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)},o.prototype.multiply=function(t){var e=this.x,i=this.y,o=this.z,s=this.w,r=t.x,a=t.y,h=t.z,u=t.w||0;return n.setWXYZ(s*u-e*r-i*a-o*h,e*u+r*s+a*o-i*h,i*u+a*s+e*h-r*o,o*u+h*s+r*i-e*a)};var r=new o(1,0,0,0);o.prototype.rotateVector=function(t){return r.set(this.conj()),n.set(this.multiply(t).multiply(r))},o.prototype.inverse=function(){return n.set(this.conj().scalarDivide(this.normSquared()))},o.prototype.negate=function(){return this.scalarMultiply(-1)},o.prototype.conj=function(){return n.setWXYZ(this.w,-this.x,-this.y,-this.z)},o.prototype.normalize=function(t){return t=void 0===t?1:t,this.scalarDivide(t*this.norm())},o.prototype.makeFromAngleAndAxis=function(t,e){var i=e.normalize(),o=.5*t,s=-Math.sin(o);return this.x=s*i.x,this.y=s*i.y,this.z=s*i.z,this.w=Math.cos(o),this},o.prototype.setWXYZ=function(t,e,i,o){return n.clear(),this.w=t,this.x=e,this.y=i,this.z=o,this},o.prototype.set=function(t){return t instanceof Array?(this.w=0,this.x=t[0],this.y=t[1],this.z=t[2]):(this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z),this!==n&&n.clear(),this},o.prototype.put=function(t){t.set(n)},o.prototype.clone=function(){return new o(this)},o.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},o.prototype.isEqual=function(t){return t.w===this.w&&t.x===this.x&&t.y===this.y&&t.z===this.z},o.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},o.prototype.normSquared=function(){return this.dot(this)},o.prototype.norm=function(){return Math.sqrt(this.normSquared())},o.prototype.isZero=function(){return!(this.x||this.y||this.z)},o.prototype.getTransform=function(){var t=this.normalize(1),e=t.x,i=t.y,o=t.z,s=t.w;return[1-2*i*i-2*o*o,2*e*i-2*o*s,2*e*o+2*i*s,0,2*e*i+2*o*s,1-2*e*e-2*o*o,2*i*o-2*e*s,0,2*e*o-2*i*s,2*i*o+2*e*s,1-2*e*e-2*i*i,0,0,0,0,1]};var a=new s;o.prototype.getMatrix=function(){var t=this.normalize(1),e=t.x,i=t.y,o=t.z,s=t.w;return a.set([[1-2*i*i-2*o*o,2*e*i+2*o*s,2*e*o-2*i*s],[2*e*i-2*o*s,1-2*e*e-2*o*o,2*i*o+2*e*s],[2*e*o+2*i*s,2*i*o-2*e*s,1-2*e*e-2*i*i]])};var h=1e-5;o.prototype.slerp=function(t,e){var i,o,s,r,a;return o=this.dot(t),1-o>h?(i=Math.acos(o),s=Math.sin(i),r=Math.sin((1-e)*i)/s,a=Math.sin(e*i)/s):(r=1-e,a=e),n.set(this.scalarMultiply(r/a).add(t).multiply(a))},i.exports=o}),define("famous/math/Random",["require","exports","module"],function(t,e,i){function o(t,e){return t+n()*(e-t)}function s(t,e){return t+n()*(e-t+1)>>0}var n=Math.random,r={};r.integer=function(t,e,i){if(t=void 0!==t?t:0,e=void 0!==e?e:1,void 0!==i){for(var o=[],n=0;i>n;n++)o.push(s(t,e));return o}return s(t,e)},r.range=function(t,e,i){if(t=void 0!==t?t:0,e=void 0!==e?e:1,void 0!==i){for(var s=[],n=0;i>n;n++)s.push(o(t,e));return s}return o(t,e)},r.sign=function(t){return t=void 0!==t?t:.5,n()<t?1:-1},r.bool=function(t){return t=void 0!==t?t:.5,n()<t},i.exports=r}),define("famous/modifiers/StateModifier",["require","exports","module","../core/Modifier","../core/Transform","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,e,i){function o(t){this._transformState=new a(n.identity),this._opacityState=new r(1),this._originState=new r([0,0]),this._alignState=new r([0,0]),this._sizeState=new r([0,0]),this._proportionsState=new r([0,0]),this._modifier=new s({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null,proportions:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,this._hasProportions=!1,t&&(t.transform&&this.setTransform(t.transform),void 0!==t.opacity&&this.setOpacity(t.opacity),t.origin&&this.setOrigin(t.origin),t.align&&this.setAlign(t.align),t.size&&this.setSize(t.size),t.proportions&&this.setProportions(t.proportions))}var s=t("../core/Modifier"),n=t("../core/Transform"),r=t("../transitions/Transitionable"),a=t("../transitions/TransitionableTransform");o.prototype.setTransform=function(t,e,i){return this._transformState.set(t,e,i),this},o.prototype.setOpacity=function(t,e,i){return this._opacityState.set(t,e,i),this},o.prototype.setOrigin=function(t,e,i){return null===t?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(t,e,i),this)},o.prototype.setAlign=function(t,e,i){return null===t?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(t,e,i),this)},o.prototype.setSize=function(t,e,i){return null===t?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(t,e,i),this)},o.prototype.setProportions=function(t,e,i){return null===t?(this._hasProportions&&(this._modifier.proportionsFrom(null),this._hasProportions=!1),this):(this._hasProportions||(this._hasProportions=!0,this._modifier.proportionsFrom(this._proportionsState)),this._proportionsState.set(t,e,i),this)},o.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt(),this._proportionsState.halt()},o.prototype.getTransform=function(){return this._transformState.get()},o.prototype.getFinalTransform=function(){return this._transformState.getFinal()},o.prototype.getOpacity=function(){return this._opacityState.get()},o.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},o.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},o.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},o.prototype.getProportions=function(){return this._hasProportions?this._proportionsState.get():null},o.prototype.modify=function(t){return this._modifier.modify(t)},i.exports=o}),define("famous/math/Utilities",["require","exports","module"],function(t,e,i){var o={};o.clamp=function(t,e){return Math.max(Math.min(t,e[1]),e[0])},o.length=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]*t[i];return Math.sqrt(e)},i.exports=o}),define("famous/inputs/GenericSync",["require","exports","module","../core/EventHandler"],function(t,e,i){function o(t,e){this._eventInput=new n,this._eventOutput=new n,n.setInputHandler(this,this._eventInput),n.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),e&&this.setOptions(e)
}function s(t,e){r[t]&&(this._syncs[t]=new r[t](e),this.pipeSync(t))}var n=t("../core/EventHandler");o.DIRECTION_X=0,o.DIRECTION_Y=1,o.DIRECTION_Z=2;var r={};o.register=function(t){for(var e in t){if(r[e]){if(r[e]===t[e])return;throw new Error("this key is registered to a different sync class")}r[e]=t[e]}},o.prototype.setOptions=function(t){for(var e in this._syncs)this._syncs[e].setOptions(t)},o.prototype.pipeSync=function(t){var e=this._syncs[t];this._eventInput.pipe(e),e.pipe(this._eventOutput)},o.prototype.unpipeSync=function(t){var e=this._syncs[t];this._eventInput.unpipe(e),e.unpipe(this._eventOutput)},o.prototype.addSync=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)s.call(this,t[e]);else if(t instanceof Object)for(var i in t)s.call(this,i,t[i])},i.exports=o}),define("famous/inputs/MouseSync",["require","exports","module","../core/EventHandler","../core/OptionsManager"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),t&&this.setOptions(t),this._eventInput=new h,this._eventOutput=new h,h.setInputHandler(this,this._eventInput),h.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",s.bind(this)),this._eventInput.on("mousemove",n.bind(this)),this._eventInput.on("mouseup",r.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",a.bind(this)):this._eventInput.on("mouseleave",r.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._positionHistory=[],this._position=null,this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._moved=!1,this._documentActive=!1}function s(t){var e,i;this.options.preventDefault&&t.preventDefault();var o=t.clientX,s=t.clientY;this._prevCoord=[o,s],this._prevTime=Date.now(),this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,e=0,i=0):(this._position=[0,0],e=[0,0],i=[0,0]);var n=this._payload;n.delta=e,n.position=this._position,n.velocity=i,n.clientX=o,n.clientY=s,n.offsetX=t.offsetX,n.offsetY=t.offsetY,this._positionHistory.push({position:n.position.slice?n.position.slice(0):n.position,time:this._prevTime}),this._eventOutput.emit("start",n),this._documentActive=!1}function n(t){if(this._prevCoord){var e=this._prevCoord,i=(this._prevTime,t.clientX),s=t.clientY,n=Date.now(),r=i-e[0],a=s-e[1];this.options.rails&&(Math.abs(r)>Math.abs(a)?a=0:r=0);var h,u,p=Math.max(n-this._positionHistory[0].time,c),l=this.options.scale;this.options.direction===o.DIRECTION_X?(u=l*r,this._position+=u,h=l*(this._position-this._positionHistory[0].position)/p):this.options.direction===o.DIRECTION_Y?(u=l*a,this._position+=u,h=l*(this._position-this._positionHistory[0].position)/p):(u=[l*r,l*a],h=[l*(this._position[0]-this._positionHistory[0].position[0])/p,l*(this._position[0]-this._positionHistory[0].position[1])/p],this._position[0]+=u[0],this._position[1]+=u[1]);var f=this._payload;f.delta=u,f.position=this._position,f.velocity=h,f.clientX=i,f.clientY=s,f.offsetX=t.offsetX,f.offsetY=t.offsetY,this._positionHistory.length===this.options.velocitySampleLength&&this._positionHistory.shift(),this._positionHistory.push({position:f.position.slice?f.position.slice(0):f.position,time:n}),this._eventOutput.emit("update",f),this._prevCoord=[i,s],this._prevTime=n,this._move=!0}}function r(){this._down&&(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._move=!1,this._positionHistory=[])}function a(t){if(this._down&&this._move&&!this._documentActive){var e=n.bind(this),i=function(t){r.call(this,t),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i)}.bind(this,t);document.addEventListener("mousemove",e),document.addEventListener("mouseup",i),this._documentActive=!0}}var h=t("../core/EventHandler"),u=t("../core/OptionsManager");o.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1,propogate:!0,velocitySampleLength:10,preventDefault:!0},o.DIRECTION_X=0,o.DIRECTION_Y=1;var c=8;o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=o}),define("famous/inputs/TouchTracker",["require","exports","module","../core/EventHandler"],function(t,e,i){function o(t,e,i){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:e.origin,timestamp:c(),count:e.touches.length,history:i}}function s(t){if(!(t.touches.length>this.touchLimit)){this.isTouched=!0;for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=o(i,t,null);this.eventOutput.emit("trackstart",s),this.selective||this.touchHistory[i.identifier]||this.track(s)}}}function n(t){if(!(t.touches.length>this.touchLimit))for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=this.touchHistory[i.identifier];if(s){var n=o(i,t,s);this.touchHistory[i.identifier].push(n),this.eventOutput.emit("trackmove",n)}}}function r(t){if(this.isTouched){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=this.touchHistory[i.identifier];if(s){var n=o(i,t,s);this.eventOutput.emit("trackend",n),delete this.touchHistory[i.identifier]}}this.isTouched=!1}}function a(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}function h(t){this.selective=t.selective,this.touchLimit=t.touchLimit||1,this.touchHistory={},this.eventInput=new u,this.eventOutput=new u,u.setInputHandler(this,this.eventInput),u.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",s.bind(this)),this.eventInput.on("touchmove",n.bind(this)),this.eventInput.on("touchend",r.bind(this)),this.eventInput.on("touchcancel",r.bind(this)),this.eventInput.on("unpipe",a.bind(this)),this.isTouched=!1}var u=t("../core/EventHandler"),c=Date.now;h.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},i.exports=h}),define("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","../core/EventHandler","../core/OptionsManager"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),t&&this.setOptions(t),this._eventOutput=new h,this._touchTracker=new a({touchLimit:this.options.touchLimit}),h.setOutputHandler(this,this._eventOutput),h.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",s.bind(this)),this._touchTracker.on("trackmove",n.bind(this)),this._touchTracker.on("trackend",r.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function s(t){var e,i;void 0!==this.options.direction?(this._position=0,e=0,i=0):(this._position=[0,0],e=[0,0],i=[0,0]);var o=this._payload;o.delta=i,o.position=this._position,o.velocity=e,o.clientX=t.x,o.clientY=t.y,o.count=t.count,o.touch=t.identifier,this._eventOutput.emit("start",o)}function n(t){var e=t.history,i=e[e.length-1],s=e[e.length-2],n=e[e.length-this.options.velocitySampleLength]?e[e.length-this.options.velocitySampleLength]:e[e.length-2],r=n.timestamp,a=i.timestamp,h=i.x-s.x,u=i.y-s.y,p=i.x-n.x,l=i.y-n.y;this.options.rails&&(Math.abs(h)>Math.abs(u)?u=0:h=0,Math.abs(p)>Math.abs(l)?l=0:p=0);var f,d,m=Math.max(a-r,c),y=p/m,g=l/m,v=this.options.scale;this.options.direction===o.DIRECTION_X?(d=v*h,f=v*y,this._position+=d):this.options.direction===o.DIRECTION_Y?(d=v*u,f=v*g,this._position+=d):(d=[v*h,v*u],f=[v*y,v*g],this._position[0]+=d[0],this._position[1]+=d[1]);var _=this._payload;_.delta=d,_.velocity=f,_.position=this._position,_.clientX=t.x,_.clientY=t.y,_.count=t.count,_.touch=t.identifier,this._eventOutput.emit("update",_)}function r(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var a=t("./TouchTracker"),h=t("../core/EventHandler"),u=t("../core/OptionsManager");o.DEFAULT_OPTIONS={direction:void 0,rails:!1,touchLimit:1,velocitySampleLength:10,scale:1},o.DIRECTION_X=0,o.DIRECTION_Y=1;var c=8;o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},o.prototype.getOptions=function(){return this.options},i.exports=o}),define("famous/modifiers/Draggable",["require","exports","module","../core/Transform","../transitions/Transitionable","../core/EventHandler","../math/Utilities","../inputs/GenericSync","../inputs/MouseSync","../inputs/TouchSync"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._positionState=new c([0,0]),this._differential=[0,0],this._active=!0,this.sync=new f(["mouse","touch"],{scale:this.options.scale}),this.eventOutput=new p,p.setInputHandler(this,this.sync),p.setOutputHandler(this,this.eventOutput),h.call(this)}function s(t){var e=this.options,i=e.projection,o=e.snapX,s=e.snapY,n=i&y.x?t[0]:0,r=i&y.y?t[1]:0;return o>0&&(n-=n%o),s>0&&(r-=r%s),[n,r]}function n(){this._active&&(this._positionState.isActive()&&this._positionState.halt(),this.eventOutput.emit("start",{position:this.getPosition()}))}function r(t){if(this._active){var e=this.options;this._differential=t.position;var i=s.call(this,this._differential);this._differential[0]-=i[0],this._differential[1]-=i[1];var o=this.getPosition();if(o[0]+=i[0],o[1]+=i[1],e.xRange){var n=[e.xRange[0]+.5*e.snapX,e.xRange[1]-.5*e.snapX];o[0]=g(o[0],n)}if(e.yRange){var r=[e.yRange[0]+.5*e.snapY,e.yRange[1]-.5*e.snapY];o[1]=g(o[1],r)}this.eventOutput.emit("update",{position:o})}}function a(){this._active&&this.eventOutput.emit("end",{position:this.getPosition()})}function h(){this.sync.on("start",n.bind(this)),this.sync.on("update",r.bind(this)),this.sync.on("end",a.bind(this))}var u=t("../core/Transform"),c=t("../transitions/Transitionable"),p=t("../core/EventHandler"),l=t("../math/Utilities"),f=t("../inputs/GenericSync"),d=t("../inputs/MouseSync"),m=t("../inputs/TouchSync");f.register({mouse:d,touch:m});var y={x:1,y:2};o.DIRECTION_X=y.x,o.DIRECTION_Y=y.y;var g=l.clamp;o.DEFAULT_OPTIONS={projection:y.x|y.y,scale:1,xRange:null,yRange:null,snapX:0,snapY:0,transition:{duration:0}},o.prototype.setOptions=function(t){var e=this.options;if(void 0!==t.projection){var i=t.projection;this.options.projection=0,["x","y"].forEach(function(t){-1!==i.indexOf(t)&&(e.projection|=y[t])})}void 0!==t.scale&&(e.scale=t.scale,this.sync.setOptions({scale:t.scale})),void 0!==t.xRange&&(e.xRange=t.xRange),void 0!==t.yRange&&(e.yRange=t.yRange),void 0!==t.snapX&&(e.snapX=t.snapX),void 0!==t.snapY&&(e.snapY=t.snapY)},o.prototype.getPosition=function(){return this._positionState.get()},o.prototype.setRelativePosition=function(t,e,i){var o=this.getPosition(),s=[o[0]+t[0],o[1]+t[1]];this.setPosition(s,e,i)},o.prototype.setPosition=function(t,e,i){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(t,e,i)},o.prototype.activate=function(){this._active=!0},o.prototype.deactivate=function(){this._active=!1},o.prototype.toggle=function(){this._active=!this._active},o.prototype.modify=function(t){var e=this.getPosition();return{transform:u.translate(e[0],e[1]),target:t}},i.exports=o}),define("famous/modifiers/ModifierChain",["require","exports","module"],function(t,e,i){function o(){this._chain=[],arguments.length&&this.addModifier.apply(this,arguments)}o.prototype.addModifier=function(){Array.prototype.push.apply(this._chain,arguments)},o.prototype.removeModifier=function(t){var e=this._chain.indexOf(t);0>e||this._chain.splice(e,1)},o.prototype.modify=function(t){for(var e=this._chain,i=t,o=0;o<e.length;o++)i=e[o].modify(i);return i},i.exports=o}),define("famous/physics/PhysicsEngine",["require","exports","module","../core/EventHandler"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agentData={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=O(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1,this._eventHandler=null}function s(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function n(t,e,i){return void 0===e&&(e=this.getParticlesAndBodies()),e instanceof Array||(e=[e]),t.on("change",this.wake.bind(this)),this._agentData[this._currAgentId]={agent:t,id:this._currAgentId,targets:e,source:i},s.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return this._agentData[t]}function a(t){var e=r.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function h(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function u(t,e){var i=this._agentData[this._constraints[t]];return i.agent.applyConstraint(i.targets,i.source,e)}function c(t){for(var e=0;e<this.options.constraintSteps;){for(var i=this._constraints.length-1;i>-1;i--)u.call(this,i,t);e++}}function p(t,e){t.integrateVelocity(e),this.options.velocityCap&&t.velocity.cap(this.options.velocityCap).put(t.velocity)}function l(t,e){t.integrateAngularMomentum(e),t.updateAngularVelocity(),this.options.angularVelocityCap&&t.angularVelocity.cap(this.options.angularVelocityCap).put(t.angularVelocity)}function f(t,e){t.integrateOrientation(e)}function d(t,e){t.integratePosition(e),t.emit(T.update,t)}function m(t){h.call(this,t),this.forEach(p,t),this.forEachBody(l,t),c.call(this,t),this.forEachBody(f,t),this.forEach(d,t)}function y(){var t=0,e=0;return this.forEach(function(i){e=i.getEnergy(),t+=e}),t}function g(){var t=0;for(var e in this._agentData)t+=this.getAgentEnergy(e);return t}var v=t("../core/EventHandler"),_=17,w=1e3/120,S=17,O=Date.now,T={start:"start",update:"update",end:"end"};o.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7,velocityCap:void 0,angularVelocityCap:void 0},o.prototype.setOptions=function(t){for(var e in t)this.options[e]&&(this.options[e]=t[e])},o.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t.on("start",this.wake.bind(this)),t},o.prototype.removeBody=function(t){var e=t.isBody?this._bodies:this._particles,i=e.indexOf(t);if(i>-1){for(var o in this._agentData)this.detachFrom(o.id,t);e.splice(i,1)}0===this.getBodies().length&&(this._hasBodies=!1)},o.prototype.attach=function(t,e,i){if(this.wake(),t instanceof Array){for(var o=[],s=0;s<t.length;s++)o[s]=n.call(this,t[s],e,i);return o}return n.call(this,t,e,i)},o.prototype.attachTo=function(t,e){r.call(this,t).targets.push(e)},o.prototype.detach=function(t){var e=this.getAgent(t),i=s.call(this,e),o=i.indexOf(t);i.splice(o,1),delete this._agentData[t]},o.prototype.detachFrom=function(t,e){var i=r.call(this,t);if(i.source===e)this.detach(t);else{var o=i.targets,s=o.indexOf(e);s>-1&&o.splice(s,1)}},o.prototype.detachAll=function(){this._agentData={},this._forces=[],this._constraints=[],this._currAgentId=0},o.prototype.getAgent=function(t){return r.call(this,t).agent},o.prototype.getParticles=function(){return this._particles},o.prototype.getBodies=function(){return this._bodies},o.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},o.prototype.forEachParticle=function(t,e){for(var i=this.getParticles(),o=0,s=i.length;s>o;o++)t.call(this,i[o],e)},o.prototype.forEachBody=function(t,e){if(this._hasBodies)for(var i=this.getBodies(),o=0,s=i.length;s>o;o++)t.call(this,i[o],e)},o.prototype.forEach=function(t,e){this.forEachParticle(t,e),this.forEachBody(t,e)},o.prototype.getAgentEnergy=function(t){var e=r.call(this,t);return e.agent.getEnergy(e.targets,e.source)},o.prototype.getEnergy=function(){return y.call(this)+g.call(this)},o.prototype.step=function(){if(!this.isSleeping()){var t=O(),e=t-this._prevTime;this._prevTime=t,w>e||(e>S&&(e=S),m.call(this,_),this.emit(T.update,this),this.getEnergy()<this.options.sleepTolerance&&this.sleep())}},o.prototype.isSleeping=function(){return this._isSleeping},o.prototype.isActive=function(){return!this._isSleeping},o.prototype.sleep=function(){this._isSleeping||(this.forEach(function(t){t.sleep()}),this.emit(T.end,this),this._isSleeping=!0)},o.prototype.wake=function(){this._isSleeping&&(this._prevTime=O(),this.emit(T.start,this),this._isSleeping=!1)},o.prototype.emit=function(t,e){null!==this._eventHandler&&this._eventHandler.emit(t,e)},o.prototype.on=function(t,e){null===this._eventHandler&&(this._eventHandler=new v),this._eventHandler.on(t,e)},i.exports=o}),define("famous/physics/integrators/SymplecticEuler",["require","exports","module"],function(t,e,i){var o={};o.integrateVelocity=function(t,e){var i=t.velocity,o=t.inverseMass,s=t.force;s.isZero()||(i.add(s.mult(e*o)).put(i),s.clear())},o.integratePosition=function(t,e){var i=t.position,o=t.velocity;i.add(o.mult(e)).put(i)},o.integrateAngularMomentum=function(t,e){var i=t.angularMomentum,o=t.torque;o.isZero()||(i.add(o.mult(e)).put(i),o.clear())},o.integrateOrientation=function(t,e){var i=t.orientation,o=t.angularVelocity;o.isZero()||i.add(i.multiply(o).scalarMultiply(.5*e)).put(i)},i.exports=o}),define("famous/physics/bodies/Particle",["require","exports","module","../../math/Vector","../../core/Transform","../../core/EventHandler","../integrators/SymplecticEuler"],function(t,e,i){function o(t){t=t||{};var e=o.DEFAULT_OPTIONS;this.position=new n,this.velocity=new n,this.force=new n,this._engine=null,this._isSleeping=!0,this._eventOutput=null,this.mass=void 0!==t.mass?t.mass:e.mass,this.inverseMass=1/this.mass,this.setPosition(t.position||e.position),this.setVelocity(t.velocity||e.velocity),this.force.set(t.force||[0,0,0]),this.transform=r.identity.slice(),this._spec={size:[!0,!0],target:{transform:this.transform,origin:[.5,.5],target:null}}}function s(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var n=t("../../math/Vector"),r=t("../../core/Transform"),a=t("../../core/EventHandler"),h=t("../integrators/SymplecticEuler");o.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1};var u={start:"start",update:"update",end:"end"},c=Date.now;o.prototype.isBody=!1,o.prototype.isActive=function(){return!this._isSleeping},o.prototype.sleep=function(){this._isSleeping||(this.emit(u.end,this),this._isSleeping=!0)},o.prototype.wake=function(){this._isSleeping&&(this.emit(u.start,this),this._isSleeping=!1,this._prevTime=c(),this._engine&&this._engine.wake())},o.prototype.setPosition=function(t){this.position.set(t)},o.prototype.setPosition1D=function(t){this.position.x=t},o.prototype.getPosition=function(){return this._engine.step(),this.position.get()},o.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},o.prototype.setVelocity=function(t){this.velocity.set(t),(0!==t[0]||0!==t[1]||0!==t[2])&&this.wake()},o.prototype.setVelocity1D=function(t){this.velocity.x=t,0!==t&&this.wake()},o.prototype.getVelocity=function(){return this.velocity.get()},o.prototype.setForce=function(t){this.force.set(t),this.wake()},o.prototype.getVelocity1D=function(){return this.velocity.x},o.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},o.prototype.getMass=function(){return this.mass},o.prototype.reset=function(t,e){this.setPosition(t||[0,0,0]),this.setVelocity(e||[0,0,0])},o.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},o.prototype.applyImpulse=function(t){if(!t.isZero()){var e=this.velocity;e.add(t.mult(this.inverseMass)).put(e)}},o.prototype.integrateVelocity=function(t){h.integrateVelocity(this,t)},o.prototype.integratePosition=function(t){h.integratePosition(this,t)},o.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},o.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},o.prototype.getTransform=function(){this._engine.step();var t=this.position,e=this.transform;return e[12]=t.x,e[13]=t.y,e[14]=t.z,e},o.prototype.modify=function(t){var e=this._spec.target;return e.transform=this.getTransform(),e.target=t,this._spec},o.prototype.emit=function(t,e){this._eventOutput&&this._eventOutput.emit(t,e)},o.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},o.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},o.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},o.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=o}),define("famous/physics/bodies/Body",["require","exports","module","./Particle","../../core/Transform","../../math/Vector","../../math/Quaternion","../../math/Matrix","../integrators/SymplecticEuler"],function(t,e,i){function o(t){s.call(this,t),t=t||{},this.orientation=new a,this.angularVelocity=new r,this.angularMomentum=new r,this.torque=new r,t.orientation&&this.orientation.set(t.orientation),t.angularVelocity&&this.angularVelocity.set(t.angularVelocity),t.angularMomentum&&this.angularMomentum.set(t.angularMomentum),t.torque&&this.torque.set(t.torque),this.angularVelocity.w=0,this.setMomentsOfInertia(),this.pWorld=new r}var s=t("./Particle"),n=t("../../core/Transform"),r=t("../../math/Vector"),a=t("../../math/Quaternion"),h=t("../../math/Matrix"),u=t("../integrators/SymplecticEuler");o.DEFAULT_OPTIONS=s.DEFAULT_OPTIONS,o.DEFAULT_OPTIONS.orientation=[0,0,0,1],o.DEFAULT_OPTIONS.angularVelocity=[0,0,0],o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.isBody=!0,o.prototype.setMass=function(){s.prototype.setMass.apply(this,arguments),this.setMomentsOfInertia()},o.prototype.setMomentsOfInertia=function(){this.inertia=new h,this.inverseInertia=new h},o.prototype.updateAngularVelocity=function(){this.angularVelocity.set(this.inverseInertia.vectorMultiply(this.angularMomentum))},o.prototype.toWorldCoordinates=function(t){return this.pWorld.set(this.orientation.rotateVector(t))},o.prototype.getEnergy=function(){return s.prototype.getEnergy.call(this)+.5*this.inertia.vectorMultiply(this.angularVelocity).dot(this.angularVelocity)},o.prototype.reset=function(t,e,i,o){s.prototype.reset.call(this,t,e),this.angularVelocity.clear(),this.setOrientation(i||[1,0,0,0]),this.setAngularMomentum(o||[0,0,0])},o.prototype.setOrientation=function(t){this.orientation.set(t)},o.prototype.setAngularVelocity=function(t){this.wake(),this.angularVelocity.set(t)},o.prototype.setAngularMomentum=function(t){this.wake(),this.angularMomentum.set(t)},o.prototype.applyForce=function(t,e){s.prototype.applyForce.call(this,t),void 0!==e&&this.applyTorque(e.cross(t))},o.prototype.applyTorque=function(t){this.wake(),this.torque.set(this.torque.add(t))},o.prototype.getTransform=function(){return n.thenMove(this.orientation.getTransform(),n.getTranslate(s.prototype.getTransform.call(this)))},o.prototype._integrate=function(t){s.prototype._integrate.call(this,t),this.integrateAngularMomentum(t),this.updateAngularVelocity(t),this.integrateOrientation(t)},o.prototype.integrateAngularMomentum=function(t){u.integrateAngularMomentum(this,t)},o.prototype.integrateOrientation=function(t){u.integrateOrientation(this,t)},i.exports=o}),define("famous/physics/bodies/Circle",["require","exports","module","./Body","../../math/Matrix"],function(t,e,i){function o(t){t=t||{},this.setRadius(t.radius||0),s.call(this,t)}var s=t("./Body"),n=t("../../math/Matrix");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.setRadius=function(t){this.radius=t,this.size=[2*this.radius,2*this.radius],this.setMomentsOfInertia()},o.prototype.setMomentsOfInertia=function(){var t=this.mass,e=this.radius;this.inertia=new n([[.25*t*e*e,0,0],[0,.25*t*e*e,0],[0,0,.5*t*e*e]]),this.inverseInertia=new n([[4/(t*e*e),0,0],[0,4/(t*e*e),0],[0,0,2/(t*e*e)]])},i.exports=o}),define("famous/physics/bodies/Rectangle",["require","exports","module","./Body","../../math/Matrix"],function(t,e,i){function o(t){t=t||{},this.size=t.size||[0,0],s.call(this,t)}var s=t("./Body"),n=t("../../math/Matrix");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.setSize=function(t){this.size=t,this.setMomentsOfInertia()},o.prototype.setMomentsOfInertia=function(){var t=this.mass,e=this.size[0],i=this.size[1];this.inertia=new n([[t*i*i/12,0,0],[0,t*e*e/12,0],[0,0,t*(e*e+i*i)/12]]),this.inverseInertia=new n([[12/(t*i*i),0,0],[0,12/(t*e*e),0],[0,0,12/(t*(e*e+i*i))]])},i.exports=o}),define("famous/physics/constraints/Constraint",["require","exports","module","../../core/EventHandler"],function(t,e,i){function o(){this.options=this.options||{},this._eventOutput=new s,s.setOutputHandler(this,this._eventOutput)}var s=t("../../core/EventHandler");o.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},o.prototype.applyConstraint=function(){},o.prototype.getEnergy=function(){return 0},i.exports=o}),define("famous/physics/constraints/Collision",["require","exports","module","./Constraint","../../math/Vector"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this.normal=new n,this.pDiff=new n,this.vDiff=new n,this.impulse1=new n,this.impulse2=new n,s.call(this)}var s=t("./Constraint"),n=t("../../math/Vector");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0},o.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},o.prototype.applyConstraint=function(t,e,i){if(void 0!==e)for(var o=e.velocity,s=e.position,n=e.inverseMass,r=e.radius,a=this.options,h=a.drift,u=-a.slop,c=a.restitution,p=this.normal,l=this.pDiff,f=this.vDiff,d=this.impulse1,m=this.impulse2,y=0;y<t.length;y++){var g=t[y];if(g!==e){var v=g.velocity,_=g.position,w=g.inverseMass,S=g.radius;l.set(_.sub(s)),f.set(v.sub(o));var O=l.norm(),T=O-(r+S),b=1/(n+w),x=0;if(0>T){if(p.set(l.normalize()),this._eventOutput){var M={target:g,source:e,overlap:T,normal:p};this._eventOutput.emit("preCollision",M),this._eventOutput.emit("collision",M)}var E=u>=T?((1+c)*p.dot(f)+h/i*(T-u))/(x+i/b):(1+c)*p.dot(f)/(x+i/b);p.mult(i*E).put(d),d.mult(-1).put(m),e.applyImpulse(d),g.applyImpulse(m),this._eventOutput&&this._eventOutput.emit("postCollision",M)}}}},i.exports=o}),define("famous/physics/constraints/Curve",["require","exports","module","./Constraint","../../math/Vector"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this.J=new n,this.impulse=new n,s.call(this)}var s=t("./Constraint"),n=t("../../math/Vector");o.prototype=Object.create(s.prototype),o.prototype.constructor=o;var r=1e-7,a=Math.PI;o.DEFAULT_OPTIONS={equation:function(){return 0},plane:function(t,e,i){return i},period:0,dampingRatio:0},o.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},o.prototype.applyConstraint=function(t,e,i){for(var o=this.options,s=this.impulse,n=this.J,h=o.equation,u=o.plane,c=o.dampingRatio,p=o.period,l=0;l<t.length;l++){var f,d,m=t[l],y=m.velocity,g=m.position,v=m.mass;if(0===p)f=0,d=1;else{var _=4*v*a*c/p,w=4*v*a*a/(p*p);f=1/(_+i*w),d=i*w/(_+i*w)}var S=g.x,O=g.y,T=g.z,b=h(S,O,T),x=(h(S+r,g,g)-b)/r,M=(h(S,O+r,g)-b)/r,E=(h(S,O,g+r)-b)/r,z=u(S,O,T),I=(u(S+r,O,T)-z)/r,C=(u(S,O+r,T)-z)/r,P=(u(S,O,T+r)-z)/r;n.setXYZ(x+I,M+C,E+P);var N=d/i*(b+z),F=-(n.dot(y)+N)/(f+i*n.normSquared()/v);s.set(n.mult(i*F)),m.applyImpulse(s)}},i.exports=o}),define("famous/physics/constraints/Distance",["require","exports","module","./Constraint","../../math/Vector"],function(t,e,i){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.impulse=new n,this.normal=new n,this.diffP=new n,this.diffV=new n,s.call(this)}var s=t("./Constraint"),n=t("../../math/Vector");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={anchor:null,length:0,minLength:0,period:0,dampingRatio:0};var r=Math.PI;o.prototype.setOptions=function(t){t.anchor&&(t.anchor.position instanceof n&&(this.options.anchor=t.anchor.position),t.anchor instanceof n&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new n(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period),void 0!==t.minLength&&(this.options.minLength=t.minLength)},o.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new n),this.options.anchor.set(t)},o.prototype.applyConstraint=function(t,e,i){var o,s,n=this.normal,a=this.diffP,h=this.diffV,u=this.impulse,c=this.options,p=c.dampingRatio,l=c.period,f=c.minLength;if(e){var d=e.velocity;o=e.position,s=e.inverseMass}else o=this.options.anchor,s=0;for(var m=this.options.length,y=0;y<t.length;y++){var g=t[y],v=g.velocity,_=g.position,w=g.inverseMass;a.set(_.sub(o)),n.set(a.normalize());var S=a.norm()-m;if(Math.abs(S)<f)return;h.set(e?v.sub(d):v);var O,T,b=1/(w+s);if(0===l)O=0,T=1;else{var x=4*b*r*p/l,M=4*b*r*r/(l*l);O=1/(x+i*M),T=i*M/(x+i*M)}var E=T/i*S,z=-(n.dot(h)+E)/(O+i/b);u.set(n.mult(i*z)),g.applyImpulse(u),e&&e.applyImpulse(u.mult(-1))}},i.exports=o}),define("famous/physics/constraints/Wall",["require","exports","module","./Constraint","../../math/Vector"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this.diff=new u,this.impulse=new u,h.call(this)}function s(t,e){return e.dot(t)}function n(t){var e=this.options.normal,i=this.options.distance;return t.dot(e)+i}function r(t,e,i){var s=t.position,n=t.velocity,r=t.mass,a=this.options.normal,h=this.options.onContact,u=this.options.restitution,c=this.impulse,p=this.options.drift,l=-this.options.slop,f=0;if(this._eventOutput){var d={particle:t,wall:this,overlap:e,normal:a};this._eventOutput.emit("preCollision",d),this._eventOutput.emit("collision",d)}switch(h){case o.ON_CONTACT.REFLECT:var m=l>e?-((1+u)*a.dot(n)+p/i*(e-l))/(r*i+f):-((1+u)*a.dot(n))/(r*i+f);c.set(a.mult(i*m)),t.applyImpulse(c),t.setPosition(s.add(a.mult(-e)))}this._eventOutput&&this._eventOutput.emit("postCollision",d)}function a(t,e){var i=this.options.onContact,s=t.position,n=this.options.normal;i===o.ON_CONTACT.REFLECT&&t.setPosition(s.add(n.mult(-e)))}var h=t("./Constraint"),u=t("../../math/Vector");o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.ON_CONTACT={REFLECT:0,SILENT:1},o.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0,normal:[1,0,0],distance:0,onContact:o.ON_CONTACT.REFLECT},o.prototype.setOptions=function(t){void 0!==t.normal&&(t.normal instanceof u&&(this.options.normal=t.normal.clone()),t.normal instanceof Array&&(this.options.normal=new u(t.normal))),void 0!==t.restitution&&(this.options.restitution=t.restitution),void 0!==t.drift&&(this.options.drift=t.drift),void 0!==t.slop&&(this.options.slop=t.slop),void 0!==t.distance&&(this.options.distance=t.distance),void 0!==t.onContact&&(this.options.onContact=t.onContact)},o.prototype.applyConstraint=function(t,e,i){for(var o=this.options.normal,h=0;h<t.length;h++){var u=t[h],c=u.position,p=u.velocity,l=u.radius||0,f=n.call(this,c.add(o.mult(-l))),d=s.call(this,o,p);0>=f&&(0>d?r.call(this,u,f,i):a.call(this,u,f,i))}},i.exports=o}),define("famous/physics/constraints/Walls",["require","exports","module","./Constraint","./Wall","../../math/Vector"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),n.call(this,t.sides||this.options.sides),a.call(this)}function s(t,e,i){var s,n=o.SIDES;switch(parseInt(t)){case n.LEFT:s=e[0]*i[0];break;case n.TOP:s=e[1]*i[1];break;case n.FRONT:s=e[2]*i[2];break;case n.RIGHT:s=e[0]*(1-i[0]);break;case n.BOTTOM:s=e[1]*(1-i[1]);break;case n.BACK:s=e[2]*(1-i[2])}return s}function n(t){this.components={};for(var e=this.components,i=0;i<t.length;i++){var o=t[i];e[i]=new h({normal:c[o].clone(),distance:s(o,this.options.size,this.options.origin)})}}function r(t){this.forEach(function(e){e.setOptions(t)});for(var e in t)this.options[e]=t[e]}var a=t("./Constraint"),h=t("./Wall"),u=t("../../math/Vector");o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.ON_CONTACT=h.ON_CONTACT,o.SIDES={LEFT:0,RIGHT:1,TOP:2,BOTTOM:3,FRONT:4,BACK:5,TWO_DIMENSIONAL:[0,1,2,3],THREE_DIMENSIONAL:[0,1,2,3,4,5]},o.DEFAULT_OPTIONS={sides:o.SIDES.TWO_DIMENSIONAL,size:[window.innerWidth,window.innerHeight,0],origin:[.5,.5,.5],drift:.5,slop:0,restitution:.5,onContact:o.ON_CONTACT.REFLECT};
var c={0:new u(1,0,0),1:new u(-1,0,0),2:new u(0,1,0),3:new u(0,-1,0),4:new u(0,0,1),5:new u(0,0,-1)};o.prototype.setOptions=function(t){var e=!1;void 0!==t.restitution&&r.call(this,{restitution:t.restitution}),void 0!==t.drift&&r.call(this,{drift:t.drift}),void 0!==t.slop&&r.call(this,{slop:t.slop}),void 0!==t.onContact&&r.call(this,{onContact:t.onContact}),void 0!==t.size&&(e=!0),void 0!==t.sides&&(this.options.sides=t.sides),void 0!==t.origin&&(e=!0),e&&this.setSize(t.size,t.origin)},o.prototype.setSize=function(t,e){e=e||this.options.origin,e.length<3&&(e[2]=.5),this.forEach(function(i,o){var n=s(o,t,e);i.setOptions({distance:n})}),this.options.size=t,this.options.origin=e},o.prototype.applyConstraint=function(t,e,i){this.forEach(function(o){o.applyConstraint(t,e,i)})},o.prototype.forEach=function(t){var e=this.options.sides;for(var i in this.sides)t(e[i],i)},o.prototype.rotateZ=function(t){this.forEach(function(e){var i=e.options.normal;i.rotateZ(t).put(i)})},o.prototype.rotateX=function(t){this.forEach(function(e){var i=e.options.normal;i.rotateX(t).put(i)})},o.prototype.rotateY=function(t){this.forEach(function(e){var i=e.options.normal;i.rotateY(t).put(i)})},i.exports=o}),define("famous/physics/forces/Force",["require","exports","module","../../math/Vector","../../core/EventHandler"],function(t,e,i){function o(t){this.force=new s(t),this._eventOutput=new n,n.setOutputHandler(this,this._eventOutput)}var s=t("../../math/Vector"),n=t("../../core/EventHandler");o.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},o.prototype.applyForce=function(t){t.applyForce(this.force)},o.prototype.getEnergy=function(){return 0},i.exports=o}),define("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,e,i){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),s.call(this)}var s=t("./Force");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},o.DEFAULT_OPTIONS={strength:.01,forceFunction:o.FORCE_FUNCTIONS.LINEAR},o.prototype.applyForce=function(t){for(var e=this.options.strength,i=this.options.forceFunction,o=this.force,s=0;s<t.length;s++){var n=t[s];i(n.velocity).mult(-e).put(o),n.applyForce(o)}},o.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},i.exports=o}),define("famous/physics/forces/Repulsion",["require","exports","module","./Force","../../math/Vector"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new n,s.call(this)}var s=t("./Force"),n=t("../../math/Vector");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DECAY_FUNCTIONS={LINEAR:function(t,e){return Math.max(1-1/e*t,0)},MORSE:function(t,e){var i=0===e?100:e,o=t+i*(1-Math.log(2));return Math.max(1-Math.pow(1-Math.exp(o/i-1),2),0)},INVERSE:function(t,e){return 1/(1-e+t)},GRAVITY:function(t,e){return 1/(1-e+t*t)}},o.DEFAULT_OPTIONS={strength:1,anchor:void 0,range:[0,1/0],cutoff:0,cap:1/0,decayFunction:o.DECAY_FUNCTIONS.GRAVITY},o.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof n&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new n(t.anchor)),delete t.anchor);for(var e in t)this.options[e]=t[e]},o.prototype.applyForce=function(t,e){var i=this.options,o=this.force,s=this.disp,n=i.strength,r=i.anchor||e.position,a=i.cap,h=i.cutoff,u=i.range[0],c=i.range[1],p=i.decayFunction;if(0!==n)for(var l in t){var f=t[l];if(f!==e){var d=f.mass,m=f.position;s.set(m.sub(r));var y=s.norm();c>y&&y>u&&(o.set(s.normalize(n*d*p(y,h)).cap(a)),f.applyForce(o))}}},i.exports=o}),define("famous/physics/forces/Spring",["require","exports","module","./Force","../../math/Vector"],function(t,e,i){function o(t){a.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new h(0,0,0),r.call(this)}function s(){var t=this.options;t.stiffness=Math.pow(2*u/t.period,2)}function n(){var t=this.options;t.damping=4*u*t.dampingRatio/t.period}function r(){s.call(this),n.call(this)}var a=t("./Force"),h=t("../../math/Vector");o.prototype=Object.create(a.prototype),o.prototype.constructor=o;var u=Math.PI,c=150;o.FORCE_FUNCTIONS={FENE:function(t,e){var i=.99*e,o=Math.max(Math.min(t,i),-i);return o/(1-o*o/(e*e))},HOOK:function(t){return t}},o.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:o.FORCE_FUNCTIONS.HOOK},o.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof h&&(this.options.anchor=t.anchor.position),t.anchor instanceof h&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new h(t.anchor))),void 0!==t.period&&(t.period<c&&(t.period=c,console.warn("The period of a SpringTransition is capped at "+c+" ms. Use a SnapTransition for faster transitions")),this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),r.call(this),a.prototype.setOptions.call(this,t)},o.prototype.applyForce=function(t,e){for(var i=this.force,o=this.disp,s=this.options,n=s.stiffness,r=s.damping,a=s.length,h=s.maxLength,u=s.anchor||e.position,c=s.forceFunction,p=0;p<t.length;p++){var l=t[p],f=l.position,d=l.velocity;u.sub(f).put(o);var m=o.norm()-a;if(0===m)return;var y=l.mass;n*=y,r*=y,o.normalize(n*c(m,h)).put(i),r&&(e?i.add(d.sub(e.velocity).mult(-r)).put(i):i.add(d.mult(-r)).put(i)),l.applyForce(i),e&&e.applyForce(i.mult(-1))}},o.prototype.getEnergy=function(t,e){for(var i=this.options,o=i.length,s=e?e.position:i.anchor,n=i.stiffness,r=0,a=0;a<t.length;a++){var h=t[a],u=s.sub(h.position).norm()-o;r+=.5*n*u*u}return r},i.exports=o}),define("famous/physics/forces/RotationalSpring",["require","exports","module","./Force","./Spring","../../math/Quaternion"],function(t,e,i){function o(t){h.call(this,t)}function s(){var t=this.options;t.stiffness=Math.pow(2*c/t.period,2)}function n(){var t=this.options;t.damping=4*c*t.dampingRatio/t.period}function r(){s.call(this),n.call(this)}var a=t("./Force"),h=t("./Spring"),u=t("../../math/Quaternion");o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS=h.DEFAULT_OPTIONS,o.FORCE_FUNCTIONS=h.FORCE_FUNCTIONS;var c=Math.PI;o.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor instanceof u&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new u(t.anchor))),void 0!==t.period&&(this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),r.call(this),a.prototype.setOptions.call(this,t)},o.prototype.applyForce=function(t){for(var e=this.force,i=this.options,o=this.disp,s=i.stiffness,n=i.damping,r=i.length,a=i.anchor,h=i.forceFunction,u=i.maxLength,c=0;c<t.length;c++){var p=t[c];o.set(a.sub(p.orientation));var l=o.norm()-r;if(0===l)return;var f=p.mass;s*=f,n*=f,e.set(o.normalize(s*h(l,u))),n&&e.add(p.angularVelocity.mult(-n)).put(e),p.applyTorque(e)}},o.prototype.getEnergy=function(t){for(var e=this.options,i=e.length,o=e.anchor,s=e.stiffness,n=0,r=0;r<t.length;r++){var a=t[r],h=o.sub(a.orientation).norm()-i;n+=.5*s*h*h}return n},i.exports=o}),define("famous/physics/forces/VectorField",["require","exports","module","./Force","../../math/Vector"],function(t,e,i){function o(t){n.call(this),this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this.evaluation=new r}function s(t){var e=o.FIELDS;switch(t){case e.CONSTANT:this.options.direction?this.options.direction instanceof Array&&(this.options.direction=new r(this.options.direction)):this.options.direction=new r(0,1,0);break;case e.POINT_ATTRACTOR:this.options.position?this.options.position instanceof Array&&(this.options.position=new r(this.options.position)):this.options.position=new r(0,0,0)}}var n=t("./Force"),r=t("../../math/Vector");o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.FIELDS={CONSTANT:function(t,e){e.direction.put(this.evaluation)},LINEAR:function(t){t.put(this.evaluation)},RADIAL:function(t){t.mult(-1).put(this.evaluation)},POINT_ATTRACTOR:function(t,e){e.position.sub(t).put(this.evaluation)}},o.DEFAULT_OPTIONS={strength:.01,field:o.FIELDS.CONSTANT},o.prototype.setOptions=function(t){void 0!==t.strength&&(this.options.strength=t.strength),void 0!==t.field&&(this.options.field=t.field,s.call(this,this.options.field))},o.prototype.applyForce=function(t){for(var e=this.force,i=this.options.strength,o=this.options.field,s=0;s<t.length;s++){var n=t[s];o.call(this,n.position,this.options),this.evaluation.mult(n.mass*i).put(e),n.applyForce(e)}},o.prototype.getEnergy=function(t){var e,i,s=this.options.field,n=o.FIELDS,r=0;switch(s){case n.CONSTANT:r=t.length*this.options.direction.norm();break;case n.RADIAL:for(e=0;e<t.length;e++)i=t[e],r+=i.position.norm();break;case n.POINT_ATTRACTOR:for(e=0;e<t.length;e++)i=t[e],r+=i.position.sub(this.options.position).norm()}return r*=this.options.strength},i.exports=o}),define("famous/surfaces/CanvasSurface",["require","exports","module","../core/Surface"],function(t,e,i){function o(t){t&&t.canvasSize&&(this._canvasSize=t.canvasSize),s.apply(this,arguments),this._canvasSize||(this._canvasSize=this.getSize()),this._backBuffer=document.createElement("canvas"),this._canvasSize&&(this._backBuffer.width=this._canvasSize[0],this._backBuffer.height=this._canvasSize[1]),this._contextId=void 0}var s=t("../core/Surface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="canvas",o.prototype.elementClass="famous-surface",o.prototype.setContent=function(){},o.prototype.deploy=function(t){this._canvasSize&&(t.width=this._canvasSize[0],t.height=this._canvasSize[1]),"2d"===this._contextId&&(t.getContext(this._contextId).drawImage(this._backBuffer,0,0),this._backBuffer.width=0,this._backBuffer.height=0)},o.prototype.recall=function(t){this.getSize();this._backBuffer.width=t.width,this._backBuffer.height=t.height,"2d"===this._contextId&&(this._backBuffer.getContext(this._contextId).drawImage(t,0,0),t.width=0,t.height=0)},o.prototype.getContext=function(t){return this._contextId=t,this._currentTarget?this._currentTarget.getContext(t):this._backBuffer.getContext(t)},o.prototype.setSize=function(t,e){s.prototype.setSize.apply(this,arguments),e&&(this._canvasSize=[e[0],e[1]]),this._currentTarget&&(this._currentTarget.width=this._canvasSize[0],this._currentTarget.height=this._canvasSize[1])},i.exports=o}),define("famous/surfaces/ContainerSurface",["require","exports","module","../core/Surface","../core/Context"],function(t,e,i){function o(t){s.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new n(this._container),this.setContent(this._container)}var s=t("../core/Surface"),n=t("../core/Context");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="div",o.prototype.elementClass="famous-surface",o.prototype.add=function(){return this.context.add.apply(this.context,arguments)},o.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),s.prototype.render.apply(this,arguments)},o.prototype.deploy=function(){return this._shouldRecalculateSize=!0,s.prototype.deploy.apply(this,arguments)},o.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,e=s.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),e},i.exports=o}),define("famous/surfaces/ImageSurface",["require","exports","module","../core/Surface"],function(t,e,i){function o(){this._imageUrl=void 0,s.apply(this,arguments)}var s=t("../core/Surface"),n=[],r=[],a=[],h=!0;o.enableCache=function(){h=!0},o.disableCache=function(){h=!1},o.clearCache=function(){n=[],r=[],a=[]},o.getCache=function(){return{urlCache:n,countCache:r,nodeCache:r}},o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="img",o.prototype.elementClass="famous-surface",o.prototype.setContent=function(t){var e=n.indexOf(this._imageUrl);-1!==e&&(1===r[e]?(n.splice(e,1),r.splice(e,1),a.splice(e,1)):r[e]--),e=n.indexOf(t),-1===e?(n.push(t),r.push(1)):r[e]++,this._imageUrl=t,this._contentDirty=!0},o.prototype.deploy=function(t){var e=n.indexOf(this._imageUrl);if(void 0===a[e]&&h){var i=new Image;i.src=this._imageUrl||"",a[e]=i}t.src=this._imageUrl||""},o.prototype.recall=function(t){t.src=""},i.exports=o}),define("famous/surfaces/VideoSurface",["require","exports","module","../core/Surface"],function(t,e,i){function o(t){this._videoUrl=void 0,this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),s.apply(this,arguments)}var s=t("../core/Surface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={autoplay:!1},o.prototype.elementType="video",o.prototype.elementClass="famous-surface",o.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.autoplay&&(this.options.autoplay=t.autoplay),t.src&&(this._videoUrl=t.src,this._contentDirty=!0)},o.prototype.setContent=function(t){this._videoUrl=t,this._contentDirty=!0},o.prototype.deploy=function(t){t.src=this._videoUrl,t.autoplay=this.options.autoplay},o.prototype.recall=function(t){t.src=""},i.exports=o}),define("famous/inputs/FastClick",["require","exports","module"],function(){!function(){if(window.CustomEvent){var t=300,e=500,i={},o={},s=Date.now;window.addEventListener("touchstart",function(t){for(var e=s(),o=0;o<t.changedTouches.length;o++){var n=t.changedTouches[o];i[n.identifier]=e}}),window.addEventListener("touchmove",function(t){for(var e=0;e<t.changedTouches.length;e++){var o=t.changedTouches[e];delete i[o.identifier]}}),window.addEventListener("touchend",function(e){for(var n=s(),r=0;r<e.changedTouches.length;r++){var a=e.changedTouches[r],h=i[a.identifier];if(h&&t>n-h){var u=new window.CustomEvent("click",{bubbles:!0,detail:a});o[n]=e,e.target.dispatchEvent(u)}delete i[a.identifier]}}),window.addEventListener("click",function(t){var i=s();for(var n in o){var r=o[n];e>i-n?t instanceof window.MouseEvent&&t.target===r.target&&t.stopPropagation():delete o[n]}},!0)}}()}),define("famous/inputs/TwoFingerSync",["require","exports","module","../core/EventHandler"],function(t,e,i){function o(){this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.touchAEnabled=!1,this.touchAId=0,this.posA=null,this.timestampA=0,this.touchBEnabled=!1,this.touchBId=0,this.posB=null,this.timestampB=0,this._eventInput.on("touchstart",this.handleStart.bind(this)),this._eventInput.on("touchmove",this.handleMove.bind(this)),this._eventInput.on("touchend",this.handleEnd.bind(this)),this._eventInput.on("touchcancel",this.handleEnd.bind(this))}var s=t("../core/EventHandler");o.calculateAngle=function(t,e){var i=e[0]-t[0],o=e[1]-t[1];return Math.atan2(o,i)},o.calculateDistance=function(t,e){var i=e[0]-t[0],o=e[1]-t[1];return Math.sqrt(i*i+o*o)},o.calculateCenter=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]};var n=Date.now;o.prototype.handleStart=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];this.touchAEnabled?this.touchBEnabled||(this.touchBId=i.identifier,this.touchBEnabled=!0,this.posB=[i.pageX,i.pageY],this.timestampB=n(),this._startUpdate(t)):(this.touchAId=i.identifier,this.touchAEnabled=!0,this.posA=[i.pageX,i.pageY],this.timestampA=n())}},o.prototype.handleMove=function(t){if(this.touchAEnabled&&this.touchBEnabled){for(var e,i=this.timestampA,o=this.timestampB,s=0;s<t.changedTouches.length;s++){var r=t.changedTouches[s];r.identifier===this.touchAId?(this.posA=[r.pageX,r.pageY],this.timestampA=n(),e=this.timestampA-i):r.identifier===this.touchBId&&(this.posB=[r.pageX,r.pageY],this.timestampB=n(),e=this.timestampB-o)}e&&this._moveUpdate(e)}},o.prototype.handleEnd=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];(i.identifier===this.touchAId||i.identifier===this.touchBId)&&(this.touchAEnabled&&this.touchBEnabled&&this._eventOutput.emit("end",{touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAEnabled=!1,this.touchAId=0,this.touchBEnabled=!1,this.touchBId=0)}},i.exports=o}),define("famous/inputs/PinchSync",["require","exports","module","./TwoFingerSync","../core/OptionsManager"],function(t,e,i){function o(t){s.call(this),this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new n(this.options),t&&this.setOptions(t),this._displacement=0,this._previousDistance=0}var s=t("./TwoFingerSync"),n=t("../core/OptionsManager");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={scale:1},o.prototype._startUpdate=function(t){this._previousDistance=s.calculateDistance(this.posA,this.posB),this._displacement=0,this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._dist,center:s.calculateCenter(this.posA,this.posB)})},o.prototype._moveUpdate=function(t){var e=s.calculateDistance(this.posA,this.posB),i=s.calculateCenter(this.posA,this.posB),o=this.options.scale,n=o*(e-this._previousDistance),r=n/t;this._previousDistance=e,this._displacement+=n,this._eventOutput.emit("update",{delta:n,velocity:r,distance:e,displacement:this._displacement,center:i,touches:[this.touchAId,this.touchBId]})},o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=o}),define("famous/inputs/RotateSync",["require","exports","module","./TwoFingerSync","../core/OptionsManager"],function(t,e,i){function o(t){s.call(this),this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new n(this.options),t&&this.setOptions(t),this._angle=0,this._previousAngle=0}var s=t("./TwoFingerSync"),n=t("../core/OptionsManager");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={scale:1},o.prototype._startUpdate=function(t){this._angle=0,this._previousAngle=s.calculateAngle(this.posA,this.posB);var e=s.calculateCenter(this.posA,this.posB);this._eventOutput.emit("start",{count:t.touches.length,angle:this._angle,center:e,touches:[this.touchAId,this.touchBId]})},o.prototype._moveUpdate=function(t){var e=this.options.scale,i=s.calculateAngle(this.posA,this.posB),o=s.calculateCenter(this.posA,this.posB),n=e*(i-this._previousAngle),r=n/t;this._angle+=n,this._eventOutput.emit("update",{delta:n,velocity:r,angle:this._angle,center:o,touches:[this.touchAId,this.touchBId]}),this._previousAngle=i},o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=o}),define("famous/inputs/ScaleSync",["require","exports","module","./TwoFingerSync","../core/OptionsManager"],function(t,e,i){function o(t){n.call(this),this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),t&&this.setOptions(t),this._scaleFactor=1,this._startDist=0,this._eventInput.on("pipe",s.bind(this))}function s(){this.touchAId=void 0,this.touchBId=void 0}var n=t("./TwoFingerSync"),r=t("../core/OptionsManager");o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={scale:1},o.prototype._startUpdate=function(t){this._scaleFactor=1,this._startDist=n.calculateDistance(this.posA,this.posB),this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._startDist,center:n.calculateCenter(this.posA,this.posB)})},o.prototype._moveUpdate=function(t){var e=this.options.scale,i=n.calculateDistance(this.posA,this.posB),o=n.calculateCenter(this.posA,this.posB),s=(i-this._startDist)/this._startDist,r=Math.max(1+e*s,0),a=(r-this._scaleFactor)/t;this._eventOutput.emit("update",{delta:s,scale:r,velocity:a,distance:i,center:o,touches:[this.touchAId,this.touchBId]}),this._scaleFactor=r},o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=o}),define("famous/inputs/ScrollSync",["require","exports","module","../core/EventHandler","../core/Engine","../core/OptionsManager"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",n.bind(this)),this._eventInput.on("wheel",n.bind(this)),this._inProgress=!1,this._loopBound=!1}function s(){if(this._inProgress&&c()-this._prevTime>this.options.stallTime){this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,e=this._payload;e.position=this._position,e.velocity=t,e.slip=!0,this._eventOutput.emit("end",e)}}function n(t){this.options.preventDefault&&t.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,y=this._payload,y.slip=!0,y.position=this._position,y.clientX=t.clientX,y.clientY=t.clientY,y.offsetX=t.offsetX,y.offsetY=t.offsetY,this._eventOutput.emit("start",y),this._loopBound||(a.on("prerender",s.bind(this)),this._loopBound=!0));var e=c(),i=this._prevTime||e,n=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,r=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(n*=this.options.lineHeight,r*=this.options.lineHeight),this.options.rails&&(Math.abs(n)>Math.abs(r)?r=0:n=0);var h,p,l=Math.max(e-i,u),f=n/l,d=r/l,m=this.options.scale;this.options.direction===o.DIRECTION_X?(p=m*n,h=m*f,this._position+=p):this.options.direction===o.DIRECTION_Y?(p=m*r,h=m*d,this._position+=p):(p=[m*n,m*r],h=[m*f,m*d],this._position[0]+=p[0],this._position[1]+=p[1]);var y=this._payload;y.delta=p,y.velocity=h,y.position=this._position,y.slip=!0,this._eventOutput.emit("update",y),this._prevTime=e,this._prevVel=h}var r=t("../core/EventHandler"),a=t("../core/Engine"),h=t("../core/OptionsManager");o.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40,preventDefault:!0},o.DIRECTION_X=0,o.DIRECTION_Y=1;var u=8,c=Date.now;o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=o}),define("famous/transitions/SpringTransition",["require","exports","module","../physics/PhysicsEngine","../physics/bodies/Particle","../physics/forces/Spring","../math/Vector"],function(t,e,i){function o(t){t=t||0,this.endState=new _(t),this.initState=new _,this._dimensions=void 0,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new y,this.spring=new v({anchor:this.endState}),this.particle=new g,this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function s(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function n(t){this.particle.setPosition(t)}function r(t){this.particle.setVelocity(t)}function a(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function h(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function u(t){this._callback=t}function c(){this.PE.wake()}function p(){this.PE.sleep()}function l(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else s.call(this)<this._absRestTolerance&&(n.call(this,this.endState),r.call(this,[0,0,0]),p.call(this))}function f(t){var e=o.DEFAULT_OPTIONS;void 0===t.period&&(t.period=e.period),void 0===t.dampingRatio&&(t.dampingRatio=e.dampingRatio),void 0===t.velocity&&(t.velocity=e.velocity),t.period<150&&(t.period=150,console.warn("The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions")),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),r.call(this,t.velocity)}function d(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function m(t){this.endState.set(t),d.call(this)}var y=t("../physics/PhysicsEngine"),g=t("../physics/bodies/Particle"),v=t("../physics/forces/Spring"),_=t("../math/Vector");o.SUPPORTS_MULTIPLE=3,o.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},o.prototype.reset=function(t,e){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),n.call(this,t),m.call(this,t),e&&r.call(this,e),u.call(this,void 0)},o.prototype.getVelocity=function(){return h.call(this)},o.prototype.setVelocity=function(t){this.call(this,r(t))},o.prototype.isActive=function(){return!this.PE.isSleeping()},o.prototype.halt=function(){this.set(this.get())},o.prototype.get=function(){return l.call(this),a.call(this)},o.prototype.set=function(t,e,i){return e?(this._dimensions=t instanceof Array?t.length:0,c.call(this),f.call(this,e),m.call(this,t),void u.call(this,i)):(this.reset(t),void(i&&i()))},i.exports=o}),define("famous/physics/constraints/Snap",["require","exports","module","./Constraint","../../math/Vector"],function(t,e,i){function o(t){s.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.pDiff=new n,this.vDiff=new n,this.impulse1=new n,this.impulse2=new n}var s=t("./Constraint"),n=t("../../math/Vector");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,anchor:void 0};var r=Math.PI;o.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor instanceof n&&(this.options.anchor=t.anchor),t.anchor.position instanceof n&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new n(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period),s.prototype.setOptions.call(this,t)},o.prototype.getEnergy=function(t,e){for(var i=this.options,o=i.length,s=i.anchor||e.position,n=Math.pow(2*r/i.period,2),a=0,h=0;h<t.length;h++){var u=t[h],c=s.sub(u.position).norm()-o;a+=.5*n*c*c}return a},o.prototype.applyConstraint=function(t,e,i){for(var o=this.options,s=this.pDiff,n=this.vDiff,a=this.impulse1,h=this.impulse2,u=o.length,c=o.anchor||e.position,p=o.period,l=o.dampingRatio,f=0;f<t.length;f++){var d=t[f],m=d.position,y=d.velocity,g=d.mass,v=d.inverseMass;s.set(m.sub(c));var _,w=s.norm()-u;if(e){var S=e.inverseMass,O=e.velocity;n.set(y.sub(O)),_=1/(v+S)}else n.set(y),_=g;var T,b;if(0===this.options.period)T=0,b=1;else{var x=4*_*r*r/(p*p),M=4*_*r*l/p;b=i*x/(M+i*x),T=1/(M+i*x)}var E=b/i*w;s.normalize(-E).sub(n).mult(i/(T+i/_)).put(a),d.applyImpulse(a),e&&(a.mult(-1).put(h),e.applyImpulse(h))}},i.exports=o}),define("famous/transitions/SnapTransition",["require","exports","module","../physics/PhysicsEngine","../physics/bodies/Particle","../physics/constraints/Snap","../math/Vector"],function(t,e,i){function o(t){t=t||0,this.endState=new _(t),this.initState=new _,this._dimensions=1,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new y,this.particle=new g,this.spring=new v({anchor:this.endState}),this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function s(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function n(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function r(t){this.endState.set(t),n.call(this)}function a(){this.PE.wake()}function h(){this.PE.sleep()}function u(t){this.particle.position.set(t)}function c(t){this.particle.velocity.set(t)}function p(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function l(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function f(t){this._callback=t}function d(t){var e=o.DEFAULT_OPTIONS;void 0===t.period&&(t.period=e.period),void 0===t.dampingRatio&&(t.dampingRatio=e.dampingRatio),void 0===t.velocity&&(t.velocity=e.velocity),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),c.call(this,t.velocity)}function m(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else s.call(this)<this._absRestTolerance&&(u.call(this,this.endState),c.call(this,[0,0,0]),h.call(this))}var y=t("../physics/PhysicsEngine"),g=t("../physics/bodies/Particle"),v=t("../physics/constraints/Snap"),_=t("../math/Vector");o.SUPPORTS_MULTIPLE=3,o.DEFAULT_OPTIONS={period:100,dampingRatio:.2,velocity:0},o.prototype.reset=function(t,e){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),u.call(this,t),r.call(this,t),e&&c.call(this,e),f.call(this,void 0)},o.prototype.getVelocity=function(){return l.call(this)},o.prototype.setVelocity=function(t){this.call(this,c(t))},o.prototype.isActive=function(){return!this.PE.isSleeping()},o.prototype.halt=function(){this.set(this.get())},o.prototype.get=function(){return m.call(this),p.call(this)},o.prototype.set=function(t,e,i){return e?(this._dimensions=t instanceof Array?t.length:0,a.call(this),d.call(this,e),r.call(this,t),void f.call(this,i)):(this.reset(t),void(i&&i()))},i.exports=o}),define("famous/transitions/WallTransition",["require","exports","module","../physics/PhysicsEngine","../physics/bodies/Particle","../physics/forces/Spring","../physics/constraints/Wall","../math/Vector"],function(t,e,i){function o(t){t=t||0,this.endState=new w(t),this.initState=new w,this.spring=new v({anchor:this.endState}),this.wall=new _,this._restTolerance=1e-10,this._dimensions=1,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new y,this.particle=new g,this.PE.addBody(this.particle),this.PE.attach([this.wall,this.spring],this.particle)}function s(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function n(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function r(){this.PE.wake()}function a(){this.PE.sleep()}function h(t){this.endState.set(t);var e=this.endState.sub(this.initState).norm();this.wall.setOptions({distance:this.endState.norm(),normal:0===e?this.particle.velocity.normalize(-1):this.endState.sub(this.initState).normalize(-1)}),n.call(this)}function u(t){this.particle.position.set(t)}function c(t){this.particle.velocity.set(t)}function p(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function l(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function f(t){this._callback=t}function d(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else{var e=s.call(this);e<this._absRestTolerance&&(a.call(this),u.call(this,this.endState),c.call(this,[0,0,0]))}}function m(t){var e=o.DEFAULT_OPTIONS;void 0===t.period&&(t.period=e.period),void 0===t.dampingRatio&&(t.dampingRatio=e.dampingRatio),void 0===t.velocity&&(t.velocity=e.velocity),void 0===t.restitution&&(t.restitution=e.restitution),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),this.wall.setOptions({restitution:t.restitution}),c.call(this,t.velocity)
}var y=t("../physics/PhysicsEngine"),g=t("../physics/bodies/Particle"),v=t("../physics/forces/Spring"),_=t("../physics/constraints/Wall"),w=t("../math/Vector");o.SUPPORTS_MULTIPLE=3,o.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0,restitution:.5},o.prototype.reset=function(t,e){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),u.call(this,t),e&&c.call(this,e),h.call(this,t),f.call(this,void 0)},o.prototype.getVelocity=function(){return l.call(this)},o.prototype.setVelocity=function(t){this.call(this,c(t))},o.prototype.isActive=function(){return!this.PE.isSleeping()},o.prototype.halt=function(){this.set(this.get())},o.prototype.get=function(){return d.call(this),p.call(this)},o.prototype.set=function(t,e,i){return e?(this._dimensions=t instanceof Array?t.length:0,r.call(this),m.call(this,e),h.call(this,t),void f.call(this,i)):(this.reset(t),void(i&&i()))},i.exports=o}),define("famous/utilities/KeyCodes",["require","exports","module"],function(t,e,i){var o={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};i.exports=o}),define("famous/views/SequentialLayout",["require","exports","module","../core/OptionsManager","../core/Transform","../core/ViewSequence","../utilities/Utility"],function(t,e,i){function o(t){this._items=null,this._size=null,this._outputFunction=o.DEFAULT_OUTPUT_FUNCTION,this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this.optionsManager=new s(this.options),t&&this.setOptions(t)}var s=t("../core/OptionsManager"),n=t("../core/Transform"),r=t("../core/ViewSequence"),a=t("../utilities/Utility");o.DEFAULT_OPTIONS={direction:a.Direction.Y,itemSpacing:0},o.DEFAULT_OUTPUT_FUNCTION=function(t,e){var i=this.options.direction===a.Direction.X?n.translate(e,0):n.translate(0,e);return{transform:i,target:t.render()}},o.prototype.getSize=function(){return this._size||this.render(),this._size},o.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new r(t)),this._items=t,this},o.prototype.setOptions=function(){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},o.prototype.setOutputFunction=function(t){return this._outputFunction=t,this},o.prototype.render=function(){var t=0,e=1^this.options.direction,i=this._items,o=null,s=[],n={},r=[],a=0;for(this._size=[0,0];i&&(o=i.get());)o.getSize&&(s=o.getSize()),n=this._outputFunction.call(this,o,t,a++),r.push(n),s&&(s[this.options.direction]&&(t+=s[this.options.direction]),s[e]>this._size[e]&&(this._size[e]=s[e])),i=i.getNext(),this.options.itemSpacing&&i&&(t+=this.options.itemSpacing);return this._size[this.options.direction]=t,r},i.exports=o}),define("famous/views/Deck",["require","exports","module","../core/Transform","../core/OptionsManager","../transitions/Transitionable","../utilities/Utility","./SequentialLayout"],function(t,e,i){function o(){c.apply(this,arguments),this.state=new h(0),this._isOpen=!1,this.setOutputFunction(function(t,e,i){var o=s.call(this),n=this.options.direction===u.Direction.X?r.translate(o*e,0,.001*(o-1)*e):r.translate(0,o*e,.001*(o-1)*e),a=t.render();if(this.options.stackRotation){var h=this.options.stackRotation*i*(1-o);a={transform:r.rotateZ(h),origin:[.5,.5],target:a}}return{transform:n,size:t.getSize(),target:a}})}function s(t){return t?this._isOpen?1:0:this.state.get()}function n(t,e,i){this.state.halt(),this.state.set(t,e,i)}var r=t("../core/Transform"),a=t("../core/OptionsManager"),h=t("../transitions/Transitionable"),u=t("../utilities/Utility"),c=t("./SequentialLayout");o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS=a.patch(c.DEFAULT_OPTIONS,{transition:{curve:"easeOutBounce",duration:500},stackRotation:0}),o.prototype.getSize=function(){var t=c.prototype.getSize.apply(this,arguments),e=this._items?this._items.get().getSize():[0,0];e||(e=[0,0]);var i=s.call(this),o=1-i;return[e[0]*o+t[0]*i,e[1]*o+t[1]*i]},o.prototype.isOpen=function(){return this._isOpen},o.prototype.open=function(t){this._isOpen=!0,n.call(this,1,this.options.transition,t)},o.prototype.close=function(t){this._isOpen=!1,n.call(this,0,this.options.transition,t)},o.prototype.toggle=function(t){this._isOpen?this.close(t):this.open(t)},i.exports=o}),define("famous/transitions/CachedMap",["require","exports","module"],function(t,e,i){function o(t){this._map=t||null,this._cachedOutput=null,this._cachedInput=Number.NaN}o.create=function(t){var e=new o(t);return e.get.bind(e)},o.prototype.get=function(t){return t!==this._cachedInput&&(this._cachedInput=t,this._cachedOutput=this._map(t)),this._cachedOutput},i.exports=o}),define("famous/views/RenderController",["require","exports","module","../core/Modifier","../core/RenderNode","../core/Transform","../transitions/Transitionable","../core/View"],function(t,e,i){function o(){u.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=o.DefaultMap.transform,this.inOpacityMap=o.DefaultMap.opacity,this.inOriginMap=o.DefaultMap.origin,this.outTransformMap=o.DefaultMap.transform,this.outOpacityMap=o.DefaultMap.opacity,this.outOriginMap=o.DefaultMap.origin,this._output=[]}function s(t,e){return t(e.get())}var n=t("../core/Modifier"),r=t("../core/RenderNode"),a=t("../core/Transform"),h=t("../transitions/Transitionable"),u=t("../core/View");o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},o.DefaultMap={transform:function(){return a.identity},opacity:function(t){return t},origin:null},o.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},o.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},o.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},o.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw new Error("outTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},o.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw new Error("outOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},o.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw new Error("outOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},o.prototype.show=function(t,e,i){if(!t)return this.hide(i);if(e instanceof Function&&(i=e,e=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,i),this._nextRenderable=null})));this.hide()}var o=null,a=this._renderables.indexOf(t);if(a>=0){this._showing=a,o=this._states[a],o.halt();var u=this._outgoingRenderables.indexOf(t);u>=0&&this._outgoingRenderables.splice(u,1)}else{o=new h(0);var c=new n({transform:this.inTransformMap?s.bind(this,this.inTransformMap,o):null,opacity:this.inOpacityMap?s.bind(this,this.inOpacityMap,o):null,origin:this.inOriginMap?s.bind(this,this.inOriginMap,o):null}),p=new r;p.add(c).add(t),this._showing=this._nodes.length,this._nodes.push(p),this._modifiers.push(c),this._states.push(o),this._renderables.push(t)}e||(e=this.options.inTransition),o.set(1,e,i)},o.prototype.hide=function(t,e){if(!(this._showing<0)){var i=this._showing;this._showing=-1,t instanceof Function&&(e=t,t=void 0);var o=this._nodes[i],n=this._modifiers[i],r=this._states[i],a=this._renderables[i];n.transformFrom(this.outTransformMap?s.bind(this,this.outTransformMap,r):null),n.opacityFrom(this.outOpacityMap?s.bind(this,this.outOpacityMap,r):null),n.originFrom(this.outOriginMap?s.bind(this,this.outOriginMap,r):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),r.halt(),r.set(0,t,function(t,i,o,s){if(this._outgoingRenderables.indexOf(s)>=0){var n=this._nodes.indexOf(t);this._nodes.splice(n,1),this._modifiers.splice(n,1),this._states.splice(n,1),this._renderables.splice(n,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(s),1),this._showing>=n&&this._showing--}e&&e.call(this)}.bind(this,o,n,r,a))}},o.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var e=0;e<this._nodes.length;e++)t[e]=this._nodes[e].render();return t},i.exports=o}),define("famous/views/EdgeSwapper",["require","exports","module","../transitions/CachedMap","../core/Entity","../core/EventHandler","../core/Transform","./RenderController"],function(t,e,i){function o(t){this._currentTarget=null,this._size=[void 0,void 0],this._controller=new u(t),this._controller.inTransformFrom(n.create(s.bind(this,1e-4))),this._controller.outTransformFrom(n.create(s.bind(this,-1e-4))),this._eventInput=new a,a.setInputHandler(this,this._eventInput),this._entityId=r.register(this),t&&this.setOptions(t)}function s(t,e){return h.translate(this._size[0]*(1-e),0,t*(1-e))}var n=t("../transitions/CachedMap"),r=t("../core/Entity"),a=t("../core/EventHandler"),h=t("../core/Transform"),u=t("./RenderController");o.prototype.show=function(t){this._currentTarget&&this._eventInput.unpipe(this._currentTarget),this._currentTarget=t,this._currentTarget&&this._currentTarget.trigger&&this._eventInput.pipe(this._currentTarget),this._controller.show.apply(this._controller,arguments)},o.prototype.setOptions=function(t){this._controller.setOptions(t)},o.prototype.render=function(){return this._entityId},o.prototype.commit=function(t){return this._size[0]=t.size[0],this._size[1]=t.size[1],{transform:t.transform,opacity:t.opacity,origin:t.origin,size:t.size,target:this._controller.render()}},i.exports=o}),define("famous/views/GridLayout",["require","exports","module","../core/Entity","../core/RenderNode","../core/Transform","../core/ViewSequence","../core/EventHandler","../core/Modifier","../core/OptionsManager","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this.optionsManager=new l(this.options),t&&this.setOptions(t),this.id=a.register(this),this._modifiers=[],this._states=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0,this._eventOutput=new c,c.setOutputHandler(this,this._eventOutput)}function s(t,e,i){var o=[t[0],t[1]];o[0]-=this.options.gutterSize[0]*(e-1),o[1]-=this.options.gutterSize[1]*(i-1);for(var s,a=Math.round(o[1]/i),h=Math.round(o[0]/e),u=0,c=0,p=0;i>p;p++){s=0;for(var l=0;e>l;l++)void 0===this._modifiers[c]?n.call(this,c,[h,a],[s,u,0],1):r.call(this,c,[h,a],[s,u,0],1),c++,s+=h+this.options.gutterSize[0];u+=a+this.options.gutterSize[1]}for(this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[t[0],t[1]],this._activeCount=i*e,p=this._activeCount;p<this._modifiers.length;p++)r.call(this,p,[Math.round(h),Math.round(a)],[0,0],0);this._eventOutput.emit("reflow")}function n(t,e,i,o){var s={transform:new d(h.translate.apply(null,i)),opacity:new f(o),size:new f(e)},n=new p({transform:s.transform,opacity:s.opacity,size:s.size});this._states[t]=s,this._modifiers[t]=n}function r(t,e,i,o){var s=this._states[t],n=s.size,r=s.opacity,a=s.transform,h=this.options.transition;a.halt(),r.halt(),n.halt(),a.setTranslate(i,h),n.set(e,h),r.set(o,h)}var a=t("../core/Entity"),h=(t("../core/RenderNode"),t("../core/Transform")),u=t("../core/ViewSequence"),c=t("../core/EventHandler"),p=t("../core/Modifier"),l=t("../core/OptionsManager"),f=t("../transitions/Transitionable"),d=t("../transitions/TransitionableTransform");o.DEFAULT_OPTIONS={dimensions:[1,1],transition:!1,gutterSize:[0,0]},o.prototype.render=function(){return this.id},o.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},o.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new u(t)),this.sequence=t},o.prototype.commit=function(t){var e=t.transform,i=t.opacity,o=t.origin,n=t.size,r=this.options.dimensions[0],a=this.options.dimensions[1];(n[0]!==this._contextSizeCache[0]||n[1]!==this._contextSizeCache[1]||r!==this._dimensionsCache[0]||a!==this._dimensionsCache[1])&&s.call(this,n,r,a);for(var u=this.sequence,c=[],p=0;u&&p<this._modifiers.length;){var l=u.get(),f=this._modifiers[p];p>=this._activeCount&&this._states[p].opacity.isActive()&&(this._modifiers.splice(p,1),this._states.splice(p,1)),l&&c.push(f.modify({origin:o,target:l.render()})),u=u.getNext(),p++}return n&&(e=h.moveThen([-n[0]*o[0],-n[1]*o[1],0],e)),{transform:e,opacity:i,size:n,target:c}},i.exports=o}),define("famous/views/Scroller",["require","exports","module","../core/Entity","../core/Group","../core/OptionsManager","../core/Transform","../utilities/Utility","../core/ViewSequence","../core/EventHandler"],function(t,e,i){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new u,this.group.add({render:a.bind(this)}),this._entityId=h.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new d,this._eventOutput=new d,d.setInputHandler(this,this._eventInput),d.setOutputHandler(this,this._eventOutput)}function s(t){t||(t=this._contextSize);var e=this.options.direction;return void 0===t[e]?this._contextSize[e]:t[e]}function n(t,e,i){var o=t.getSize?t.getSize():this._contextSize,n=this._outputFunction(e);return i.push({transform:n,target:t.render()}),s.call(this,o)}function r(){return void 0!==this.options.clipSize?this.options.clipSize:this._contextSize[this.options.direction]>this.getCumulativeSize()[this.options.direction]?s.call(this,this.getCumulativeSize()):s.call(this,this._contextSize)}function a(){for(var t=null,e=this._position,i=[],o=-this._positionOffset,a=r.call(this),h=this._node;h&&o-e<a+this.options.margin;)o+=n.call(this,h,o,i),h=h.getNext?h.getNext():null;var u=this._node,c=s.call(this,u.getSize());if(a>o){for(;u&&a>c;)u=u.getPrevious(),u&&(c+=s.call(this,u.getSize()));for(u=this._node;u&&a>c;)u=u.getNext(),u&&(c+=s.call(this,u.getSize()))}for(!h&&a-m>o-e?1!==this._onEdge&&(this._onEdge=1,this._eventOutput.emit("onEdge",{position:o-a})):!this._node.getPrevious()&&-m>e?-1!==this._onEdge&&(this._onEdge=-1,this._eventOutput.emit("onEdge",{position:0})):0!==this._onEdge&&(this._onEdge=0,this._eventOutput.emit("offEdge")),h=this._node&&this._node.getPrevious?this._node.getPrevious():null,o=-this._positionOffset,h&&(t=h.getSize?h.getSize():this._contextSize,o-=s.call(this,t));h&&o-e>-(a+this.options.margin);)n.call(this,h,o,i),h=h.getPrevious?h.getPrevious():null,h&&(t=h.getSize?h.getSize():this._contextSize,o-=s.call(this,t));return i}var h=t("../core/Entity"),u=t("../core/Group"),c=t("../core/OptionsManager"),p=t("../core/Transform"),l=t("../utilities/Utility"),f=t("../core/ViewSequence"),d=t("../core/EventHandler");o.DEFAULT_OPTIONS={direction:l.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1};var m=0;o.prototype.getCumulativeSize=function(t){return void 0===t&&(t=this._node._.cumulativeSizes.length-1),this._node._.getSize(t)},o.prototype.setOptions=function(t){t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)),this._optionsManager.setOptions(t)},o.prototype.onEdge=function(){return this._onEdge},o.prototype.outputFrom=function(t,e){t||(t=function(t){return this.options.direction===l.Direction.X?p.translate(t,0):p.translate(0,t)}.bind(this),e||(e=t)),this._outputFunction=t,this._masterOutputFunction=e?e:function(e){return p.inverse(t(-e))}},o.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},o.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new f({array:t})),this._node=t,this._positionOffset=0},o.prototype.getSize=function(t){return t?this._contextSize:this._size},o.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},o.prototype.commit=function(t){var e=t.transform,i=t.opacity,o=t.origin,s=t.size;this.options.clipSize||s[0]===this._contextSize[0]&&s[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=s[0],this._contextSize[1]=s[1],this.options.direction===l.Direction.X?(this._size[0]=r.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=r.call(this)));var n=this._masterOutputFunction(-this._position);return{transform:p.multiply(e,n),size:s,opacity:i,origin:o,target:this.group.render()}},i.exports=o}),define("famous/views/Scrollview",["require","exports","module","../physics/PhysicsEngine","../physics/bodies/Particle","../physics/forces/Drag","../physics/forces/Spring","../core/EventHandler","../core/OptionsManager","../core/ViewSequence","../views/Scroller","../utilities/Utility","../inputs/GenericSync","../inputs/ScrollSync","../inputs/TouchSync"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new S(this.options),this._scroller=new T(this.options),this.sync=new x(["scroll","touch"],{direction:this.options.direction,scale:this.options.syncScale,rails:this.options.rails,preventDefault:this.options.preventDefault}),this._physicsEngine=new y,this._particle=new g,this._physicsEngine.addBody(this._particle),this.spring=new _({anchor:[0,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.drag=new v({forceFunction:v.FORCE_FUNCTIONS.QUADRATIC,strength:this.options.drag}),this.friction=new v({forceFunction:v.FORCE_FUNCTIONS.LINEAR,strength:this.options.friction}),this._node=null,this._touchCount=0,this._springState=z.NONE,this._onEdge=I.NONE,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._displacement=0,this._totalShift=0,this._cachedIndex=0,this._scroller.positionFrom(this.getPosition.bind(this)),this._eventInput=new w,this._eventOutput=new w,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),w.setInputHandler(this,this._eventInput),w.setOutputHandler(this,this._eventOutput),a.call(this),t&&this.setOptions(t)}function s(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),u.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function n(t){var e=-t.velocity,i=-t.delta;if(this._onEdge!==I.NONE&&t.slip&&(0>e&&this._onEdge===I.TOP||e>0&&this._onEdge===I.BOTTOM?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(e)>Math.abs(this.getVelocity())&&s.call(this,t)),!this._earlyEnd){if(this._touchVelocity=e,t.slip){var o=this.options.speedLimit;-o>e?e=-o:e>o&&(e=o),this.setVelocity(e);var n=16*o;i>n?i=n:-n>i&&(i=-n)}this.setPosition(this.getPosition()+i),this._displacement+=i,this._springState===z.NONE&&d.call(this)}}function r(t){if(this._touchCount=t.count||0,!this._touchCount){u.call(this),this._onEdge!==I.NONE&&f.call(this,this._edgeSpringPosition,z.EDGE),h.call(this);var e=-t.velocity,i=this.options.speedLimit;t.slip&&(i*=this.options.edgeGrip),-i>e?e=-i:e>i&&(e=i),this.setVelocity(e),this._touchVelocity=0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",s),this._eventInput.on("update",n),this._eventInput.on("end",r),this._eventInput.on("resize",function(){this._node._.calculateSize()}.bind(this)),this._scroller.on("onEdge",function(t){this._edgeSpringPosition=t.position,p.call(this,this._scroller.onEdge()),this._eventOutput.emit("onEdge")}.bind(this)),this._scroller.on("offEdge",function(){this.sync.setOptions({scale:this.options.syncScale}),this._onEdge=this._scroller.onEdge(),this._eventOutput.emit("offEdge")}.bind(this)),this._particle.on("update",function(t){this._springState===z.NONE&&d.call(this),this._displacement=t.position.x-this._totalShift}.bind(this)),this._particle.on("end",function(){(!this.options.paginated||this.options.paginated&&this._springState!==z.NONE)&&this._eventOutput.emit("settle")}.bind(this))}function h(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function u(){this._springState=z.NONE,this._physicsEngine.detachAll()}function c(t){var e=this.options.direction,i=t.getSize();return i?i[e]:this._scroller.getSize()[e]}function p(t){this.sync.setOptions({scale:this.options.edgeGrip}),this._onEdge=t,this._touchCount||this._springState===z.EDGE||f.call(this,this._edgeSpringPosition,z.EDGE),this._springState&&Math.abs(this.getVelocity())<.001&&(u.call(this),h.call(this))}function l(){if(!this._touchCount&&this._springState!==z.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var e=this.getPosition(),i=Math.abs(t)>this.options.pageSwitchSpeed,o=c.call(this,this._node),s=e>.5*o,n=t>0,r=0>t;this._needsPaginationCheck=!1,s&&!i||i&&n?this.goToNextPage():i&&r?this.goToPreviousPage():f.call(this,0,z.PAGE)}}}function f(t,e){var i;e===z.EDGE?(this._edgeSpringPosition=t,i={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):e===z.PAGE&&(this._pageSpringPosition=t,i={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(i),e&&!this._springState&&(u.call(this),this._springState=e,h.call(this)),this._springState=e}function d(){var t=0,e=this.getPosition();e+=(0>e?-.5:.5)>>0;for(var i=c.call(this,this._node),o=this._node.getNext();t+e>=i&&o;)t-=i,this._scroller.sequenceFrom(o),this._node=o,o=this._node.getNext(),i=c.call(this,this._node);for(var s,n=this._node.getPrevious();0>=t+e&&n;)s=c.call(this,n),this._scroller.sequenceFrom(n),this._node=n,t+=s,n=this._node.getPrevious();t&&m.call(this,t),this._node&&(this._node.index!==this._cachedIndex?this.getPosition()<.5*i&&(this._cachedIndex=this._node.index,this._eventOutput.emit("pageChange",{direction:-1,index:this._cachedIndex})):this.getPosition()>.5*i&&(this._cachedIndex=this._node.index+1,this._eventOutput.emit("pageChange",{direction:1,index:this._cachedIndex})))}function m(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._totalShift+=t,this._springState===z.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===z.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var y=t("../physics/PhysicsEngine"),g=t("../physics/bodies/Particle"),v=t("../physics/forces/Drag"),_=t("../physics/forces/Spring"),w=t("../core/EventHandler"),S=t("../core/OptionsManager"),O=t("../core/ViewSequence"),T=t("../views/Scroller"),b=t("../utilities/Utility"),x=t("../inputs/GenericSync"),M=t("../inputs/ScrollSync"),E=t("../inputs/TouchSync");x.register({scroll:M,touch:E});var z={NONE:0,EDGE:1,PAGE:2},I={TOP:-1,NONE:0,BOTTOM:1};o.DEFAULT_OPTIONS={direction:b.Direction.Y,rails:!0,friction:.005,drag:1e-4,edgeGrip:.2,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:5,groupScroll:!1,syncScale:1},o.prototype.getCurrentIndex=function(){return this._node.index},o.prototype.goToPreviousPage=function(){if(!this._node||this._onEdge===I.TOP)return null;if(this.getPosition()>1&&this._springState===z.NONE)return f.call(this,0,z.PAGE),this._node;var t=this._node.getPrevious();if(t){var e=c.call(this,t);this._scroller.sequenceFrom(t),this._node=t,m.call(this,e),f.call(this,0,z.PAGE)}return t},o.prototype.goToNextPage=function(){if(!this._node||this._onEdge===I.BOTTOM)return null;var t=this._node.getNext();if(t){var e=c.call(this,this._node);this._scroller.sequenceFrom(t),this._node=t,m.call(this,-e),f.call(this,0,z.PAGE)}return t},o.prototype.goToPage=function(t){var e,i=this.getCurrentIndex();if(i>t)for(e=0;i-t>e;e++)this.goToPreviousPage();if(t>i)for(e=0;t-i>e;e++)this.goToNextPage()},o.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},o.prototype.getPosition=function(){return this._particle.getPosition1D()},o.prototype.getAbsolutePosition=function(){return this._scroller.getCumulativeSize(this.getCurrentIndex())[this.options.direction]+this.getPosition()},o.prototype.getOffset=o.prototype.getPosition,o.prototype.setPosition=function(t){this._particle.setPosition1D(t)},o.prototype.setOffset=o.prototype.setPosition,o.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},o.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},o.prototype.setOptions=function(t){void 0!==t.direction&&("x"===t.direction?t.direction=b.Direction.X:"y"===t.direction&&(t.direction=b.Direction.Y)),t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.subscribe(this._scroller):this.unsubscribe(this._scroller)),this._optionsManager.setOptions(t),this._scroller.setOptions(t),void 0!==t.drag&&this.drag.setOptions({strength:this.options.drag}),void 0!==t.friction&&this.friction.setOptions({strength:this.options.friction}),(void 0!==t.edgePeriod||void 0!==t.edgeDamp)&&this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),(t.rails||void 0!==t.direction||void 0!==t.syncScale||t.preventDefault)&&this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===b.Direction.X?x.DIRECTION_X:x.DIRECTION_Y,scale:this.options.syncScale,preventDefault:this.options.preventDefault})},o.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new O({array:t,trackSize:!0})),this._node=t,this._scroller.sequenceFrom(t)},o.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},o.prototype.render=function(){return this.options.paginated&&this._needsPaginationCheck&&l.call(this),this._scroller.render()},i.exports=o}),define("famous/views/ScrollContainer",["require","exports","module","../surfaces/ContainerSurface","../core/EventHandler","./Scrollview","../utilities/Utility","../core/OptionsManager"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new a(this.options),t&&this.setOptions(t),this.container=new s(this.options.container),this.scrollview=new r(this.options.scrollview),this.container.add(this.scrollview),this._eventInput=new n,n.setInputHandler(this,this._eventInput),this._eventInput.pipe(this.scrollview),this._eventOutput=new n,n.setOutputHandler(this,this._eventOutput),this.container.pipe(this._eventOutput),this.scrollview.pipe(this._eventOutput)}var s=t("../surfaces/ContainerSurface"),n=t("../core/EventHandler"),r=t("./Scrollview"),a=(t("../utilities/Utility"),t("../core/OptionsManager"));o.DEFAULT_OPTIONS={container:{properties:{overflow:"hidden"}},scrollview:{}},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},o.prototype.sequenceFrom=function(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)},o.prototype.getSize=function(){return this.container.getSize.apply(this.container,arguments)},o.prototype.render=function(){return this.container.render()},i.exports=o}),define("famous/widgets/NavigationBar",["require","exports","module","../core/Scene","../core/Surface","../core/Transform","../core/View"],function(t,e,i){function o(){a.apply(this,arguments),this.title=new n({classes:this.options.classes,content:this.options.content}),this.back=new n({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.backContent}),this.back.on("click",function(){this._eventOutput.emit("back",{})}.bind(this)),this.more=new n({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.moreContent}),this.more.on("click",function(){this._eventOutput.emit("more",{})}.bind(this)),this.layout=new s({id:"master",size:this.options.size,target:[{transform:r.inFront,origin:[0,.5],target:this.back},{origin:[.5,.5],target:this.title},{transform:r.inFront,origin:[1,.5],target:this.more}]}),this._add(this.layout),this._optionsManager.on("change",function(t){var e=t.id,i=t.value;"size"===e?(this.layout.id.master.setSize(i),this.title.setSize(i),this.back.setSize([i[1],i[1]]),this.more.setSize([i[1],i[1]])):"backClasses"===e?this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}):"backContent"===e?this.back.setContent(this.options.backContent):"classes"===e?(this.title.setOptions({classes:this.options.classes}),this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}),this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)})):"content"===e?this.setContent(this.options.content):"moreClasses"===e?this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)}):"moreContent"===e&&this.more.setContent(this.options.content)}.bind(this))}var s=t("../core/Scene"),n=t("../core/Surface"),r=t("../core/Transform"),a=t("../core/View");o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={size:[void 0,50],backClasses:["back"],backContent:"&#x25c0;",classes:["navigation"],content:"",moreClasses:["more"],moreContent:"&#x271a;"},o.prototype.setContent=function(t){return this.title.setContent(t)},i.exports=o}),define("famous/widgets/Slider",["require","exports","module","../core/Surface","../surfaces/CanvasSurface","../core/Transform","../core/EventHandler","../math/Utilities","../core/OptionsManager","../inputs/MouseSync","../inputs/TouchSync","../inputs/GenericSync"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this.optionsManager=new c(this.options),t&&this.setOptions(t),this.indicator=new r({size:this.options.indicatorSize,classes:["slider-back"]}),this.label=new n({size:this.options.labelSize,content:this.options.label,properties:{pointerEvents:"none"},classes:["slider-label"]}),this.eventOutput=new h,this.eventInput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput);var e=(this.options.range[1]-this.options.range[0])/this.options.indicatorSize[0];this.sync=new f(["mouse","touch"],{scale:e,direction:f.DIRECTION_X}),this.indicator.pipe(this.sync),this.sync.pipe(this),this.eventInput.on("update",function(t){this.set(t.position)}.bind(this)),this._drawPos=0,s.call(this)}function s(){this.label.setContent(this.options.label+'<span style="float: right">'+this.get().toFixed(this.options.precision)+"</span>")}var n=t("../core/Surface"),r=t("../surfaces/CanvasSurface"),a=t("../core/Transform"),h=t("../core/EventHandler"),u=t("../math/Utilities"),c=t("../core/OptionsManager"),p=t("../inputs/MouseSync"),l=t("../inputs/TouchSync"),f=t("../inputs/GenericSync");f.register({mouse:p,touch:l}),o.DEFAULT_OPTIONS={size:[200,60],indicatorSize:[200,30],labelSize:[200,30],range:[0,1],precision:2,value:0,label:"",fillColor:"rgba(170, 170, 170, 1)"},o.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)
},o.prototype.get=function(){return this.options.value},o.prototype.set=function(t){t!==this.options.value&&(this.options.value=u.clamp(t,this.options.range),s.call(this),this.eventOutput.emit("change",{value:t}))},o.prototype.getSize=function(){return this.options.size},o.prototype.render=function(){var t=this.options.range,e=Math.floor((this.get()-t[0])/(t[1]-t[0])*this.options.indicatorSize[0]);if(e<this._drawPos)this.indicator.getContext("2d").clearRect(e,0,this._drawPos-e+1,this.options.indicatorSize[1]);else if(e>this._drawPos){var i=this.indicator.getContext("2d");i.fillStyle=this.options.fillColor,i.fillRect(this._drawPos-1,0,e-this._drawPos+1,this.options.indicatorSize[1])}return this._drawPos=e,{size:this.options.size,target:[{origin:[0,0],target:this.indicator.render()},{transform:a.translate(0,0,1),origin:[0,0],target:this.label.render()}]}},i.exports=o}),define("famous/widgets/ToggleButton",["require","exports","module","../core/Surface","../core/EventHandler","../views/RenderController"],function(t,e,i){function o(t){this.options={content:"",offClasses:["off"],onClasses:["on"],size:void 0,outTransition:{curve:"easeInOut",duration:300},inTransition:{curve:"easeInOut",duration:300},toggleMode:o.TOGGLE,crossfade:!0},this._eventOutput=new n,n.setOutputHandler(this,this._eventOutput),this.offSurface=new s,this.offSurface.on("click",function(){this.options.toggleMode!==o.OFF&&this.select()}.bind(this)),this.offSurface.pipe(this._eventOutput),this.onSurface=new s,this.onSurface.on("click",function(){this.options.toggleMode!==o.ON&&this.deselect()}.bind(this)),this.onSurface.pipe(this._eventOutput),this.arbiter=new r({overlap:this.options.crossfade}),this.deselect(),t&&this.setOptions(t)}var s=t("../core/Surface"),n=t("../core/EventHandler"),r=t("../views/RenderController");o.OFF=0,o.ON=1,o.TOGGLE=2,o.prototype.select=function(){this.selected=!0,this.arbiter.show(this.onSurface,this.options.inTransition),this._eventOutput.emit("select")},o.prototype.deselect=function(){this.selected=!1,this.arbiter.show(this.offSurface,this.options.outTransition),this._eventOutput.emit("deselect")},o.prototype.isSelected=function(){return this.selected},o.prototype.setOptions=function(t){void 0!==t.content&&(this.options.content=t.content,this.offSurface.setContent(this.options.content),this.onSurface.setContent(this.options.content)),t.offClasses&&(this.options.offClasses=t.offClasses,this.offSurface.setClasses(this.options.offClasses)),t.onClasses&&(this.options.onClasses=t.onClasses,this.onSurface.setClasses(this.options.onClasses)),void 0!==t.size&&(this.options.size=t.size,this.onSurface.setSize(this.options.size),this.offSurface.setSize(this.options.size)),void 0!==t.toggleMode&&(this.options.toggleMode=t.toggleMode),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.crossfade&&(this.options.crossfade=t.crossfade,this.arbiter.setOptions({overlap:this.options.crossfade}))},o.prototype.getSize=function(){return this.options.size},o.prototype.render=function(){return this.arbiter.render()},i.exports=o}),define("famous/widgets/TabBar",["require","exports","module","../utilities/Utility","../core/View","../views/GridLayout","./ToggleButton"],function(t,e,i){function o(){a.apply(this,arguments),this.layout=new h,this.buttons=[],this._buttonIds={},this._buttonCallbacks={},this.layout.sequenceFrom(this.buttons),this._add(this.layout),this._optionsManager.on("change",s.bind(this))}function s(t){var e=t.id,i=t.value;if("direction"===e)this.layout.setOptions({dimensions:n.call(this.buttons.length,this.options.direction)});else if("buttons"===e)for(var o in this.buttons)this.buttons[o].setOptions(i);else if("sections"===e)for(var s in this.options.sections)this.defineSection(s,this.options.sections[s])}function n(t,e){return e===r.Direction.X?[t,1]:[1,t]}var r=t("../utilities/Utility"),a=t("../core/View"),h=t("../views/GridLayout"),u=t("./ToggleButton");o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={sections:[],widget:u,size:[void 0,50],direction:r.Direction.X,buttons:{toggleMode:u.ON}},o.prototype.defineSection=function(t,e){var i,o=this._buttonIds[t];if(void 0===o){o=this.buttons.length,this._buttonIds[t]=o;var s=this.options.widget;i=new s,this.buttons[o]=i,this.layout.setOptions({dimensions:n(this.buttons.length,this.options.direction)})}else i=this.buttons[o],i.unbind("select",this._buttonCallbacks[t]);this.options.buttons&&i.setOptions(this.options.buttons),i.setOptions(e),this._buttonCallbacks[t]=this.select.bind(this,t),i.on("select",this._buttonCallbacks[t])},o.prototype.select=function(t){var e=this._buttonIds[t];this.buttons[e]&&this.buttons[e].isSelected()?this._eventOutput.emit("select",{id:t}):this.buttons[e]&&this.buttons[e].select();for(var i=0;i<this.buttons.length;i++)i!==e&&this.buttons[i].deselect()},i.exports=o}),define("utils/RenderHelpers",["require","exports","module"],function(t,e,i){function o(t){t._object=null,t._child=null,t._hasCached=!1,t._resultCache={},t._prevResults={},t._childResult=null}i.exports={resetNode:o}}),define("utils/DeviceView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/core/RenderNode","famous/surfaces/ContainerSurface"],function(t,e,i){function o(){p.apply(this,arguments),s.call(this),n.call(this),r.call(this),a.call(this)}function s(){this.options.width?this.options.height=this.options[this.options.type].aspectRatio*this.options.width:this.options.height&&(this.options.width=this.options.height/this.options[this.options.type].aspectRatio),this.options.screenWidth=this.options[this.options.type].screenWidth*this.options.width,this.options.screenHeight=this.options[this.options.type].screenHeight*this.options.height,this.options.originX=this.options[this.options.type].originX*this.options.width,this.options.originY=this.options[this.options.type].originY*this.options.height}function n(){this.device=new h({size:[this.options.width,this.options.height],content:'<img src="'+this.options[this.options.type].image+'" width="'+this.options.width+'">'}),this.device.pipe(this._eventOutput),this._add(this.device)}function r(){this.container=new l({size:[this.options.screenWidth,this.options.screenHeight],properties:{backgroundColor:"black",overflow:"hidden"}}),this.containerMod=new u({transform:c.translate(this.options.originX,this.options.originY,.1)}),this._add(this.containerMod).add(this.container)}function a(){this.container.getSize();this.contentMod=new u({origin:[.5,.5]}),this.reset=new u({origin:[0,0]}),this.contentNode=this.container.add(this.contentMod).add(this.reset)}var h=t("famous/core/Surface"),u=t("famous/core/Modifier"),c=t("famous/core/Transform"),p=t("famous/core/View"),l=(t("famous/core/RenderNode"),t("famous/surfaces/ContainerSurface"));o.prototype=Object.create(p.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={type:"",width:0,height:0,iphone:{image:"content/images/devices/device-iphone.svg",aspectRatio:659/317,screenWidth:.86,screenHeight:.705,originX:.07,originY:.148},ipad:{image:"content/images/devices/device-ipad.svg",aspectRatio:434/294,screenWidth:.885,screenHeight:.8,originX:.06,originY:.105},nexus:{image:"content/images/devices/device-nexus.svg",aspectRatio:667/332,screenWidth:.895,screenHeight:.789,originX:.05,originY:.0915}},o.prototype.setLandscape=function(){this.contentMod.setTransform(c.rotateZ(-Math.PI/2),this.options.rotateTransition),this.contentMod.setSize([this.container.getSize()[1],this.container.getSize()[0]])},o.prototype.setPortrait=function(){this.contentMod.setTransform(c.rotateZ(0),this.options.rotateTransition),this.contentMod.setSize(this.container.getSize())},o.prototype.getSize=function(){return[this.options.width,this.options.height]},o.prototype.getScreenSize=function(){return[this.options.screenWidth,this.options.screenHeight]},o.prototype.add=function(t){return this.contentNode.add(t)},i.exports=o}),define("utils/IframeSurface",["require","exports","module","famous/core/Surface"],function(t,e,i){function o(){this.loaded=!1,this._iframeUrl="about:blank",s.apply(this,arguments)}var s=t("famous/core/Surface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="iframe",o.prototype.elementClass="famous-surface",o.prototype.setContent=function(t){this._iframeUrl=t,this._contentDirty=!0},o.prototype.deploy=function(t){t.src=this._iframeUrl||"about:blank",this.target=t,this.target.onload=function(){this.loaded&&this.emit("ready"),this.loaded=!0}.bind(this)},o.prototype.recall=function(t){t.src=""},o.prototype.getTarget=function(){return this.target},i.exports=o}),define("views/LivePreview",["require","exports","module","famous/core/Context","famous/core/ElementAllocator","famous/core/Entity","famous/events/EventArbiter","famous/core/EventHandler","famous/core/Group","famous/core/Modifier","famous/core/OptionsManager","famous/core/RenderNode","famous/core/Scene","famous/core/SpecParser","famous/core/Surface","famous/core/Transform","famous/core/View","famous/core/ViewSequence","famous/math/Quaternion","famous/math/Random","famous/math/Vector","famous/modifiers/StateModifier","famous/modifiers/Draggable","famous/modifiers/ModifierChain","famous/physics/PhysicsEngine","famous/physics/bodies/Body","famous/physics/bodies/Circle","famous/physics/bodies/Particle","famous/physics/bodies/Rectangle","famous/physics/constraints/Collision","famous/physics/constraints/Constraint","famous/physics/constraints/Curve","famous/physics/constraints/Distance","famous/physics/constraints/Wall","famous/physics/constraints/Walls","famous/physics/forces/Drag","famous/physics/forces/Force","famous/physics/forces/Repulsion","famous/physics/forces/Spring","famous/physics/forces/RotationalSpring","famous/physics/forces/VectorField","famous/physics/integrators/SymplecticEuler","famous/surfaces/CanvasSurface","famous/surfaces/ContainerSurface","famous/surfaces/ImageSurface","famous/surfaces/VideoSurface","famous/inputs/FastClick","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/PinchSync","famous/inputs/RotateSync","famous/inputs/ScaleSync","famous/inputs/ScrollSync","famous/inputs/TouchSync","famous/inputs/TouchTracker","famous/inputs/TwoFingerSync","famous/transitions/Easing","famous/transitions/MultipleTransition","famous/transitions/SpringTransition","famous/transitions/SnapTransition","famous/transitions/Transitionable","famous/transitions/TweenTransition","famous/transitions/WallTransition","famous/utilities/KeyCodes","famous/utilities/Utility","famous/views/Deck","famous/views/EdgeSwapper","famous/views/GridLayout","famous/views/HeaderFooterLayout","famous/views/Lightbox","famous/views/RenderController","famous/views/ScrollContainer","famous/views/Scrollview","famous/views/SequentialLayout","famous/widgets/NavigationBar","famous/widgets/Slider","famous/widgets/TabBar","famous/widgets/ToggleButton","utils/RenderHelpers","utils/DeviceView","utils/IframeSurface","famous/core/Engine","famous/utilities/Timer"],function(require,exports,module){function eventForwarder(t,e,i,o){LISTENERS.push({key:i,fn:o,removeFn:e}),t(i,o)}function eventForwarderOnReturn(t,e,i,o){var s=t(i,o);LISTENERS.push({key:i,fn:s,removeFn:e})}function eventRemover(t){t.removeFn(t.key,t.fn)}function Preview(){View.apply(this,arguments),this.reset()}function stripComments(t){if(t){var e=t.split("\n"),i=[];if(e.length>0)for(var o=0;o<e.length;o++){var s=e[o];0!==s.indexOf("//")&&i.push(s)}return i.join("\n")}}function removeDependencies(t){if(t){for(var e=t.split("\n"),i=[],o=0;o<e.length;o++){var s=/^define/gi.test(e[o])||/createContext/gi.test(e[o])||/require/gi.test(e[o]);s||i.push(e[o])}return i=i.join("\n")}}var Context=require("famous/core/Context"),ElementAllocator=require("famous/core/ElementAllocator"),Entity=require("famous/core/Entity"),EventArbiter=require("famous/events/EventArbiter"),EventHandler=require("famous/core/EventHandler"),Group=require("famous/core/Group"),Modifier=require("famous/core/Modifier"),OptionsManager=require("famous/core/OptionsManager"),RenderNode=require("famous/core/RenderNode"),Scene=require("famous/core/Scene"),SpecParser=require("famous/core/SpecParser"),Surface=require("famous/core/Surface"),Transform=require("famous/core/Transform"),View=require("famous/core/View"),ViewSequence=require("famous/core/ViewSequence"),Quaternion=require("famous/math/Quaternion"),Random=require("famous/math/Random"),Vector=require("famous/math/Vector"),StateModifier=require("famous/modifiers/StateModifier"),Draggable=require("famous/modifiers/Draggable"),ModifierChain=require("famous/modifiers/ModifierChain"),PhysicsEngine=require("famous/physics/PhysicsEngine"),Body=require("famous/physics/bodies/Body"),Circle=require("famous/physics/bodies/Circle"),Particle=require("famous/physics/bodies/Particle"),Rectangle=require("famous/physics/bodies/Rectangle"),Collision=require("famous/physics/constraints/Collision"),Constraint=require("famous/physics/constraints/Constraint"),Curve=require("famous/physics/constraints/Curve"),Distance=require("famous/physics/constraints/Distance"),Wall=require("famous/physics/constraints/Wall"),Walls=require("famous/physics/constraints/Walls"),Drag=require("famous/physics/forces/Drag"),Force=require("famous/physics/forces/Force"),Repulsion=require("famous/physics/forces/Repulsion"),Spring=require("famous/physics/forces/Spring"),RotationalSpring=require("famous/physics/forces/RotationalSpring"),VectorField=require("famous/physics/forces/VectorField"),SymplecticEuler=require("famous/physics/integrators/SymplecticEuler"),CanvasSurface=require("famous/surfaces/CanvasSurface"),ContainerSurface=require("famous/surfaces/ContainerSurface"),ImageSurface=require("famous/surfaces/ImageSurface"),VideoSurface=require("famous/surfaces/VideoSurface"),FastClick=require("famous/inputs/FastClick"),GenericSync=require("famous/inputs/GenericSync"),MouseSync=require("famous/inputs/MouseSync"),PinchSync=require("famous/inputs/PinchSync"),RotateSync=require("famous/inputs/RotateSync"),ScaleSync=require("famous/inputs/ScaleSync"),ScrollSync=require("famous/inputs/ScrollSync"),TouchSync=require("famous/inputs/TouchSync"),TouchTracker=require("famous/inputs/TouchTracker"),TwoFingerSync=require("famous/inputs/TwoFingerSync"),Easing=require("famous/transitions/Easing"),MultipleTransition=require("famous/transitions/MultipleTransition"),SpringTransition=require("famous/transitions/SpringTransition"),SnapTransition=require("famous/transitions/SnapTransition"),Transitionable=require("famous/transitions/Transitionable"),TweenTransition=require("famous/transitions/TweenTransition"),WallTransition=require("famous/transitions/WallTransition"),KeyCodes=require("famous/utilities/KeyCodes"),Utility=require("famous/utilities/Utility"),Deck=require("famous/views/Deck"),EdgeSwapper=require("famous/views/EdgeSwapper"),GridLayout=require("famous/views/GridLayout"),HeaderFooterLayout=require("famous/views/HeaderFooterLayout"),Lightbox=require("famous/views/Lightbox"),RenderController=require("famous/views/RenderController"),ScrollContainer=require("famous/views/ScrollContainer"),Scrollview=require("famous/views/Scrollview"),SequentialLayout=require("famous/views/SequentialLayout"),NavigationBar=require("famous/widgets/NavigationBar"),Slider=require("famous/widgets/Slider"),TabBar=require("famous/widgets/TabBar"),ToggleButton=require("famous/widgets/ToggleButton"),RenderHelpers=require("utils/RenderHelpers"),DeviceView=require("utils/DeviceView"),IframeSurface=require("utils/IframeSurface"),RealEngine=require("famous/core/Engine"),RealTimer=require("famous/utilities/Timer");scroll=void 0;var LISTENERS=[],Engine={};for(var key in RealEngine)Engine[key]=RealEngine[key];Engine.on=eventForwarder.bind({},RealEngine.on,RealEngine.removeListener);var Timer={};for(var key in RealTimer)Timer[key]=RealTimer[key];Timer.clear=function(t,e){return RealTimer.clear(e)},Timer.setInterval=eventForwarderOnReturn.bind({},RealTimer.setInterval,Timer.clear),Preview.prototype=Object.create(View.prototype),Preview.prototype.constructor=Preview,Preview.DEFAULT_OPTIONS={width:null},Preview.prototype.run=function run(code){this.reset();var context=mainContext=this.container.context;code=stripComments(code),code=removeDependencies(code);try{eval(code)}catch(e){return e}},Preview.prototype.reset=function(){for(RenderHelpers.resetNode(this._node);listener=LISTENERS.pop();)eventRemover(listener);this.container=new ContainerSurface({properties:{}}),this.add(this.container)},module.exports=Preview}),define("views/Preview",["require","exports","module","famous/core/View","views/LivePreview"],function(t,e,i){function o(){n.apply(this,arguments),s.call(this)}function s(){this.preview=new r,this.add(this.preview)}var n=t("famous/core/View"),r=t("views/LivePreview");o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},o.prototype.runCode=function(t){this.preview.run(t.javascript)},i.exports=o}),define("famous/surfaces/InputSurface",["require","exports","module","../core/Surface"],function(t,e,i){function o(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._type=t.type||"text",this._name=t.name||"",s.apply(this,arguments),this.on("click",this.focus.bind(this)),window.addEventListener("click",function(t){t.target!==this._currentTarget&&this.blur()}.bind(this))}var s=t("../core/Surface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="input",o.prototype.elementClass="famous-surface",o.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},o.prototype.focus=function(){return this._currentTarget&&this._currentTarget.focus(),this},o.prototype.blur=function(){return this._currentTarget&&this._currentTarget.blur(),this},o.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},o.prototype.setType=function(t){return this._type=t,this._contentDirty=!0,this},o.prototype.getValue=function(){return this._currentTarget?this._currentTarget.value:this._value},o.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},o.prototype.getName=function(){return this._name},o.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),t.value=this._value,t.type=this._type,t.name=this._name},i.exports=o}),define("views/ButtonView",["require","exports","module","famous/core/View","famous/core/Surface","famous/surfaces/ImageSurface","famous/modifiers/StateModifier","famous/core/Transform","famous/transitions/Transitionable","famous/transitions/SpringTransition","famous/transitions/Easing"],function(t,e,i){function o(){s.apply(this,arguments);var t="image"===this.options.type?r:n;this.surface=new t({size:this.options.size,content:this.options.content,properties:this.options.properties,classes:this.options.classes}),this.modifier=new a({origin:this.options.origin,transform:this.options.transform,size:this.options.size}),this.centerMod=new a({align:[.5,.5],origin:[.5,.5]}),this.add(this.modifier).add(this.centerMod).add(this.surface),this.surface.pipe(this._eventOutput),this.events(),this.options.visible||this.hide(null,!1)}var s=t("famous/core/View"),n=t("famous/core/Surface"),r=t("famous/surfaces/ImageSurface"),a=t("famous/modifiers/StateModifier"),h=t("famous/core/Transform"),u=t("famous/transitions/Transitionable"),c=t("famous/transitions/SpringTransition"),p=t("famous/transitions/Easing");u.registerMethod("spring",c),o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={type:void 0,size:void 0,content:void 0,properties:void 0,origin:void 0,transform:void 0,classes:[],bounceBack:!0,bounceTransition:{method:"spring",period:250,dampingRatio:.5},bounceScale:.8,visible:!0,showTransition:{curve:p.outExpo,duration:500}},o.prototype.events=function(){this.surface.on("click",this._bounceBack.bind(this))},o.prototype.setContent=function(t){return this.surface.setContent(t)},o.prototype._bounceBack=function(){this.options.bounceBack&&(this.centerMod.halt(),this.centerMod.setTransform(h.scale(this.options.bounceScale,this.options.bounceScale,1)),this.centerMod.setTransform(h.identity,this.options.bounceTransition))},o.prototype.hide=function(t,e){(this.visible||void 0===this.visible)&&(this.visible=!1,void 0===e&&(e=this.options.showTransition),this.centerMod.halt(),this.centerMod.setTransform(h.scale(.001,.001),e,t))},o.prototype.show=function(t,e){this.visible||(this.visible=!0,void 0===e&&(e=this.options.showTransition),this.centerMod.halt(),this.centerMod.setTransform(h.identity,e,t))},o.prototype.toggle=function(){this.visible?this.hide():this.show()},i.exports=o}),define("views/IframeView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/RenderNode","famous/views/Lightbox","famous/surfaces/InputSurface","famous/views/HeaderFooterLayout","utils/IframeSurface","views/ButtonView"],function(t,e,i){function o(){h.apply(this,arguments),this.ready=!1,s.call(this),n.call(this),r.call(this),a.call(this),this.iframe.on("ready",function(){this.ready=!0,this.runCode(this.code)}.bind(this)),this.refreshButton.on("click",this.refresh.bind(this))}function s(){this.lightbox=new l({inTransition:!1,outTransition:!1,showOrigin:[0,1]}),this.add(this.lightbox)}function n(){this.iframe=new m({classes:["appIframe"]});var t=new u({transform:c.translate(0,0,.1)});this.add(t).add(this.iframe)}function r(){this.input=new p;var t=new d({direction:0,footerSize:60}),e=new u({size:[void 0,20],transform:c.translate(0,0,1)});this.input.add(e).add(t);var i=new y({content:"Submit",bounceBack:!0,classes:["button"],properties:{backgroundColor:"#999"}});this.inputSurface=new f({}),t.content.add(this.inputSurface),t.footer.add(i),i.on("click",function(){var t=this.inputSurface.getValue();this.setIframeUrl(t),this._eventOutput.emit("iframeUrlChange",t)}.bind(this))}function a(){this.refreshButton=new y({size:[35,35],type:"image",content:"content/images/refresh.svg",classes:["button"]});var t=new u({origin:[1,0],align:[1,0],transform:c.translate(-5,5,1)});this.add(t).add(this.refreshButton)}var h=t("famous/core/View"),u=(t("famous/core/Surface"),t("famous/core/Modifier")),c=t("famous/core/Transform"),p=t("famous/core/RenderNode"),l=t("famous/views/Lightbox"),f=t("famous/surfaces/InputSurface"),d=t("famous/views/HeaderFooterLayout"),m=t("utils/IframeSurface"),y=t("views/ButtonView");o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={defaultIframe:"preview-adapters/preview-adapter-famous-deprecated/index.html"},o.prototype.runCode=function(t){if(this.code=t,this.ready)try{this.iframe.target.contentWindow.setFamousContent(t)}catch(e){}},o.prototype.setIframeUrl=function(t,e){(t!==this.url||e)&&(this.url=t,this.ready=!1,"undefined"!==t&&""!==t?(this.iframe.setContent(t),this.inputSurface.setValue(t)):(this.iframe.setContent(this.options.defaultIframe),this.inputSurface.setValue(this.options.defaultIframe)))},o.prototype.showInput=function(){this.lightbox.show(this.input)},o.prototype.refresh=function(){"preview-adapters/famous-university-angular-preview-adapter/index.html"===this.url?this.setIframeUrl(this.url,!0):this.trigger("codeChange",this.code)},i.exports=o}),define("views/StepView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/RenderNode","famous/utilities/Timer","views/TogglePaneLayout","views/InstructionView","views/EditorsView","views/Preview","views/IframeView"],function(t,e,i){function o(){r.apply(this,arguments),this.currentStep,s.call(this),n.call(this),this.layout.on("resize",function(){this.modules.editors.resize()}.bind(this)),this.modules.editors.on("update",function(t){this.modules.iframe.runCode(t),this.modules.preview.runCode(t),this.currentStep.setCode(t)}.bind(this)),this.modules.instruction.on("update",function(t){this.currentStep.set("instruction",t)}.bind(this)),this.modules.iframe.on("iframeUrlChange",function(t){this.currentStep.set("previewUrl",t)}.bind(this))}function s(){this.layout=new h({direction:0,header:{controls:!1,size:30,style:{backgroundColor:"#333"}},ratios:[.75,1,.75],initialState:this.options.defaultState,buttons:{style:{backgroundColor:"green"}}}),this.add(this.layout)}function n(){this.modules={instruction:new u,editors:new c,iframe:new l,preview:new p},this.setLayoutState(this.options.defaultState)}var r=t("famous/core/View"),a=t("famous/core/Surface"),h=(t("famous/core/RenderNode"),t("famous/utilities/Timer"),t("views/TogglePaneLayout")),u=t("views/InstructionView"),c=t("views/EditorsView"),p=t("views/Preview"),l=t("views/IframeView");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={layoutModel:void 0,lessonUrl:null,defaultModules:["instruction","editors","iframe"],defaultState:[1,1,1]},o.prototype.setContent=function(t){var e=t.getCode();this.modules.instruction.setContent(t.get("instruction")),this.modules.iframe.setIframeUrl(t.get("previewUrl")),this.modules.editors.setModules(t.getEditorModules()),this.modules.editors.setCode(e),this.modules.iframe.runCode(e),this.modules.preview.runCode(e),this.currentStep=t},o.prototype.setLayoutState=function(t){for(var e=[],i=t.modules||this.options.defaultModules,o=0;o<i.length;o++)e.push(i[o]?this.modules[i[o]]:new a);this.layout.sequenceFrom(e),this.layout.setState(t)},o.prototype.enableEditMode=function(){this.modules.iframe.showInput()},o.prototype.editInstruction=function(){this.modules.instruction.toggle()},i.exports=o}),define("views/NavButtons",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/core/RenderNode","views/ButtonView"],function(t,e,i){function o(){r.apply(this,arguments),s.call(this),n.call(this),this._eventInput.on("setNav",this.setNav.bind(this))}function s(){this.prevButton=new u({bounceBack:!0,content:"Back",size:this.options.size,classes:["button"],properties:this.options.properties}),this.nextButton=new u({bounceBack:!0,content:"Next",size:this.options.size,classes:["button"],properties:this.options.properties}),this.completeButton=new u({bounceBack:!0,content:"Complete",size:this.options.size,classes:["button"],properties:this.options.properties}),this.prevModifier=new a({align:[0,.5],origin:[0,.5]}),this.nextModifier=new a({align:[1,.5],origin:[1,.5]});var t=new h;this.add(this.prevModifier).add(this.prevButton),this.add(this.nextModifier).add(t),t.add(this.nextButton),t.add(this.completeButton)}function n(){this.prevButton.on("click",function(){this._eventOutput.emit("prev")}.bind(this)),this.nextButton.on("click",function(){this._eventOutput.emit("next")}.bind(this))}var r=t("famous/core/View"),a=(t("famous/core/Surface"),t("famous/core/Modifier")),h=t("famous/core/RenderNode"),u=t("views/ButtonView");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={size:void 0,properties:void 0},o.prototype.setNav=function(t){t.prev?this.prevButton.show():this.prevButton.hide(),t.next?this.nextButton.show():this.nextButton.hide(),t.prev&&!t.next?this.completeButton.show():this.completeButton.hide()},i.exports=o}),define("views/LayoutButtons",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/RenderNode","views/ButtonView"],function(t,e,i){function o(){n.apply(this,arguments),this.layoutModel=this.options.layoutModel,this.layoutModel.on("change:layout",this.updateButtons.bind(this)),this.buttonName=["threePanel","twoPanel","onePanel","textApp","textCode","textPreview"],s.call(this)}function s(){this.panelButtons={},this.panelButtonMods={};for(var t=0,e=0;e<this.buttonName.length;e++){var i=new h({type:"image",content:"content/images/"+this.buttonName[e]+".svg",size:this.options.size,classes:["button"],visible:!0}),o=new r({opacity:this.options.offOpacity,transform:a.translate(t,0)});this.add(o).add(i),"expand"!==this.buttonName[e]?(this.panelButtons[this.buttonName[e]]=i,this.panelButtonMods[this.buttonName[e]]=o):(this.expandMod=o,i.show()),i.on("click",this.handleClick.bind(this,this.buttonName[e])),t+=this.options.size[0]+this.options.spacing}}var n=t("famous/core/View"),r=(t("famous/core/Surface"),t("famous/core/Modifier")),a=t("famous/core/Transform"),h=(t("famous/core/RenderNode"),t("views/ButtonView"));o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={layoutModel:void 0,size:void 0,spacing:10,properties:void 0,offOpacity:.3},o.prototype.handleClick=function(t){this.layoutModel.setLayout(t)},o.prototype.updateButtons=function(t){for(var e in this.panelButtonMods)this.panelButtonMods[e].opacityFrom(e===t?1:this.options.offOpacity)},i.exports=o}),define("views/LayoutControlView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/RenderNode","famous/views/Lightbox","views/ButtonView","views/NavButtons","views/LayoutButtons"],function(t,e,i){function o(){c.apply(this,arguments),this.layoutModel=this.options.layoutModel,s.call(this),n.call(this),r.call(this),a.call(this),h.call(this),u.call(this),this.expandButton.on("click",function(){this._eventOutput.emit("expand")}.bind(this)),this.prevButton.on("click",function(){this._eventOutput.emit("prev")}.bind(this)),this.nextButton.on("click",function(){this._eventOutput.emit("next")}.bind(this)),this.completeButton.on("click",function(){this._eventOutput.emit("complete")}.bind(this)),this.layoutButton.on("click",this.cycleLayouts.bind(this)),this.layoutModel.on("change:navStates",this.setNav.bind(this)),this.layoutModel.on("change:layout",function(t){this.layoutButtons.updateButtons(t)}.bind(this))}function s(){var t=new p({properties:{backgroundColor:"#222"}});this.add(t)}function n(){this.options.navButtonStyle.classes=["button","footer-button"];var t=Object.create(this.options.navButtonStyle);t.content='<img src="content/images/prev.svg" class="button-icon left" />back',this.prevButton=new y(t),t.content='next<img src="content/images/next.svg" class="button-icon right" />',this.nextButton=new y(t),t.content="complete",t.visible=!1,this.completeButton=new y(t),this.prevModifier=new l({align:[0,.5],origin:[0,.5]}),this.nextModifier=new l({align:[1,.5],origin:[1,.5]});var e=new d;this.add(this.prevModifier).add(this.prevButton),this.add(this.nextModifier).add(e),e.add(this.nextButton),e.add(this.completeButton)}function r(){var t=Object.create(this.options.navButtonStyle);t.content='<img src="content/images/expand.svg" class="button-icon left" />expand',this.expandButton=new y(t),this.layoutModifier=new l({align:[1,.5],origin:[1,.5],transform:f.translate(-t.size[0]-1,0)}),this.add(this.layoutModifier).add(this.expandButton)}function a(){var t=Object.create(this.options.navButtonStyle);t.content='<img src="content/images/layouts.svg" class="button-icon left" />layouts',this.layoutButton=new y(t),this.layoutModifier=new l({align:[1,.5],origin:[1,.5],transform:f.translate(-2*t.size[0]-2,0)}),this.add(this.layoutModifier).add(this.layoutButton)}function h(){var t=new l({transform:f.translate(100,5)});this.lightbox=new m({showOrigin:[0,0]}),this.add(t).add(this.lightbox),this.layoutButtons=new g({layoutModel:this.options.layoutModel,size:[30,30],spacing:10}),this.subscribe(this.layoutButtons)}function u(){var t=new p({classes:["footer-shadow"]});this.add(t)}var c=t("famous/core/View"),p=t("famous/core/Surface"),l=t("famous/core/Modifier"),f=t("famous/core/Transform"),d=t("famous/core/RenderNode"),m=t("famous/views/Lightbox"),y=t("views/ButtonView"),g=(t("views/NavButtons"),t("views/LayoutButtons"));o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={layoutModel:void 0,router:void 0,layoutSize:[110,30],layoutButtons:{size:[30,30]},navSize:[180,30],navButtonStyle:{bounceBack:!0,size:[120,30],classses:["button"],properties:{backgroundColor:"gray",textAlign:"center",color:"white",lineHeight:"30px"}},margin:0,defaultLayout:"threePanel"},o.prototype.updateContent=function(t){this.trigger("setLayout",t.layout),this.layoutButtons.updateButtons(t.layout),this._eventOutput.emit("updateContent",t)
},o.prototype.enableEditMode=function(){this.lightbox.show(this.layoutButtons)},o.prototype.cycleLayouts=function(){var t={threePanel:"twoPanel",twoPanel:"onePanel",onePanel:"threePanel"},e=t[this.layoutModel.get("layout")];this.layoutModel.setLayout(e)},o.prototype.setNav=function(t){t.prev?this.prevButton.show():this.prevButton.hide(),t.next?this.nextButton.show():this.nextButton.hide(),t.prev&&!t.next?this.completeButton.show():this.completeButton.hide()},i.exports=o}),define("views/ModalView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/RenderNode","famous/views/Lightbox","famous/transitions/Easing","views/ButtonView"],function(t,e,i){function o(){h.apply(this,arguments),s.call(this),n.call(this),r.call(this),a.call(this),this.closeButton.on("click",this.hideModal.bind(this)),this._eventInput.on("updateLessonInfo",this.setLessonInfo.bind(this))}function s(){this.modalLightbox=new f({inTransform:p.translate(0,-600,1),showTransform:p.translate(0,0,1),inTransition:{duration:800,curve:d.outBounce},outTransition:{duration:300,curve:d.inBack}}),this.add(this.modalLightbox),this.overlayLightbox=new f({inTransform:p.identity,outTransform:p.identity,inTransition:{duration:300},outTransition:{duration:300},showOpacity:.7}),this.add(this.overlayLightbox)}function n(){var t=new c({align:[.5,.5],origin:[.5,.5]}),e=new u({properties:{backgroundColor:"black"}}),i=(new l).add(t);i.add(e),this.overlay=i}function r(){this.modalSurface=new u({size:this.options.modalSize,properties:{textAlign:"center",backgroundColor:"rgb(246, 246, 246)",zIndex:800,borderRadius:"4px"}}),this.modalMod=new c({size:this.options.modalSize,origin:[.5,.5],align:[.5,.5]}),this.modalNode=(new l).add(this.modalMod),this.modalNode.add(this.modalSurface)}function a(){this.closeButton=new m({size:[30,30],type:"image",content:"content/images/close.svg",classes:["button"],properties:{borderRadius:"30px",border:"3px solid white",boxShadow:"0 0 10px black"}});var t=new c({origin:[1,0],align:[1,0],transform:p.translate(12,-12,1)});this.modalNode.add(t).add(this.closeButton)}var h=t("famous/core/View"),u=t("famous/core/Surface"),c=t("famous/core/Modifier"),p=t("famous/core/Transform"),l=t("famous/core/RenderNode"),f=t("famous/views/Lightbox"),d=t("famous/transitions/Easing"),m=t("views/ButtonView");o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={lessonInfo:void 0,modalSize:[335,400]},o.prototype.setLessonInfo=function(t){var e=t.image||"/../lesson-assets/fuicons/hello.svg",e="content/fuicons/hello.svg",i=t.lessonTitle.toUpperCase();this.modalSurface.setContent('<h2 style="line-height:40px;margin-top: 14px;background-color:#404040;color:white;font-size:21px;margin-bottom:19px">LESSON COMPLETE</h2><p style="font-size:32px;margin-bottom:20px">'+i+'</p><img style="border-radius:8px;" src="'+e+'" width="200px" /><br/><div width=200px style="padding-left:7px; margin-top:5px;"><iframe class="twitter-share-button twitter-tweet-button twitter-share-button twitter-count-horizontal" src="//platform.twitter.com/widgets/tweet_button.html?text=I%20just%20finished%20the%20'+i+'%20lesson%20in%20%40befamous%20University.%20Start%20learning%20here%3a&lang=en&count=horizontal&size=m&url=http%3a%2f%2ffamo.us" scrolling="0" frameborder="0" allowTransparency="true" style="width: 110px; height: 21px;"></iframe><iframe src="http://ghbtns.com/github-btn.html?user=famous&repo=famous&type=watch&count=true" height="21px" width="100" frameborder="0" scrolling="0" style="width: 100px; height: 21px;" allowTransparency="true"></iframe></div>')},o.prototype.showModal=function(t){this.options.lessonInfo!==t&&this.setLessonInfo(t),this.modalLightbox.show(this.modalNode),this.overlayLightbox.show(this.overlay)},o.prototype.hideModal=function(){this.modalLightbox.hide(),this.overlayLightbox.hide()},i.exports=o}),define("UniversityApp",["require","exports","module","famous/core/View","famous/core/Modifier","famous/core/Transform","famous/core/RenderNode","famous/transitions/Transitionable","famous/views/FlexibleLayout","utils/Router","models/SessionModel","views/NavigationView","views/StepView","views/LayoutControlView","views/ModalView"],function(t,e,i){function o(){u.apply(this,arguments),this.router=new m({routePrefix:this.options.routePrefix}),this.sessionModel=window.sessionModel=new this.options.SessionModel({dataPrefix:this.options.dataPrefix}),this.layoutModel=this.sessionModel.layoutModel;var t=this.sessionModel.getLessonInfo();mixpanel.track("start lesson",{lessonName:t.lessonTitle,version:1.1}),this.router.on("changeLesson",function(t){this.sessionModel.changeLesson(t)}.bind(this)),this.router.on("changeStep",function(t){this.sessionModel.setCurrentStep(t)}.bind(this)),this.sessionModel.on("change:stepNumber",function(){this.stepView.setContent(this.sessionModel.getCurrentStep())}.bind(this)),this.options.initialLessonPath?this.router.loadInitialLesson({lessonPath:this.options.initialLessonPath,step:this.options.initialLessonStep}):this.router.parseUrl(),this.views=[],this.showNav=!0,this.headerSize=new f(this.options.headerSize),s.call(this),n.call(this),r.call(this),a.call(this),h.call(this),this.layoutControl.on("expand",this.toggleNav.bind(this)),this.layoutControl.on("prev",function(){this.router.prev(this.sessionModel.lessonPath,this.sessionModel.get("stepNumber"))}.bind(this)),this.layoutControl.on("next",function(){this.router.next(this.sessionModel.lessonPath,this.sessionModel.get("stepNumber"))}.bind(this)),this.layoutControl.on("complete",function(){var t=this.sessionModel.getLessonInfo();mixpanel.track("finish lesson",{lessonName:t.lessonTitle,version:1.1}),this.modal.showModal(t)}.bind(this)),this.layoutModel.on("change:state",function(t){this.stepView.setLayoutState(t)}.bind(this)),this.layout.sequenceFrom(this.views)}function s(){this.layout=new d({ratios:[!0,1,!0],direction:1}),this.add(this.layout)}function n(){var t=new l;this.headerMod=new c({align:[0,0],origin:[0,0],size:function(){return[void 0,this.headerSize.get()]}.bind(this),transform:function(){var t=this.headerSize.get(),e=Math.acos(t/this.options.headerSize);return p.rotateX(e)}.bind(this)}),this.header=new g,t.getSize=function(){return[void 0,this.headerSize.get()]}.bind(this),t.add(this.headerMod).add(this.header),this.views.push(t)}function r(){this.stepView=new v({layoutModel:this.layoutModel}),this.views.push(this.stepView)}function a(){var t=new l,e=new c({size:[void 0,this.options.footerSize]});this.layoutControl=new _({layoutModel:this.layoutModel,layoutSize:[110,30],layoutButtons:{size:[30,30]},navSize:[160,void 0],navButtonStyle:this.options.buttonStyle,margin:20,defaultLayout:"threePanel"}),t.add(e).add(this.layoutControl),this.views.push(t)}function h(){this.modal=new w,this.add(this.modal)}var u=t("famous/core/View"),c=t("famous/core/Modifier"),p=t("famous/core/Transform"),l=t("famous/core/RenderNode"),f=t("famous/transitions/Transitionable"),d=t("famous/views/FlexibleLayout"),m=t("utils/Router"),y=t("models/SessionModel"),g=t("views/NavigationView"),v=t("views/StepView"),_=t("views/LayoutControlView"),w=t("views/ModalView");o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={routePrefix:"university/lessons/",dataPrefix:"/university/data/",initialLessonPath:void 0,initialLessonStep:void 0,SessionModel:y,buttonStyle:void 0,headerSize:void 0,footerSize:void 0,transition:void 0},o.prototype.toggleNav=function(){this.showNav?this.headerSize.set(0,this.options.transition):this.headerSize.set(100,this.options.transition),this.showNav=!this.showNav},i.exports=o}),define("utils/AppConfig",["require","exports","module","famous/transitions/Easing"],function(t,e,i){var o=t("famous/transitions/Easing");i.exports={headerSize:100,footerSize:40,buttonStyle:{bounceBack:!0,classes:["button"],size:[100,40],properties:{backgroundColor:"gray",textAlign:"center",color:"white",lineHeight:"40px",boxShadow:"0 5px 3px rgba(0,0,0,0.5)"}},transition:{duration:600,curve:o.outExpo}}}),define("main",["require","exports","module","famous/core/Engine","UniversityApp","utils/AppConfig"],function(t){var e=t("famous/core/Engine"),i=t("UniversityApp"),o=t("utils/AppConfig"),s=e.createContext();s.setPerspective(1e3),s.container.style.perspectiveOrigin="50% 0%",window.UNIVERSITY_CONFIG=window.UNIVERSITY_CONFIG||{};for(var n in o)UNIVERSITY_CONFIG[n]=o[n];var r=new i(UNIVERSITY_CONFIG);s.add(r)}),require(["main"])}();
